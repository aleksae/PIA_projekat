{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../korisnik.service\";\nimport * as i3 from \"../objekat.service\";\nimport * as i4 from \"../poslovi.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nconst _c0 = [\"modalZatvaranje\"];\n\nfunction AgencijaPrikazComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 40);\n    i0.ɵɵelement(2, \"path\", 41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassMapInterpolate1(\"alert alert-\", ctx_r1.greska ? \"danger\" : \"primary\", \" d-flex align-items-center\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.greska ? ctx_r1.greska : ctx_r1.uspeh, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.brojac);\n  }\n}\n\nfunction AgencijaPrikazComponent_select_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"select\", 42);\n    i0.ɵɵlistener(\"ngModelChange\", function AgencijaPrikazComponent_select_21_Template_select_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.objekat = $event);\n    });\n    i0.ɵɵelementStart(1, \"option\", 43);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"sup\");\n    i0.ɵɵtext(4, \"2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"]\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const o_r5 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.objekat);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", o_r5._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\"\\u041E\\u0431\\u0458\\u0435\\u043A\\u0430\\u0442 \", i_r6 + 1, \" [\", o_r5.adresa, \", \", o_r5.kvadratura, \" m\");\n  }\n}\n\nfunction AgencijaPrikazComponent_div_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"div\", 45);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 40);\n    i0.ɵɵelement(3, \"path\", 41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵtext(5, \" \\u0422\\u0440\\u0435\\u043D\\u0443\\u0442\\u043D\\u043E \\u043D\\u0435 \\u043F\\u043E\\u0441\\u0442\\u043E\\u0458\\u0438 \\u043D\\u0438 \\u0458\\u0435\\u0434\\u0430\\u043D \\u043A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440. \");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_61_div_1_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const k_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(k_r10.klijent);\n  }\n}\n\nfunction AgencijaPrikazComponent_div_61_div_1_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 56);\n    i0.ɵɵtext(1, \"\\u0410\\u043D\\u043E\\u043D\\u0438\\u043C\\u043D\\u043E\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_61_div_1_span_11_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 58);\n    i0.ɵɵelement(2, \"path\", 59);\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_61_div_1_span_11_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 60);\n    i0.ɵɵelement(2, \"path\", 61);\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_61_div_1_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtemplate(1, AgencijaPrikazComponent_div_61_div_1_span_11_span_1_Template, 3, 0, \"span\", 57);\n    i0.ɵɵtemplate(2, AgencijaPrikazComponent_div_61_div_1_span_11_span_2_Template, 3, 0, \"span\", 57);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r16 = ctx.index;\n    const k_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r16 <= k_r10.ocena - 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r16 > k_r10.ocena - 1);\n  }\n}\n\nconst _c1 = function () {\n  return [];\n};\n\nfunction AgencijaPrikazComponent_div_61_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 47)(1, \"div\", 48)(2, \"div\", 49)(3, \"div\")(4, \"span\", 50);\n    i0.ɵɵtext(5, \"\\u041A\\u043E\\u0440\\u0438\\u0441\\u043D\\u0438\\u043A:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"strong\");\n    i0.ɵɵtemplate(7, AgencijaPrikazComponent_div_61_div_1_span_7_Template, 2, 1, \"span\", 51);\n    i0.ɵɵtemplate(8, AgencijaPrikazComponent_div_61_div_1_span_8_Template, 2, 0, \"span\", 51);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 52)(10, \"span\", 53);\n    i0.ɵɵtemplate(11, AgencijaPrikazComponent_div_61_div_1_span_11_Template, 3, 2, \"span\", 54);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(12, \"hr\");\n    i0.ɵɵelementStart(13, \"div\", 55);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const k_r10 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.ulogovan);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r9.ulogovan);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(4, _c1).constructor(5));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", k_r10.komentar, \" \");\n  }\n}\n\nfunction AgencijaPrikazComponent_div_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵtemplate(1, AgencijaPrikazComponent_div_61_div_1_Template, 15, 5, \"div\", 46);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.komentari);\n  }\n}\n\nexport class AgencijaPrikazComponent {\n  constructor(route, korisnik, objService, posloviService) {\n    this.route = route;\n    this.korisnik = korisnik;\n    this.objService = objService;\n    this.posloviService = posloviService;\n    this.ulogovan = null;\n    this.min_datum = new Date().toISOString().split(\"T\")[0];\n    this.route.paramMap.subscribe(params => {\n      this.id = params.get('id');\n    });\n  }\n\n  ngOnInit() {\n    if (sessionStorage.getItem('klijent') || sessionStorage.getItem('agencija')) {\n      this.ulogovan = JSON.parse(sessionStorage.getItem('klijent')) || JSON.parse(sessionStorage.getItem('agencija'));\n    }\n\n    this.korisnik.dohvati_korisnika(this.id).subscribe(ag => {\n      this.agencija = ag;\n    });\n    this.korisnik.dohvati_komentare(this.id).subscribe(komentari => {\n      if (komentari) {\n        this.komentari = komentari;\n        console.log(komentari);\n      }\n    });\n    this.objService.sve_za_korisnika(this.ulogovan.korisnicko_ime).subscribe(res => {\n      if (res) {\n        this.objekti = res;\n      }\n    });\n    this.opis_za_prikaz = this.agencija.dodatno['opis'].substring(0, 200);\n  }\n\n  posalji_zahtev() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const data = {\n        agencija: _this.agencija.korisnicko_ime,\n        klijent: _this.ulogovan.korisnicko_ime,\n        objekat: _this.objekat,\n        pocetak: _this.pocetak,\n        kraj: _this.kraj,\n        status: \"Послат захтев\"\n      };\n\n      _this.posloviService.dodaj_posao(data).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (res) {\n          if (!_this.kraj || !_this.objekat || !_this.pocetak || _this.pocetak > _this.kraj) {\n            _this.greska = \"Погрешно унети подаци!\";\n            return;\n          } else {\n            _this.greska = null;\n          }\n\n          const sleep = /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator(function* (milliseconds) {\n              yield new Promise(resolve => {\n                return setTimeout(resolve, milliseconds);\n              });\n            });\n\n            return function sleep(_x2) {\n              return _ref2.apply(this, arguments);\n            };\n          }();\n\n          if (res['message'] == 'ok') {\n            _this.uspeh = \"Успешно послат захтев за сарадњу! Прозор ће се затворити за: \";\n            _this.brojac = 5;\n            setTimeout(() => {\n              _this.uspeh = null;\n\n              _this.modalZatvaranje.nativeElement.click();\n            }, 5000);\n\n            for (let i = 5; i > 0; i--) {\n              yield sleep(1000);\n              _this.brojac--;\n            }\n          }\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n}\n\nAgencijaPrikazComponent.ɵfac = function AgencijaPrikazComponent_Factory(t) {\n  return new (t || AgencijaPrikazComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.KorisnikService), i0.ɵɵdirectiveInject(i3.ObjekatService), i0.ɵɵdirectiveInject(i4.PosloviService));\n};\n\nAgencijaPrikazComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AgencijaPrikazComponent,\n  selectors: [[\"app-agencija-prikaz\"]],\n  viewQuery: function AgencijaPrikazComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalZatvaranje = _t.first);\n    }\n  },\n  decls: 62,\n  vars: 14,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col\"], [1, \"col\", \"float-end\"], [1, \"float-end\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#zahtev\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"32\", \"height\", \"32\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-plus-square-fill\", \"text-warning\"], [\"d\", \"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z\"], [\"id\", \"zahtev\", \"tabindex\", \"-1\", \"aria-labelledby\", \"exampleModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [\"modalZatvaranje\", \"\"], [1, \"modal-body\"], [\"role\", \"alert\", 3, \"class\", 4, \"ngIf\"], [\"class\", \"form-select\", \"aria-label\", \"Default select example\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"startDate\"], [\"id\", \"startDate\", \"type\", \"date\", 1, \"form-control\", 3, \"min\", \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"id\", \"detalji\", 1, \"col-sm-3\"], [1, \"card\", 2, \"width\", \"18rem\"], [\"alt\", \"...\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"me-2\", \"bi\", \"bi-house-fill\"], [\"d\", \"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z\"], [\"d\", \"m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"me-2\", \"bi\", \"bi-envelope-at-fill\"], [\"d\", \"M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z\"], [\"d\", \"M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"me-2\", \"bi\", \"bi-file-earmark-break-fill\"], [\"d\", \"M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V9H2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3zM2 12h12v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-2zM.5 10a.5.5 0 0 0 0 1h15a.5.5 0 0 0 0-1H.5z\"], [\"class\", \"col-sm-9\", 4, \"ngIf\"], [\"role\", \"alert\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", \"role\", \"img\", \"aria-label\", \"Warning:\", 1, \"bi\", \"bi-exclamation-triangle-fill\", \"flex-shrink-0\", \"me-2\"], [\"d\", \"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"], [\"aria-label\", \"Default select example\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\"], [1, \"col-sm-9\"], [\"role\", \"alert\", 1, \"alert\", \"alert-primary\", \"d-flex\", \"align-items-center\"], [\"class\", \"container bg-white rounded ms-0 pt-2 pb-2 mb-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\", \"bg-white\", \"rounded\", \"ms-0\", \"pt-2\", \"pb-2\", \"mb-2\"], [1, \"row\", \"mt-2\", \"mb-2\"], [1, \"col\", \"d-flex\"], [1, \"ms-2\"], [\"class\", \"ms-2 me-2\", 4, \"ngIf\"], [1, \"ms-auto\"], [1, \"me-2\", \"ms-2\"], [4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"ms-2\", \"me-2\"], [1, \"ms-2\", \"me-2\"], [4, \"ngIf\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-star-fill\", \"text-warning\"], [\"d\", \"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-star\"], [\"d\", \"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\"]],\n  template: function AgencijaPrikazComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵelement(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3)(4, \"h4\", 4);\n      i0.ɵɵtext(5, \" \\u0417\\u0430\\u0442\\u0440\\u0430\\u0436\\u0438 \\u0441\\u0430\\u0440\\u0430\\u0434\\u045A\\u0443\");\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(6, \"svg\", 5);\n      i0.ɵɵelement(7, \"path\", 6);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(8, \"div\", 7)(9, \"div\", 8)(10, \"div\", 9)(11, \"div\", 10)(12, \"h5\", 11);\n      i0.ɵɵtext(13, \"\\u0417\\u0430\\u0445\\u0442\\u0435\\u0432 \\u0437\\u0430 \\u0441\\u0430\\u0440\\u0430\\u0434\\u045A\\u0443\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"button\", 12, 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 14);\n      i0.ɵɵtemplate(17, AgencijaPrikazComponent_div_17_Template, 7, 5, \"div\", 15);\n      i0.ɵɵelementStart(18, \"div\", 1)(19, \"div\", 2);\n      i0.ɵɵtext(20, \" \\u0418\\u0437\\u0431\\u043E\\u0440 \\u043E\\u0431\\u0458\\u0435\\u043A\\u0442\\u0430: \");\n      i0.ɵɵtemplate(21, AgencijaPrikazComponent_select_21_Template, 6, 5, \"select\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 1)(23, \"div\", 2)(24, \"label\", 17);\n      i0.ɵɵtext(25, \"\\u041F\\u043E\\u0447\\u0435\\u0442\\u0430\\u043A \\u0440\\u0430\\u0434\\u043E\\u0432\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"input\", 18);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaPrikazComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.pocetak = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 2)(28, \"label\", 17);\n      i0.ɵɵtext(29, \"\\u041A\\u0440\\u0430\\u0458 \\u0440\\u0430\\u0434\\u043E\\u0432\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"input\", 18);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaPrikazComponent_Template_input_ngModelChange_30_listener($event) {\n        return ctx.kraj = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(31, \"div\", 19)(32, \"button\", 20);\n      i0.ɵɵtext(33, \"\\u0417\\u0430\\u0442\\u0432\\u043E\\u0440\\u0438\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"button\", 21);\n      i0.ɵɵlistener(\"click\", function AgencijaPrikazComponent_Template_button_click_34_listener() {\n        return ctx.posalji_zahtev();\n      });\n      i0.ɵɵtext(35, \"\\u041F\\u043E\\u0448\\u0430\\u0459\\u0438 \\u0437\\u0430\\u0445\\u0442\\u0435\\u0432\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(36, \"div\", 1)(37, \"div\", 22)(38, \"div\", 23);\n      i0.ɵɵelement(39, \"img\", 24);\n      i0.ɵɵelementStart(40, \"div\", 25)(41, \"h5\", 26);\n      i0.ɵɵtext(42);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"p\", 27);\n      i0.ɵɵtext(44);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(45, \"ul\", 28)(46, \"li\", 29);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(47, \"svg\", 30);\n      i0.ɵɵelement(48, \"path\", 31)(49, \"path\", 32);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(50);\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(51, \"li\", 29);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(52, \"svg\", 33);\n      i0.ɵɵelement(53, \"path\", 34)(54, \"path\", 35);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(55);\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(56, \"li\", 29);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(57, \"svg\", 36);\n      i0.ɵɵelement(58, \"path\", 37);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(59);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtemplate(60, AgencijaPrikazComponent_div_60_Template, 6, 0, \"div\", 38);\n      i0.ɵɵtemplate(61, AgencijaPrikazComponent_div_61_Template, 2, 1, \"div\", 38);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngIf\", ctx.greska || ctx.uspeh);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.objekti);\n      i0.ɵɵadvance(5);\n      i0.ɵɵpropertyInterpolate(\"min\", ctx.min_datum);\n      i0.ɵɵproperty(\"ngModel\", ctx.pocetak);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"min\", ctx.min_datum);\n      i0.ɵɵproperty(\"ngModel\", ctx.kraj);\n      i0.ɵɵadvance(9);\n      i0.ɵɵpropertyInterpolate(\"src\", \"http://localhost:4000/prikaz_slike/\" + ctx.agencija.profilna_slika, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.agencija.dodatno[\"naziv\"]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.opis_za_prikaz);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.agencija.dodatno[\"adresa\"]);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.agencija.imejl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.agencija.dodatno[\"maticni_broj\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.komentari.length);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.komentari.length);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZ2VuY2lqYS1wcmlrYXouY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AgencijaPrikazComponent","constructor","route","korisnik","objService","posloviService","Date","toISOString","split","paramMap","subscribe","params","id","get","ngOnInit","sessionStorage","getItem","ulogovan","JSON","parse","dohvati_korisnika","ag","agencija","dohvati_komentare","komentari","console","log","sve_za_korisnika","korisnicko_ime","res","objekti","opis_za_prikaz","dodatno","substring","posalji_zahtev","data","klijent","objekat","pocetak","kraj","status","dodaj_posao","greska","sleep","milliseconds","Promise","resolve","setTimeout","uspeh","brojac","modalZatvaranje","nativeElement","click","i","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-prikaz\\agencija-prikaz.component.html","C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-prikaz\\agencija-prikaz.component.ts"],"sourcesContent":["<div class=\"container\">\n\n    <div class=\"row\">\n<div class=\"col\">\n  \n</div>\n        <div class=\"col float-end\"><h4 class=\"float-end\">\n            Затражи сарадњу<svg  data-bs-toggle=\"modal\" data-bs-target=\"#zahtev\" xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" class=\"bi bi-plus-square-fill text-warning\" viewBox=\"0 0 16 16\">\n                <path d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z\"/>\n              </svg>\n            </h4></div>\n    </div>\n    <div class=\"modal fade\" id=\"zahtev\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content \">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">Захтев за сарадњу</h5>\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" #modalZatvaranje></button>\n              \n            </div>\n            <div class=\"modal-body \">\n              <div class=\"alert alert-{{greska ? 'danger' : 'primary'}} d-flex align-items-center\" role=\"alert\" *ngIf=\"greska || uspeh\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-triangle-fill flex-shrink-0 me-2\" viewBox=\"0 0 16 16\" role=\"img\" aria-label=\"Warning:\">\n                <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\n                </svg>\n                <div>\n                {{greska ? greska : uspeh}} <span>{{brojac}}</span>\n                </div>\n            </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                Избор објекта:\n                <select class=\"form-select\" aria-label=\"Default select example\" *ngFor=\"let o of objekti; let i = index\" [(ngModel)]=\"objekat\">\n                    <option value=\"{{o._id}}\">Објекат {{i+1}} [{{o.adresa}}, {{o.kvadratura}} m<sup>2</sup>]</option>\n                   \n                  </select>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                    <label for=\"startDate\">Почетак радова</label>\n                    <input id=\"startDate\" class=\"form-control\" type=\"date\" min=\"{{min_datum}}\" [(ngModel)]=\"pocetak\"/>\n                </div>\n                <div class=\"col\">\n                    <label for=\"startDate\">Крај радова</label>\n                    <input id=\"startDate\" class=\"form-control\" type=\"date\" min=\"{{min_datum}}\" [(ngModel)]=\"kraj\"/>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Затвори</button>\n              <button type=\"button\" class=\"btn btn-primary\" (click)=\"posalji_zahtev()\">Пошаљи захтев</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    <div class=\"row\">\n        <div class=\"col-sm-3\" id=\"detalji\">\n            <div class=\"card\" style=\"width: 18rem;\">\n                <img src=\"{{'http://localhost:4000/prikaz_slike/'+agencija.profilna_slika}}\" class=\"card-img-top\" alt=\"...\">\n                <div class=\"card-body\">\n                <h5 class=\"card-title\">{{agencija.dodatno['naziv']}}</h5>\n                <p class=\"card-text\">{{opis_za_prikaz}}</p>\n                </div>\n                <ul class=\"list-group list-group-flush\">\n                <li class=\"list-group-item\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"me-2 bi bi-house-fill\" viewBox=\"0 0 16 16\">\n                    <path d=\"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z\"/>\n                    <path d=\"m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z\"/>\n                  </svg>{{agencija.dodatno['adresa']}}</li>\n                <li class=\"list-group-item\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"me-2 bi bi-envelope-at-fill\" viewBox=\"0 0 16 16\">\n                    <path d=\"M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z\"/>\n                    <path d=\"M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z\"/>\n                  </svg>{{agencija.imejl}}</li>\n                <li class=\"list-group-item\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"me-2 bi bi-file-earmark-break-fill\" viewBox=\"0 0 16 16\">\n                    <path d=\"M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V9H2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3zM2 12h12v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-2zM.5 10a.5.5 0 0 0 0 1h15a.5.5 0 0 0 0-1H.5z\"/>\n                  </svg>{{agencija.dodatno['maticni_broj']}}</li>\n                </ul>\n                \n            </div>\n        </div>\n        <div class=\"col-sm-9\" *ngIf=\"!komentari.length\">\n            <div class=\"alert alert-primary d-flex align-items-center\" role=\"alert\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-triangle-fill flex-shrink-0 me-2\" viewBox=\"0 0 16 16\" role=\"img\" aria-label=\"Warning:\">\n                <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\n                </svg>\n                <div>\n                Тренутно не постоји ни један коментар.\n                </div>\n            </div>\n        </div>\n        <div  class=\"col-sm-9\" *ngIf=\"komentari.length\">\n            <div class=\"container bg-white rounded ms-0 pt-2 pb-2 mb-2\" *ngFor=\"let k of komentari\">\n                <div class=\"row mt-2 mb-2\">\n                    <div class=\"col d-flex\">\n                        <div>\n                            <span class=\"ms-2\">Корисник:</span><strong><span class=\"ms-2 me-2\" *ngIf=\"ulogovan\">{{k.klijent}}</span>\n                            <span class=\"ms-2 me-2\" *ngIf=\"!ulogovan\">Анонимно</span></strong>\n                        </div>\n                        <div class=\"ms-auto\">\n                            <span class=\"me-2 ms-2\">\n                                <span *ngFor=\"let stvar of [].constructor(5); let i = index\">\n                                    <span *ngIf=\"i<=(k.ocena-1)\"><svg  xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-star-fill text-warning\" viewBox=\"0 0 16 16\">\n                                        <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"/>\n                                    </svg></span>\n                                    <span *ngIf=\"i>(k.ocena-1)\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-star\" viewBox=\"0 0 16 16\">\n                                        <path d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\"/>\n                                    </svg></span>\n                                </span>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n                <hr>\n                <div class=\"row ms-2 me-2\">\n                    {{k.komentar}}\n                </div>\n            </div>\n        </div>\n</div>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, ParamMap } from '@angular/router';\nimport { KorisnikService } from '../korisnik.service';\nimport { Komentar } from '../models/komentari';\nimport { Korisnik } from '../models/korisnik';\nimport { Objekat } from '../models/objekat';\nimport { ObjekatService } from '../objekat.service';\nimport { PosloviService } from '../poslovi.service';\nimport { iif } from 'rxjs';\n\n@Component({\n  selector: 'app-agencija-prikaz',\n  templateUrl: './agencija-prikaz.component.html',\n  styleUrls: ['./agencija-prikaz.component.css']\n})\nexport class AgencijaPrikazComponent implements OnInit {\n\n  id:string\n  komentari:Komentar[]\n  agencija:Korisnik\n  ulogovan:Korisnik = null\n  objekti:Objekat[]\n  opis_za_prikaz:string\n  min_datum = new Date().toISOString().split(\"T\")[0];\n  pocetak:Date\n  brojac:number\n  kraj:Date\n  objekat:string\n  constructor(private route: ActivatedRoute, private korisnik:KorisnikService, private objService:ObjekatService, private posloviService:PosloviService) { \n    this.route.paramMap.subscribe((params: ParamMap) => {\n      this.id = params.get('id')\n    })\n  }\n\n  ngOnInit(): void {\n    if(sessionStorage.getItem('klijent') || sessionStorage.getItem('agencija') ){\n      this.ulogovan = JSON.parse(sessionStorage.getItem('klijent')) || JSON.parse(sessionStorage.getItem('agencija'))\n    }\n    this.korisnik.dohvati_korisnika(this.id).subscribe((ag:Korisnik)=>{\n      this.agencija = ag\n    })\n    this.korisnik.dohvati_komentare(this.id).subscribe((komentari:Komentar[])=>{\n      if(komentari){\n        this.komentari = komentari\n        console.log(komentari)\n      }\n    })\n    this.objService.sve_za_korisnika(this.ulogovan.korisnicko_ime).subscribe((res:Objekat[])=>{\n      if(res){\n        this.objekti = res;\n      }\n    })\n    this.opis_za_prikaz = this.agencija.dodatno['opis'].substring(0,200);\n  }\n  uspeh :string\n  greska:string\n  @ViewChild('modalZatvaranje') modalZatvaranje;\n  async posalji_zahtev(){\n    const data={\n      agencija: this.agencija.korisnicko_ime,\n      klijent: this.ulogovan.korisnicko_ime,\n      objekat: this.objekat,\n      pocetak: this.pocetak,\n      kraj: this.kraj,\n      status: \"Послат захтев\"\n    }\n    this.posloviService.dodaj_posao(data).subscribe(async (res)=>{\n      if(!this.kraj || !this.objekat || !this.pocetak || this.pocetak>this.kraj){\n        this.greska=\"Погрешно унети подаци!\"\n        return;\n      }else{\n        this.greska = null\n      }\n      const sleep = async (milliseconds) => {\n        await new Promise(resolve => {\n            return setTimeout(resolve, milliseconds)\n        });}\n      if(res['message']=='ok'){\n        this.uspeh = \"Успешно послат захтев за сарадњу! Прозор ће се затворити за: \"\n        this.brojac = 5\n        setTimeout(()=>{\n          this.uspeh = null\n          this.modalZatvaranje.nativeElement.click();\n        },5000)\n        for (let i = 5; i >0; i--) {\n          await sleep(1000);\n          this.brojac--;\n          \n      }\n        \n      }\n    })\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}