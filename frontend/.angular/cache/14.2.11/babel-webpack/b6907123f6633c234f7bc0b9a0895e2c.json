{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ElementRef } from '@angular/core';\nimport { Prostorija } from '../models/prostorija';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = [\"skica_objekta\"];\n\nfunction KreiranjeObjektaComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 1);\n  }\n}\n\nfunction KreiranjeObjektaComponent_div_1_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.greska, \" \");\n  }\n}\n\nfunction KreiranjeObjektaComponent_div_1_div_6_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 15);\n    i0.ɵɵtext(1, \"\\u0423\\u043A\\u043B\\u043E\\u043D\\u0438\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction KreiranjeObjektaComponent_div_1_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\")(2, \"h6\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 9)(5, \"div\", 10)(6, \"label\", 11);\n    i0.ɵɵtext(7, \"\\u0428\\u0438\\u0440\\u0438\\u043D\\u0430: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function KreiranjeObjektaComponent_div_1_div_6_Template_input_ngModelChange_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const n_r5 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.prostorije[n_r5].visina = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 10)(10, \"label\", 11);\n    i0.ɵɵtext(11, \"\\u0412\\u0438\\u0441\\u0438\\u043D\\u0430: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function KreiranjeObjektaComponent_div_1_div_6_Template_input_ngModelChange_12_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const n_r5 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.prostorije[n_r5].sirina = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 10)(14, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function KreiranjeObjektaComponent_div_1_div_6_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const n_r5 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.postavi(n_r5));\n    });\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, KreiranjeObjektaComponent_div_1_div_6_button_16_Template, 2, 0, \"button\", 14);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const n_r5 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\u041F\\u0440\\u043E\\u0441\\u0442\\u043E\\u0440\\u0438\\u0458\\u0430 \", n_r5, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"for\", \"s_prostorija\", n_r5, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"s_prostorija\", n_r5, \"\");\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.prostorije[n_r5].visina);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"for\", \"v_prostorija\", n_r5, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"v_prostorija\", n_r5, \"\");\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.prostorije[n_r5].sirina);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r3.prostorije[n_r5].postavljeno ? \"\\u0410\\u0436\\u0443\\u0440\\u0438\\u0440\\u0430\\u0458\" : \"\\u041F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.prostorije[n_r5].postavljeno);\n  }\n}\n\nfunction KreiranjeObjektaComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"h5\");\n    i0.ɵɵtext(4, \"\\u041F\\u0440\\u0435\\u0433\\u043B\\u0435\\u0434 \\u043F\\u0440\\u043E\\u0441\\u0442\\u043E\\u0440\\u0438\\u0458\\u0430:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, KreiranjeObjektaComponent_div_1_div_5_Template, 2, 1, \"div\", 4);\n    i0.ɵɵtemplate(6, KreiranjeObjektaComponent_div_1_div_6_Template, 17, 9, \"div\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 3)(8, \"canvas\", 6, 7);\n    i0.ɵɵlistener(\"click\", function KreiranjeObjektaComponent_div_1_Template_canvas_click_8_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.akcija($event));\n    })(\"mousemove\", function KreiranjeObjektaComponent_div_1_Template_canvas_mousemove_8_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.pomeri($event));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.greska);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.br_prostorija_niz);\n  }\n}\n\nexport class KreiranjeObjektaComponent {\n  constructor() {\n    this.broj_prostorija = 3;\n    this.prostorije = [];\n    this.aktivno_crtanje = true;\n    this.br_prostorija_niz = Array.from(Array(this.broj_prostorija).keys());\n  }\n\n  onResize(event) {\n    this.canvas_sirina = this.canvas.nativeElement['width'];\n    this.canvas_visina = this.canvas.nativeElement['height'];\n    this.canvas_offset_levo = this.canvas.nativeElement.offsetLeft;\n    this.canvas_offset_gore = this.canvas.nativeElement.offsetTop;\n  }\n\n  ngOnInit() {\n    this.postaviProstorije();\n  }\n\n  ngAfterViewInit() {\n    this.kontekst = this.canvas.nativeElement.getContext('2d');\n    this.canvas_sirina = this.canvas.nativeElement['width'];\n    this.canvas_visina = this.canvas.nativeElement['height'];\n    this.canvas_offset_levo = this.canvas.nativeElement.offsetLeft;\n    this.canvas_offset_gore = this.canvas.nativeElement.offsetTop;\n  }\n\n  postavi(prostorija) {\n    if (this.prostorije[prostorija].visina == 0 || this.prostorije[prostorija].sirina == 0) {\n      this.greska = \"Не може се додати просторија са ширином или висином која је 0\";\n      return;\n    } else if (this.prostorije[prostorija].visina > this.canvas_visina || this.prostorije[prostorija].sirina > this.canvas_sirina) {\n      this.greska = \"Не може се додати просторија са ширином или висином која је веча од канваса\";\n      return;\n    } else {\n      this.greska = null;\n    }\n\n    let p = this.prostorije[prostorija];\n\n    if (p.postavljeno) {\n      //imali smo nesto pre\n      this.kontekst.clearRect(p.pozicija_x, p.pozicija_y, p.sirina, p.visina);\n    }\n\n    p.postavljeno = true;\n    this.kontekst.strokeStyle = \"black\";\n\n    if (p.pozicija_x || p.pozicija_y) {} else {\n      p.pozicija_x = p.pozicija_y = 0;\n    }\n\n    this.kontekst.strokeRect(p.pozicija_x, p.pozicija_y, p.sirina, p.visina);\n  }\n\n  proveri_da_li_obuhavata(event) {\n    let x = event.clientX;\n    let y = event.clientY;\n    let pros = null;\n\n    for (let p of this.prostorije) {\n      let i = 0;\n\n      if (p.postavljeno) {\n        let pozicija_y = this.canvas_offset_gore + p.pozicija_y;\n        let pozicija_x = this.canvas_offset_levo + p.pozicija_x;\n        let sirina = this.canvas_offset_levo + p.sirina;\n        let visina = this.canvas_offset_gore + p.visina;\n\n        if (x > pozicija_x && x < sirina && y > pozicija_y && y < visina) {\n          pros = i;\n        }\n      }\n\n      i++;\n    }\n\n    return pros;\n  }\n\n  akcija(event) {\n    let p = this.proveri_da_li_obuhavata(event);\n\n    if (p != null) {\n      this.selektovan = p;\n    } else {\n      this.selektovan = null;\n    }\n  }\n\n  pomeri(event) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.log(\"pomeri\");\n\n      _this.akcija(event);\n\n      if (_this.selektovan == null) return;else {\n        console.log(\"usao\");\n        let p = _this.prostorije[_this.selektovan];\n\n        _this.kontekst.clearRect(p.pozicija_x, p.pozicija_y, p.sirina, p.visina);\n\n        p.pozicija_x = event.clientX;\n        p.pozicija_y = event.clientY;\n        _this.kontekst.strokeStyle = \"black\";\n\n        _this.kontekst.strokeRect(p.pozicija_x, p.pozicija_y, p.sirina, p.visina);\n      }\n    })();\n  }\n\n  postaviProstorije() {\n    for (let i = 0; i < this.broj_prostorija; i++) {\n      let p = new Prostorija();\n      p.visina = 0;\n      p.sirina = 0;\n      p.postavljeno = false;\n      this.prostorije.push(p);\n    }\n  }\n\n}\n\nKreiranjeObjektaComponent.ɵfac = function KreiranjeObjektaComponent_Factory(t) {\n  return new (t || KreiranjeObjektaComponent)();\n};\n\nKreiranjeObjektaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: KreiranjeObjektaComponent,\n  selectors: [[\"app-kreiranje-objekta\"]],\n  viewQuery: function KreiranjeObjektaComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n    }\n  },\n  hostBindings: function KreiranjeObjektaComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"resize\", function KreiranjeObjektaComponent_resize_HostBindingHandler($event) {\n        return ctx.onResize($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  decls: 2,\n  vars: 2,\n  consts: [[\"class\", \"container\", 4, \"ngIf\"], [1, \"container\"], [1, \"row\"], [1, \"col-sm\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\", \"w-100\", 2, \"background\", \"yellow\", 3, \"click\", \"mousemove\"], [\"skica_objekta\", \"\"], [1, \"alert\", \"alert-danger\"], [1, \"row\", \"align-items-center\"], [1, \"col\"], [3, \"for\"], [\"type\", \"number\", 1, \"form-control\", \"w-auto\", 3, \"id\", \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"badge\", \"bg-info\", 3, \"click\"], [\"class\", \"btn badge bg-info\", 4, \"ngIf\"], [1, \"btn\", \"badge\", \"bg-info\"]],\n  template: function KreiranjeObjektaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, KreiranjeObjektaComponent_div_0_Template, 1, 0, \"div\", 0);\n      i0.ɵɵtemplate(1, KreiranjeObjektaComponent_div_1_Template, 10, 2, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.aktivno_crtanje);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.aktivno_crtanje);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJrcmVpcmFuamUtb2JqZWt0YS5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["ElementRef","Prostorija","i0","KreiranjeObjektaComponent","constructor","br_prostorija_niz","Array","from","broj_prostorija","keys","onResize","event","canvas_sirina","canvas","nativeElement","canvas_visina","canvas_offset_levo","offsetLeft","canvas_offset_gore","offsetTop","ngOnInit","postaviProstorije","ngAfterViewInit","kontekst","getContext","postavi","prostorija","prostorije","visina","sirina","greska","p","postavljeno","clearRect","pozicija_x","pozicija_y","strokeStyle","strokeRect","proveri_da_li_obuhavata","x","clientX","y","clientY","pros","i","akcija","selektovan","pomeri","console","log","push","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\kreiranje-objekta\\kreiranje-objekta.component.ts","C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\kreiranje-objekta\\kreiranje-objekta.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, HostListener} from '@angular/core';\nimport { Prostorija } from '../models/prostorija';\n\n@Component({\n  selector: 'app-kreiranje-objekta',\n  templateUrl: './kreiranje-objekta.component.html',\n  styleUrls: ['./kreiranje-objekta.component.css']\n})\nexport class KreiranjeObjektaComponent implements OnInit {\n  \n  @ViewChild('skica_objekta') canvas: ElementRef;\n  kontekst: CanvasRenderingContext2D;\n  broj_prostorija : number = 3\n  prostorije: Array<Prostorija> = [\n  ];\n  br_prostorija_niz: any;\n  canvas_sirina;\n  canvas_visina;\n  canvas_offset_levo;\n  canvas_offset_gore;\n  greska:string;\n  constructor() {\n    this.br_prostorija_niz = Array.from(Array(this.broj_prostorija).keys())\n  }\n  selektovan:number;\n  @HostListener('window:resize', ['$event'])\nonResize(event) {\n  this.canvas_sirina = this.canvas.nativeElement['width'];\n    this.canvas_visina = this.canvas.nativeElement['height'];\n    this.canvas_offset_levo = this.canvas.nativeElement.offsetLeft;\n    this.canvas_offset_gore = this.canvas.nativeElement.offsetTop;\n}\n \n  aktivno_crtanje:boolean =true;\n  ngOnInit(): void {\n    this.postaviProstorije()\n  }\n  ngAfterViewInit() {\n    this.kontekst = this.canvas.nativeElement.getContext('2d');\n    this.canvas_sirina = this.canvas.nativeElement['width'];\n    this.canvas_visina = this.canvas.nativeElement['height'];\n    this.canvas_offset_levo = this.canvas.nativeElement.offsetLeft;\n    this.canvas_offset_gore = this.canvas.nativeElement.offsetTop;\n\n  }\n  postavi(prostorija:number){\n    if(this.prostorije[prostorija].visina ==0 || this.prostorije[prostorija].sirina ==0) {\n      this.greska=\"Не може се додати просторија са ширином или висином која је 0\";\n      return;\n    }else if(this.prostorije[prostorija].visina>this.canvas_visina || this.prostorije[prostorija].sirina>this.canvas_sirina){\n      this.greska=\"Не може се додати просторија са ширином или висином која је веча од канваса\";\n      return;\n    }else{\n      this.greska=null;\n    }\n    let p:Prostorija = this.prostorije[prostorija];\n    if(p.postavljeno){\n      //imali smo nesto pre\n      this.kontekst.clearRect(p.pozicija_x, p.pozicija_y, p.sirina, p.visina);\n    }\n    p.postavljeno = true;\n    this.kontekst.strokeStyle = \"black\"\n    if(p.pozicija_x || p.pozicija_y) {\n    }\n    else {\n      p.pozicija_x = p.pozicija_y = 0;\n    }\n    this.kontekst.strokeRect(p.pozicija_x, p.pozicija_y, p.sirina, p.visina)\n    \n    \n  }\n  proveri_da_li_obuhavata(event){\n    let x = event.clientX;\n    let y = event.clientY;\n    let pros:number = null;\n    for(let p of this.prostorije){\n      let i=0;\n      if(p.postavljeno){\n        let pozicija_y = this.canvas_offset_gore+p.pozicija_y;\n        let pozicija_x = this.canvas_offset_levo+p.pozicija_x;\n       \n        let sirina = this.canvas_offset_levo+p.sirina\n        let visina = this.canvas_offset_gore+p.visina;\n        \n        if(x>pozicija_x && x<sirina && y>pozicija_y && y<visina){\n          pros = i\n        }\n      }\n      i++;\n    }\n    return pros;\n  }\n  akcija(event){\n    let p = this.proveri_da_li_obuhavata(event)\n    if(p!=null){\n      this.selektovan = p;\n    }else{\n      this.selektovan=null;\n    }\n\n  }\n  async pomeri(event){\n    console.log(\"pomeri\");\n    this.akcija(event);\n    if(this.selektovan==null) return;\n    else{\n      console.log(\"usao\");\n      let p = this.prostorije[this.selektovan]\n      this.kontekst.clearRect(p.pozicija_x, p.pozicija_y, p.sirina, p.visina)\n      p.pozicija_x = event.clientX;\n      p.pozicija_y = event.clientY;\n      this.kontekst.strokeStyle = \"black\"\n      this.kontekst.strokeRect(p.pozicija_x, p.pozicija_y, p.sirina, p.visina)\n    }\n  }\n  postaviProstorije(){\n    for(let i=0; i<this.broj_prostorija;i++){\n      let p= new Prostorija();\n      p.visina=0;\n      p.sirina=0;\n      p.postavljeno=false;\n      this.prostorije.push(p)\n    }\n  }\n  \n\n}\n","<div class=\"container\" *ngIf=\"!aktivno_crtanje\">\n\n</div>\n<div class=\"container\" *ngIf=\"aktivno_crtanje\">\n    <div class=\"row\">\n        <div class=\"col-sm\">\n            <h5>Преглед просторија:</h5>\n            <div class=\"alert alert-danger\" *ngIf=\"greska\">\n                {{greska}}\n            </div>\n            <div *ngFor=\"let n of br_prostorija_niz\">\n                <div>\n                    <h6>Просторија {{n}} </h6> \n                    <div class=\"row align-items-center\">\n                        <div class=\"col\">\n                            <label for=\"s_prostorija{{n}}\">Ширина: </label>\n                            <input class=\"form-control w-auto\" id=\"s_prostorija{{n}}\" type=\"number\" [(ngModel)]=\"prostorije[n].visina\">\n                        </div>\n                        <div class=\"col\">\n                            <label for=\"v_prostorija{{n}}\">Висина: </label>\n                            <input class=\"form-control w-auto\" id=\"v_prostorija{{n}}\" type=\"number\" [(ngModel)]=\"prostorije[n].sirina\">\n                        </div>\n                        <div class=\"col\">\n                            <button class=\"btn badge bg-info\" (click)=\"postavi(n)\">{{prostorije[n].postavljeno ? 'Ажурирај' : 'Постави'}}</button>\n                            <button class=\"btn badge bg-info\" *ngIf=\"prostorije[n].postavljeno\">Уклони</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-sm\">\n            <canvas #skica_objekta class=\"d-flex w-100\" style=\" background: yellow\" (click)=\"akcija($event)\" (mousemove)=\"pomeri($event)\"></canvas>\n        </div>\n    </div>\n</div>\n<script>\n\n</script>\n"]},"metadata":{},"sourceType":"module"}