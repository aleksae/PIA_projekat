{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../radnici.service\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = [\"dodaj_radnika\"];\nexport class AgencijaRadniciComponent {\n  constructor(servis) {\n    this.servis = servis;\n    this.radnici = [];\n    this.slobodni = 0;\n    this.br_radnika = 0;\n    this.br_radnih_mesta_odobreno = 0;\n    this.br_radnih_mesta_na_cekanju = 0;\n\n    this.sleep = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (milliseconds) {\n        yield new Promise(resolve => {\n          return setTimeout(resolve, milliseconds);\n        });\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  ngOnInit() {\n    this.ulogovan = JSON.parse(localStorage.getItem(\"agencija\"));\n    this.servis.dohvati_sve_za_agenciju(this.ulogovan.korisnicko_ime).subscribe(res => {\n      if (res.length) {\n        this.radnici = res;\n        this.br_radnika = this.radnici.length;\n\n        for (let r of this.radnici) {\n          if (!r.aganzovan) this.slobodni++;\n        }\n      }\n    });\n    this.servis.dohvati_zahteve_za_radna_mesta_za_agenciju(this.ulogovan.korisnicko_ime).subscribe(res => {\n      if (res.length) {\n        for (let r of res) {\n          if (r.status == 'odobreno') this.br_radnih_mesta_odobreno += r.broj_mesta;else if (r.status == 'poslato') this.br_radnih_mesta_na_cekanju += r.broj_mesta;\n        }\n      }\n    });\n  }\n\n  posalji_zahtev_za_radna() {\n    if (!this.br_mesta_uneto || this.br_mesta_uneto == 0) return;\n    this.servis.dodaj_zahtev_za_radna_mesta(this.ulogovan.korisnicko_ime, this.br_mesta_uneto).subscribe(res => {\n      if (res) {\n        this.br_radnih_mesta_na_cekanju += this.br_mesta_uneto;\n        this.br_mesta_uneto = null;\n        this.uspeh = \"Uspesno dodat zahtev\";\n      }\n    });\n  }\n\n}\n\nAgencijaRadniciComponent.ɵfac = function AgencijaRadniciComponent_Factory(t) {\n  return new (t || AgencijaRadniciComponent)(i0.ɵɵdirectiveInject(i1.RadniciService));\n};\n\nAgencijaRadniciComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AgencijaRadniciComponent,\n  selectors: [[\"app-agencija-radnici\"]],\n  viewQuery: function AgencijaRadniciComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modal_dodaj_radnika = _t.first);\n    }\n  },\n  decls: 40,\n  vars: 5,\n  consts: [[1, \"container\"], [1, \"d-flex\", \"flex-row-reverse\", \"bd-highlight\"], [1, \"\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#dodaj_radnika\", 1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"disabled\"], [1, \"me-2\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#zahtev_radna_mesta\", 1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"disabled\"], [1, \"row\"], [\"id\", \"dodaj_radnika\", \"tabindex\", \"-1\", \"aria-labelledby\", \"dodaj_radnika\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"dodaj_radnika\", \"\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\"], [\"id\", \"zahtev_radna_mesta\", \"tabindex\", \"-1\", \"aria-labelledby\", \"zahtev_radna_mesta\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"type\", \"number\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function AgencijaRadniciComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"button\", 3);\n      i0.ɵɵtext(4, \"\\u0414\\u043E\\u0434\\u0430\\u0458 \\u0440\\u0430\\u0434\\u043D\\u0438\\u043A\\u0430\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"button\", 5);\n      i0.ɵɵtext(7, \"\\u0417\\u0430\\u0445\\u0442\\u0435\\u0432 \\u0437\\u0430 \\u0440\\u0430\\u0434\\u043D\\u0430 \\u043C\\u0435\\u0441\\u0442\\u0430\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"div\", 6);\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 7, 8)(12, \"div\", 9)(13, \"div\", 10)(14, \"div\", 11)(15, \"h5\", 12);\n      i0.ɵɵtext(16, \"Modal title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"button\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 14);\n      i0.ɵɵtext(19, \" ... \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 15)(21, \"button\", 16);\n      i0.ɵɵtext(22, \"Close\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"button\", 17);\n      i0.ɵɵtext(24, \"Save changes\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(25, \"div\", 18)(26, \"div\", 9)(27, \"div\", 10)(28, \"div\", 11)(29, \"h5\", 12);\n      i0.ɵɵtext(30, \"\\u041F\\u043E\\u0448\\u0430\\u0459\\u0438 \\u0437\\u0430\\u0445\\u0442\\u0435\\u0432 \\u0437\\u0430 \\u0440\\u0430\\u0434\\u043D\\u0430 \\u043C\\u0435\\u0441\\u0442\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(31, \"button\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"div\", 14);\n      i0.ɵɵtext(33, \" \\u0411\\u0440\\u043E\\u0458 \\u0437\\u0430\\u0445\\u0442\\u0435\\u0432\\u0430\\u043D\\u0438\\u0445 \\u0440\\u0430\\u0434\\u043D\\u0438\\u0445 \\u043C\\u0435\\u0441\\u0442\\u0430: \");\n      i0.ɵɵelementStart(34, \"input\", 19);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaRadniciComponent_Template_input_ngModelChange_34_listener($event) {\n        return ctx.br_mesta_uneto = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(35, \"div\", 15)(36, \"button\", 16);\n      i0.ɵɵtext(37, \"\\u041E\\u0434\\u0443\\u0441\\u0442\\u0430\\u043D\\u0438\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"button\", 20);\n      i0.ɵɵlistener(\"click\", function AgencijaRadniciComponent_Template_button_click_38_listener() {\n        return ctx.posalji_zahtev_za_radna();\n      });\n      i0.ɵɵtext(39, \"\\u041F\\u043E\\u0448\\u0430\\u0459\\u0438\");\n      i0.ɵɵelementEnd()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !(ctx.br_radnih_mesta_odobreno > ctx.br_radnika));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", ctx.slobodni);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate2(\" \\u0411\\u0440\\u043E\\u0458 \\u0441\\u043B\\u043E\\u0431\\u043E\\u0434\\u043D\\u0438\\u0445 \\u0440\\u0430\\u0434\\u043D\\u0438\\u043A\\u0430: \", ctx.slobodni, \", \\u0411\\u0440\\u043E\\u0458 \\u043C\\u0435\\u0441\\u0442\\u0430 \\u043D\\u0430 \\u0447\\u0435\\u043A\\u0430\\u045A\\u0443: \", ctx.br_radnih_mesta_na_cekanju, \" \");\n      i0.ɵɵadvance(25);\n      i0.ɵɵproperty(\"ngModel\", ctx.br_mesta_uneto);\n    }\n  },\n  dependencies: [i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZ2VuY2lqYS1yYWRuaWNpLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;AAWA,OAAM,MAAOA,wBAAP,CAA+B;EAEnCC,YAAoBC,MAApB,EAAyC;IAArB;IAGpB,eAAmB,EAAnB;IACA,gBAAgB,CAAhB;IACA,kBAAoB,CAApB;IACA,gCAAgC,CAAhC;IACA,kCAAkC,CAAlC;;IAyBM;MAAA,6BAAQ,WAAOC,YAAP,EAAuB;QACnC,MAAM,IAAIC,OAAJ,CAAYC,OAAO,IAAG;UACxB,OAAOC,UAAU,CAACD,OAAD,EAAUF,YAAV,CAAjB;QACH,CAFK,CAAN;MAEI,CAHA;;MAAA;QAAA;MAAA;IAAA;EAhCwC;;EAQ9CI,QAAQ;IACN,KAAKC,QAAL,GAAgBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAhB;IACA,KAAKV,MAAL,CAAYW,uBAAZ,CAAoC,KAAKL,QAAL,CAAcM,cAAlD,EAAkEC,SAAlE,CAA6EC,GAAD,IAAgB;MAC1F,IAAGA,GAAG,CAACC,MAAP,EAAc;QACZ,KAAKC,OAAL,GAAeF,GAAf;QACA,KAAKG,UAAL,GAAkB,KAAKD,OAAL,CAAaD,MAA/B;;QACA,KAAI,IAAIG,CAAR,IAAa,KAAKF,OAAlB,EAA0B;UACxB,IAAG,CAACE,CAAC,CAACC,SAAN,EAAiB,KAAKC,QAAL;QAClB;MACF;IACF,CARD;IASA,KAAKpB,MAAL,CAAYqB,0CAAZ,CAAuD,KAAKf,QAAL,CAAcM,cAArE,EAAqFC,SAArF,CAAgGC,GAAD,IAA0B;MACvH,IAAGA,GAAG,CAACC,MAAP,EAAc;QACZ,KAAI,IAAIG,CAAR,IAAaJ,GAAb,EAAiB;UACf,IAAGI,CAAC,CAACI,MAAF,IAAU,UAAb,EAAyB,KAAKC,wBAAL,IAA+BL,CAAC,CAACM,UAAjC,CAAzB,KACK,IAAGN,CAAC,CAACI,MAAF,IAAU,SAAb,EAAwB,KAAKG,0BAAL,IAAiCP,CAAC,CAACM,UAAnC;QAC9B;MACF;IAEF,CARD;EASD;;EAQDE,uBAAuB;IACrB,IAAG,CAAC,KAAKC,cAAN,IAAwB,KAAKA,cAAL,IAAqB,CAAhD,EAAmD;IACnD,KAAK3B,MAAL,CAAY4B,2BAAZ,CAAwC,KAAKtB,QAAL,CAAcM,cAAtD,EAAsE,KAAKe,cAA3E,EAA2Fd,SAA3F,CAAsGC,GAAD,IAAO;MAC1G,IAAGA,GAAH,EAAO;QACL,KAAKW,0BAAL,IAAmC,KAAKE,cAAxC;QACA,KAAKA,cAAL,GAAsB,IAAtB;QACA,KAAKE,KAAL,GAAa,sBAAb;MACD;IACF,CAND;EAQD;;AAhDkC;;;mBAAxB/B,0BAAwBgC;AAAA;;;QAAxBhC;EAAwBiC;EAAAC;IAAA;;;;;;;;;;;;;;;MCXrCF,+BAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,QAAvB,EAAuB,CAAvB;MAGyKA;MAAaA;MAC9KA,+BAAkB,CAAlB,EAAkB,QAAlB,EAAkB,CAAlB;MAA+IA;MAAqBA;MAExKA;MACIA;MACJA;MAEJA,mCAA2H,EAA3H,EAA2H,KAA3H,EAA2H,CAA3H,EAA2H,EAA3H,EAA2H,KAA3H,EAA2H,EAA3H,EAA2H,EAA3H,EAA2H,KAA3H,EAA2H,EAA3H,EAA2H,EAA3H,EAA2H,IAA3H,EAA2H,EAA3H;MAIyDA;MAAWA;MAC1DA;MACFA;MACAA;MACEA;MACFA;MACAA,iCAA0B,EAA1B,EAA0B,QAA1B,EAA0B,EAA1B;MAC0EA;MAAKA;MAC7EA;MAA8CA;MAAYA;MAKlEA,iCAAsH,EAAtH,EAAsH,KAAtH,EAAsH,CAAtH,EAAsH,EAAtH,EAAsH,KAAtH,EAAsH,EAAtH,EAAsH,EAAtH,EAAsH,KAAtH,EAAsH,EAAtH,EAAsH,EAAtH,EAAsH,IAAtH,EAAsH,EAAtH;MAIuDA;MAA4BA;MAC3EA;MACFA;MACAA;MACIA;MACAA;MAA0CA;QAAA;MAAA;MAA1CA;MAEJA,iCAA0B,EAA1B,EAA0B,QAA1B,EAA0B,EAA1B;MAC0EA;MAAQA;MAChFA;MAA8CA;QAAA,OAASG,6BAAT;MAAkC,CAAlC;MAAoCH;MAAMA;;;;MArCmBA;MAAAA;MACUA;MAAAA;MAGvHA;MAAAA;MA6B8CA;MAAAA","names":["AgencijaRadniciComponent","constructor","servis","milliseconds","Promise","resolve","setTimeout","ngOnInit","ulogovan","JSON","parse","localStorage","getItem","dohvati_sve_za_agenciju","korisnicko_ime","subscribe","res","length","radnici","br_radnika","r","aganzovan","slobodni","dohvati_zahteve_za_radna_mesta_za_agenciju","status","br_radnih_mesta_odobreno","broj_mesta","br_radnih_mesta_na_cekanju","posalji_zahtev_za_radna","br_mesta_uneto","dodaj_zahtev_za_radna_mesta","uspeh","i0","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-radnici\\agencija-radnici.component.ts","C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-radnici\\agencija-radnici.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Korisnik } from '../models/korisnik';\nimport { RadniciService } from '../radnici.service';\nimport { Radnik } from '../models/radnik';\nimport { ZahtevRadnaMesta } from '../models/zahtev_radna_mesta';\n\n@Component({\n  selector: 'app-agencija-radnici',\n  templateUrl: './agencija-radnici.component.html',\n  styleUrls: ['./agencija-radnici.component.css']\n})\nexport class AgencijaRadniciComponent implements OnInit {\n\n  constructor(private servis:RadniciService) { }\n\n  ulogovan:Korisnik\n  radnici:Radnik[] = []\n  slobodni:number=0\n  br_radnika:number = 0;\n  br_radnih_mesta_odobreno:number=0;\n  br_radnih_mesta_na_cekanju:number=0;\n  ngOnInit(): void {\n    this.ulogovan = JSON.parse(localStorage.getItem(\"agencija\"))\n    this.servis.dohvati_sve_za_agenciju(this.ulogovan.korisnicko_ime).subscribe((res:Radnik[])=>{\n      if(res.length){\n        this.radnici = res\n        this.br_radnika = this.radnici.length\n        for(let r of this.radnici){\n          if(!r.aganzovan) this.slobodni++\n        }\n      }\n    })\n    this.servis.dohvati_zahteve_za_radna_mesta_za_agenciju(this.ulogovan.korisnicko_ime).subscribe((res:ZahtevRadnaMesta[])=>{\n      if(res.length){\n        for(let r of res){\n          if(r.status=='odobreno') this.br_radnih_mesta_odobreno+=r.broj_mesta\n          else if(r.status=='poslato') this.br_radnih_mesta_na_cekanju+=r.broj_mesta\n        }\n      }\n      \n    })\n  }\n  br_mesta_uneto:number;\n  uspeh:string \n  @ViewChild('dodaj_radnika') modal_dodaj_radnika;\n  const sleep = async (milliseconds) => {\n    await new Promise(resolve => {\n        return setTimeout(resolve, milliseconds)\n    });}\n  posalji_zahtev_za_radna(){\n    if(!this.br_mesta_uneto || this.br_mesta_uneto==0) return;\n    this.servis.dodaj_zahtev_za_radna_mesta(this.ulogovan.korisnicko_ime, this.br_mesta_uneto).subscribe((res)=>{\n      if(res){\n        this.br_radnih_mesta_na_cekanju += this.br_mesta_uneto\n        this.br_mesta_uneto = null\n        this.uspeh = \"Uspesno dodat zahtev\"\n      }\n    }\n    )\n  }\n\n\n}\n","<div class=\"container\">\n    <div class=\"d-flex flex-row-reverse bd-highlight\">\n\n        <div class=\"\"><button class=\"btn btn-sm  btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#dodaj_radnika\" [disabled]=\"!(br_radnih_mesta_odobreno>br_radnika)\">Додај радника</button></div>\n        <div class=\"me-2\"><button class=\"btn btn-sm btn-secondary\" data-bs-toggle=\"modal\" data-bs-target=\"#zahtev_radna_mesta\" [disabled]=\"(slobodni)\">Захтев за радна места</button></div>\n    </div>  \n    <div class=\"row\">\n        Број слободних радника: {{slobodni}}, Број места на чекању: {{br_radnih_mesta_na_cekanju}}\n    </div>\n</div>\n<div class=\"modal fade\" id=\"dodaj_radnika\" tabindex=\"-1\" aria-labelledby=\"dodaj_radnika\" aria-hidden=\"true\" #dodaj_radnika>\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">Modal title</h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          ...\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"modal fade\" id=\"zahtev_radna_mesta\" tabindex=\"-1\" aria-labelledby=\"zahtev_radna_mesta\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">Пошаљи захтев за радна места</h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n            Број захтеваних радних места:\n            <input type=\"number\" class=\"form-control\" [(ngModel)]=\"br_mesta_uneto\">\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Одустани</button>\n          <button type=\"button\" class=\"btn btn-primary\" (click)=\"posalji_zahtev_za_radna()\">Пошаљи</button>\n        </div>\n      </div>\n    </div>\n  </div>\n"]},"metadata":{},"sourceType":"module"}