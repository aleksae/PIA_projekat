{"version":3,"file":"instruments.js","names":["Instruments","constructor","config","create","body","setInstrumentType","response","post","fetch","host","sk","json","err","error","determineError","get","id","update","patch","delete","_delete","getBankAccountFieldFormatting","country","currency"],"sources":["../../../src/api/instruments/instruments.js"],"sourcesContent":["import fetch from 'node-fetch';\r\nimport { determineError } from '../../services/errors';\r\nimport { _delete, get, patch, post } from '../../services/http';\r\nimport { setInstrumentType } from '../../services/validation';\r\n\r\n/**\r\n * Class dealing with the /instruments endpoint\r\n *\r\n * @export\r\n * @class Instruments\r\n */\r\nexport default class Instruments {\r\n    constructor(config) {\r\n        this.config = config;\r\n    }\r\n\r\n    /**\r\n     * Exchange a single use Checkout.com token for a payment instrument reference,\r\n     * that can be used at any time to request one or more payments.\r\n     *\r\n     * @memberof Instruments\r\n     * @param {Object} body Instruments request body.\r\n     * @return {Promise<Object>} A promise to the request instruments response.\r\n     */\r\n    async create(body) {\r\n        setInstrumentType(body);\r\n        try {\r\n            const response = await post(\r\n                fetch,\r\n                `${this.config.host}/instruments`,\r\n                this.config,\r\n                this.config.sk,\r\n                body\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns details of an instrument\r\n     *\r\n     * @memberof Instruments\r\n     * @param {string} id Instrument id.\r\n     * @return {Promise<Object>} A promise to the instrument response.\r\n     */\r\n    async get(id) {\r\n        try {\r\n            const response = await get(\r\n                fetch,\r\n                `${this.config.host}/instruments/${id}`,\r\n                this.config,\r\n                this.config.sk\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update details of an instrument\r\n     *\r\n     * @memberof Instruments\r\n     * @param {string} id Instrument id.\r\n     * @param {Object} body Instruments request body.\r\n     * @return {Promise<Object>} A promise to the instrument response.\r\n     */\r\n    async update(id, body) {\r\n        try {\r\n            const response = await patch(\r\n                fetch,\r\n                `${this.config.host}/instruments/${id}`,\r\n                this.config,\r\n                this.config.sk,\r\n                body\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Delete a payment instrument.\r\n     *\r\n     * @memberof Instruments\r\n     * @param {string} id Instrument id.\r\n     * @return {Promise<Object>} A promise to the instrument response.\r\n     */\r\n    async delete(id) {\r\n        try {\r\n            const response = await _delete(\r\n                fetch,\r\n                `${this.config.host}/instruments/${id}`,\r\n                this.config,\r\n                this.config.sk\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Delete a payment instrument.\r\n     *\r\n     * @memberof Instruments\r\n     * @param {string} country Country 2 character ISO.\r\n     * @param {string} currency Currency 3 character ISO.\r\n     * @return {Promise<Object>} A promise to the instrument response.\r\n     */\r\n    async getBankAccountFieldFormatting(country, currency) {\r\n        try {\r\n            const response = await get(\r\n                fetch,\r\n                `${this.config.host}/validation/bank-accounts/${country}/${currency}`,\r\n                this.config,\r\n                this.config.sk\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAA8D;AAAA;AAAA;AAE9D;AACA;AACA;AACA;AACA;AACA;AACe,MAAMA,WAAW,CAAC;EAC7BC,WAAW,CAACC,MAAM,EAAE;IAChB,IAAI,CAACA,MAAM,GAAGA,MAAM;EACxB;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACUC,MAAM,CAACC,IAAI,EAAE;IAAA;IAAA;MACf,IAAAC,6BAAiB,EAACD,IAAI,CAAC;MACvB,IAAI;QACA,MAAME,QAAQ,SAAS,IAAAC,UAAI,EACvBC,kBAAK,EACJ,GAAE,KAAI,CAACN,MAAM,CAACO,IAAK,cAAa,EACjC,KAAI,CAACP,MAAM,EACX,KAAI,CAACA,MAAM,CAACQ,EAAE,EACdN,IAAI,CACP;QACD,aAAaE,QAAQ,CAACK,IAAI;MAC9B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACV,MAAMC,KAAK,SAAS,IAAAC,sBAAc,EAACF,GAAG,CAAC;QACvC,MAAMC,KAAK;MACf;IAAC;EACL;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EACUE,GAAG,CAACC,EAAE,EAAE;IAAA;IAAA;MACV,IAAI;QACA,MAAMV,QAAQ,SAAS,IAAAS,SAAG,EACtBP,kBAAK,EACJ,GAAE,MAAI,CAACN,MAAM,CAACO,IAAK,gBAAeO,EAAG,EAAC,EACvC,MAAI,CAACd,MAAM,EACX,MAAI,CAACA,MAAM,CAACQ,EAAE,CACjB;QACD,aAAaJ,QAAQ,CAACK,IAAI;MAC9B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACV,MAAMC,KAAK,SAAS,IAAAC,sBAAc,EAACF,GAAG,CAAC;QACvC,MAAMC,KAAK;MACf;IAAC;EACL;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACUI,MAAM,CAACD,EAAE,EAAEZ,IAAI,EAAE;IAAA;IAAA;MACnB,IAAI;QACA,MAAME,QAAQ,SAAS,IAAAY,WAAK,EACxBV,kBAAK,EACJ,GAAE,MAAI,CAACN,MAAM,CAACO,IAAK,gBAAeO,EAAG,EAAC,EACvC,MAAI,CAACd,MAAM,EACX,MAAI,CAACA,MAAM,CAACQ,EAAE,EACdN,IAAI,CACP;QACD,aAAaE,QAAQ,CAACK,IAAI;MAC9B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACV,MAAMC,KAAK,SAAS,IAAAC,sBAAc,EAACF,GAAG,CAAC;QACvC,MAAMC,KAAK;MACf;IAAC;EACL;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EACUM,MAAM,CAACH,EAAE,EAAE;IAAA;IAAA;MACb,IAAI;QACA,MAAMV,QAAQ,SAAS,IAAAc,aAAO,EAC1BZ,kBAAK,EACJ,GAAE,MAAI,CAACN,MAAM,CAACO,IAAK,gBAAeO,EAAG,EAAC,EACvC,MAAI,CAACd,MAAM,EACX,MAAI,CAACA,MAAM,CAACQ,EAAE,CACjB;QACD,aAAaJ,QAAQ,CAACK,IAAI;MAC9B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACV,MAAMC,KAAK,SAAS,IAAAC,sBAAc,EAACF,GAAG,CAAC;QACvC,MAAMC,KAAK;MACf;IAAC;EACL;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACUQ,6BAA6B,CAACC,OAAO,EAAEC,QAAQ,EAAE;IAAA;IAAA;MACnD,IAAI;QACA,MAAMjB,QAAQ,SAAS,IAAAS,SAAG,EACtBP,kBAAK,EACJ,GAAE,MAAI,CAACN,MAAM,CAACO,IAAK,6BAA4Ba,OAAQ,IAAGC,QAAS,EAAC,EACrE,MAAI,CAACrB,MAAM,EACX,MAAI,CAACA,MAAM,CAACQ,EAAE,CACjB;QACD,aAAaJ,QAAQ,CAACK,IAAI;MAC9B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACV,MAAMC,KAAK,SAAS,IAAAC,sBAAc,EAACF,GAAG,CAAC;QACvC,MAAMC,KAAK;MACf;IAAC;EACL;AACJ;AAAC"}