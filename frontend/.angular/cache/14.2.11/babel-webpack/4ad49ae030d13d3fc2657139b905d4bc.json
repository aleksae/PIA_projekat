{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AdminRadniciComponent = class AdminRadniciComponent {\n  constructor(servis) {\n    this.servis = servis;\n    this.radnici = [];\n    this.slobodni = 0;\n    this.br_radnika = 0;\n    this.br_radnih_mesta_odobreno = 0;\n    this.br_radnih_mesta_na_cekanju = 0;\n    this.telefon = null;\n    this.mejl_format_greska = false;\n    this.telefon_validan = true;\n  }\n\n  ngOnInit() {\n    this.slobodni = 0;\n    this.br_radnika = 0;\n    this.br_radnih_mesta_na_cekanju = 0;\n    this.br_radnih_mesta_odobreno = 0;\n    this.radnici = [];\n    this.ulogovan = JSON.parse(localStorage.getItem(\"agencija\"));\n    this.servis.dohvati_sve_za_agenciju(this.ulogovan.korisnicko_ime).subscribe(res => {\n      if (res.length) {\n        this.radnici = res;\n        this.br_radnika = this.radnici.length;\n\n        for (let r of this.radnici) {\n          if (!r.angazovan) this.slobodni++;\n        }\n      }\n    });\n    this.servis.dohvati_zahteve_za_radna_mesta_za_agenciju(this.ulogovan.korisnicko_ime).subscribe(res => {\n      if (res.length) {\n        for (let r of res) {\n          if (r.status == 'odobreno') this.br_radnih_mesta_odobreno += r.broj_mesta;else if (r.status == 'poslato') this.br_radnih_mesta_na_cekanju += r.broj_mesta;\n        }\n      }\n    });\n  }\n\n  brisanje(id) {\n    console.log(id);\n    this.servis.obrisi_radnika(id).subscribe(res => {\n      if (res) {\n        this.ngOnInit();\n        console.log(\"success\");\n        console.log(res);\n      } else {\n        console.log(res);\n      }\n    });\n  }\n\n  uredi_radnika_izbor(r) {\n    this.azurira_se = r;\n    this.ime = r.ime;\n    this.prezime = r.prezime;\n    this.mejl = r.imejl;\n    this.telefon = r.telefon;\n    this.specijalizacija = r.specijalizacija;\n  }\n\n  otkazi_unos() {\n    this.azurira_se = null;\n    this.ime = \"\";\n    this.prezime = \"\";\n    this.mejl = \"\";\n    this.telefon = null;\n    this.specijalizacija = \"\";\n  }\n\n  check() {\n    this.format_mejl();\n  }\n\n  format_mejl() {\n    this.mejl_format_greska = !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.mejl);\n  }\n\n  telefon_provera() {\n    if (this.telefon.toString().length > 5) this.telefon_validan = true;else this.telefon_validan = false;\n  }\n\n  dodaj_novog_radnika() {\n    var _this = this;\n\n    if (!this.ime || !this.prezime || !this.telefon_validan || this.mejl_format_greska) {\n      this.greska = \"Грешка са подацима\";\n      return;\n    } else {\n      this.greska = null;\n    }\n\n    const sleep = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (milliseconds) {\n        yield new Promise(resolve => {\n          return setTimeout(resolve, milliseconds);\n        });\n      });\n\n      return function sleep(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    const data = {\n      _id: this.azurira_se ? this.azurira_se._id : null,\n      ime: this.ime,\n      prezime: this.prezime,\n      telefon: this.telefon,\n      imejl: this.mejl,\n      specijalizacija: this.specijalizacija,\n      agencija: this.ulogovan.korisnicko_ime,\n      angazovan: this.azurira_se ? this.azurira_se.angazovan : '',\n      prostorija: this.azurira_se ? this.azurira_se.prostorija : -1\n    };\n    console.log(data);\n\n    if (this.azurira_se) {\n      this.servis.azuriraj_radnika(data).subscribe( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator(function* (res) {\n          if (res['message'] == 'ok') {\n            _this.uspeh = \"Радник успешно ажуриран!\";\n            _this.brojac = 5;\n\n            _this.ngOnInit();\n\n            setTimeout(() => {\n              _this.uspeh = null;\n\n              _this.modal_dodaj_radnika.nativeElement.click();\n\n              _this.azurira_se = null;\n            }, 5000);\n\n            for (let i = 5; i > 0; i--) {\n              yield sleep(1000);\n              _this.brojac--;\n            }\n          }\n        });\n\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    } else {\n      this.servis.dodaj_radnika(data).subscribe( /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator(function* (res) {\n          if (res['message'] == 'ok') {\n            _this.uspeh = \"Радник успешно додат!\";\n            _this.brojac = 5;\n\n            _this.ngOnInit();\n\n            setTimeout(() => {\n              _this.uspeh = null;\n\n              _this.modal_dodaj_radnika.nativeElement.click();\n            }, 5000);\n\n            for (let i = 5; i > 0; i--) {\n              yield sleep(1000);\n              _this.brojac--;\n            }\n          }\n        });\n\n        return function (_x3) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    }\n  }\n\n  posalji_zahtev_za_radna() {\n    var _this2 = this;\n\n    const sleep = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(function* (milliseconds) {\n        yield new Promise(resolve => {\n          return setTimeout(resolve, milliseconds);\n        });\n      });\n\n      return function sleep(_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    if (!this.br_mesta_uneto || this.br_mesta_uneto == 0) return;\n    this.servis.dodaj_zahtev_za_radna_mesta(this.ulogovan.korisnicko_ime, this.br_mesta_uneto).subscribe( /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(function* (res) {\n        if (res) {\n          _this2.br_radnih_mesta_na_cekanju += _this2.br_mesta_uneto;\n          _this2.uspeh = \"Успешно послат захтев за радна места, количина \" + _this2.br_mesta_uneto + \". Прозор ће се затворити за: \";\n          _this2.br_mesta_uneto = null;\n          _this2.brojac = 5;\n          setTimeout(() => {\n            _this2.uspeh = null;\n\n            _this2.modal_dodaj_radnika.nativeElement.click();\n          }, 5000);\n\n          for (let i = 5; i > 0; i--) {\n            yield sleep(1000);\n            _this2.brojac--;\n          }\n        }\n      });\n\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n  }\n\n};\n\n__decorate([ViewChild('dodaj_radnika')], AdminRadniciComponent.prototype, \"modal_dodaj_radnika\", void 0);\n\nAdminRadniciComponent = __decorate([Component({\n  selector: 'app-admin-radnici',\n  templateUrl: './admin-radnici.component.html',\n  styleUrls: ['./admin-radnici.component.css']\n})], AdminRadniciComponent);\nexport { AdminRadniciComponent };","map":{"version":3,"mappings":";;AAAA,SAASA,SAAT,QAAkC,eAAlC;AAOA,IAAaC,qBAAqB,GAAlC,MAAaA,qBAAb,CAAkC;EAEhCC,YAAoBC,MAApB,EAAyC;IAArB;IAGpB,eAAmB,EAAnB;IACA,gBAAgB,CAAhB;IACA,kBAAoB,CAApB;IACA,gCAAgC,CAAhC;IACA,kCAAkC,CAAlC;IAIA,eAAiB,IAAjB;IAgCA,0BAA2B,KAA3B;IAGA,uBAA0B,IAA1B;EA9C8C;;EAc9CC,QAAQ;IACN,KAAKC,QAAL,GAAgB,CAAhB;IACA,KAAKC,UAAL,GAAkB,CAAlB;IACA,KAAKC,0BAAL,GAAkC,CAAlC;IACA,KAAKC,wBAAL,GAAgC,CAAhC;IACA,KAAKC,OAAL,GAAe,EAAf;IACA,KAAKC,QAAL,GAAgBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAhB;IACA,KAAKX,MAAL,CAAYY,uBAAZ,CAAoC,KAAKL,QAAL,CAAcM,cAAlD,EAAkEC,SAAlE,CAA6EC,GAAD,IAAgB;MAC1F,IAAGA,GAAG,CAACC,MAAP,EAAc;QACZ,KAAKV,OAAL,GAAeS,GAAf;QACA,KAAKZ,UAAL,GAAkB,KAAKG,OAAL,CAAaU,MAA/B;;QACA,KAAI,IAAIC,CAAR,IAAa,KAAKX,OAAlB,EAA0B;UACxB,IAAG,CAACW,CAAC,CAACC,SAAN,EAAiB,KAAKhB,QAAL;QAClB;MACF;IACF,CARD;IASA,KAAKF,MAAL,CAAYmB,0CAAZ,CAAuD,KAAKZ,QAAL,CAAcM,cAArE,EAAqFC,SAArF,CAAgGC,GAAD,IAA0B;MACvH,IAAGA,GAAG,CAACC,MAAP,EAAc;QACZ,KAAI,IAAIC,CAAR,IAAaF,GAAb,EAAiB;UACf,IAAGE,CAAC,CAACG,MAAF,IAAU,UAAb,EAAyB,KAAKf,wBAAL,IAA+BY,CAAC,CAACI,UAAjC,CAAzB,KACK,IAAGJ,CAAC,CAACG,MAAF,IAAU,SAAb,EAAwB,KAAKhB,0BAAL,IAAiCa,CAAC,CAACI,UAAnC;QAC9B;MACF;IAEF,CARD;EASD;;EAQDC,QAAQ,CAACC,EAAD,EAAG;IACTC,OAAO,CAACC,GAAR,CAAYF,EAAZ;IACA,KAAKvB,MAAL,CAAY0B,cAAZ,CAA2BH,EAA3B,EAA+BT,SAA/B,CAA0CC,GAAD,IAAO;MAC9C,IAAGA,GAAH,EAAO;QACL,KAAKd,QAAL;QACAuB,OAAO,CAACC,GAAR,CAAY,SAAZ;QACAD,OAAO,CAACC,GAAR,CAAYV,GAAZ;MACD,CAJD,MAIK;QACHS,OAAO,CAACC,GAAR,CAAYV,GAAZ;MACD;IACF,CARD;EASD;;EACDY,mBAAmB,CAACV,CAAD,EAAS;IAC1B,KAAKW,UAAL,GAAkBX,CAAlB;IACA,KAAKY,GAAL,GAAWZ,CAAC,CAACY,GAAb;IACA,KAAKC,OAAL,GAAeb,CAAC,CAACa,OAAjB;IACA,KAAKC,IAAL,GAAYd,CAAC,CAACe,KAAd;IACA,KAAKC,OAAL,GAAehB,CAAC,CAACgB,OAAjB;IACA,KAAKC,eAAL,GAAuBjB,CAAC,CAACiB,eAAzB;EACD;;EACDC,WAAW;IACT,KAAKP,UAAL,GAAkB,IAAlB;IACA,KAAKC,GAAL,GAAW,EAAX;IACA,KAAKC,OAAL,GAAe,EAAf;IACA,KAAKC,IAAL,GAAY,EAAZ;IACA,KAAKE,OAAL,GAAe,IAAf;IACA,KAAKC,eAAL,GAAuB,EAAvB;EACD;;EACDE,KAAK;IACH,KAAKC,WAAL;EACD;;EACDA,WAAW;IACT,KAAKC,kBAAL,GAA2B,CAAE,gDAAgDC,IAAhD,CAAqD,KAAKR,IAA1D,CAA7B;EACD;;EACDS,eAAe;IACb,IAAG,KAAKP,OAAL,CAAaQ,QAAb,GAAwBzB,MAAxB,GAA+B,CAAlC,EAAqC,KAAK0B,eAAL,GAAuB,IAAvB,CAArC,KACK,KAAKA,eAAL,GAAuB,KAAvB;EACN;;EACDC,mBAAmB;IAAA;;IACjB,IAAG,CAAC,KAAKd,GAAN,IAAa,CAAC,KAAKC,OAAnB,IAA8B,CAAC,KAAKY,eAApC,IAAuD,KAAKJ,kBAA/D,EAAkF;MAChF,KAAKM,MAAL,GAAc,oBAAd;MACA;IACD,CAHD,MAGK;MACH,KAAKA,MAAL,GAAc,IAAd;IACD;;IACD,MAAMC,KAAK;MAAA,6BAAG,WAAOC,YAAP,EAAuB;QACnC,MAAM,IAAIC,OAAJ,CAAYC,OAAO,IAAG;UACxB,OAAOC,UAAU,CAACD,OAAD,EAAUF,YAAV,CAAjB;QACH,CAFK,CAAN;MAEI,CAHK;;MAAA,gBAALD,KAAK;QAAA;MAAA;IAAA,GAAX;;IAIA,MAAMK,IAAI,GAAC;MACTC,GAAG,EAAE,KAAKvB,UAAL,GAAkB,KAAKA,UAAL,CAAgBuB,GAAlC,GAAuC,IADnC;MAETtB,GAAG,EAAE,KAAKA,GAFD;MAGTC,OAAO,EAAE,KAAKA,OAHL;MAITG,OAAO,EAAE,KAAKA,OAJL;MAKTD,KAAK,EAAE,KAAKD,IALH;MAMTG,eAAe,EAAC,KAAKA,eANZ;MAOTkB,QAAQ,EAAC,KAAK7C,QAAL,CAAcM,cAPd;MAQTK,SAAS,EAAE,KAAKU,UAAL,GAAkB,KAAKA,UAAL,CAAgBV,SAAlC,GAA8C,EARhD;MASTmC,UAAU,EAAE,KAAKzB,UAAL,GAAkB,KAAKA,UAAL,CAAgByB,UAAlC,GAA+C,CAAC;IATnD,CAAX;IAWA7B,OAAO,CAACC,GAAR,CAAYyB,IAAZ;;IACA,IAAG,KAAKtB,UAAR,EAAmB;MACjB,KAAK5B,MAAL,CAAYsD,gBAAZ,CAA6BJ,IAA7B,EAAmCpC,SAAnC;QAAA,8BAA6C,WAAMC,GAAN,EAAY;UACvD,IAAGA,GAAG,CAAC,SAAD,CAAH,IAAgB,IAAnB,EAAwB;YACtB,KAAI,CAACwC,KAAL,GAAa,0BAAb;YACA,KAAI,CAACC,MAAL,GAAc,CAAd;;YACA,KAAI,CAACvD,QAAL;;YACAgD,UAAU,CAAC,MAAI;cACb,KAAI,CAACM,KAAL,GAAa,IAAb;;cACA,KAAI,CAACE,mBAAL,CAAyBC,aAAzB,CAAuCC,KAAvC;;cACA,KAAI,CAAC/B,UAAL,GAAgB,IAAhB;YAED,CALS,EAKR,IALQ,CAAV;;YAOA,KAAK,IAAIgC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAE,CAAnB,EAAsBA,CAAC,EAAvB,EAA2B;cACzB,MAAMf,KAAK,CAAC,IAAD,CAAX;cACA,KAAI,CAACW,MAAL;YAED;UACF;QACF,CAlBD;;QAAA;UAAA;QAAA;MAAA;IAmBD,CApBD,MAoBK;MACL,KAAKxD,MAAL,CAAY6D,aAAZ,CAA0BX,IAA1B,EAAgCpC,SAAhC;QAAA,8BAA0C,WAAOC,GAAP,EAAa;UACrD,IAAGA,GAAG,CAAC,SAAD,CAAH,IAAgB,IAAnB,EAAwB;YACtB,KAAI,CAACwC,KAAL,GAAa,uBAAb;YACA,KAAI,CAACC,MAAL,GAAc,CAAd;;YACA,KAAI,CAACvD,QAAL;;YACAgD,UAAU,CAAC,MAAI;cACb,KAAI,CAACM,KAAL,GAAa,IAAb;;cACA,KAAI,CAACE,mBAAL,CAAyBC,aAAzB,CAAuCC,KAAvC;YAED,CAJS,EAIR,IAJQ,CAAV;;YAMA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAE,CAAnB,EAAsBA,CAAC,EAAvB,EAA2B;cACzB,MAAMf,KAAK,CAAC,IAAD,CAAX;cACA,KAAI,CAACW,MAAL;YAED;UACF;QAEF,CAlBD;;QAAA;UAAA;QAAA;MAAA;IAmBD;EACA;;EACDM,uBAAuB;IAAA;;IACrB,MAAMjB,KAAK;MAAA,8BAAG,WAAOC,YAAP,EAAuB;QACnC,MAAM,IAAIC,OAAJ,CAAYC,OAAO,IAAG;UACxB,OAAOC,UAAU,CAACD,OAAD,EAAUF,YAAV,CAAjB;QACH,CAFK,CAAN;MAEI,CAHK;;MAAA,gBAALD,KAAK;QAAA;MAAA;IAAA,GAAX;;IAIA,IAAG,CAAC,KAAKkB,cAAN,IAAwB,KAAKA,cAAL,IAAqB,CAAhD,EAAmD;IACnD,KAAK/D,MAAL,CAAYgE,2BAAZ,CAAwC,KAAKzD,QAAL,CAAcM,cAAtD,EAAsE,KAAKkD,cAA3E,EAA2FjD,SAA3F;MAAA,8BAAqG,WAAOC,GAAP,EAAa;QAChH,IAAGA,GAAH,EAAO;UACL,MAAI,CAACX,0BAAL,IAAmC,MAAI,CAAC2D,cAAxC;UAEA,MAAI,CAACR,KAAL,GAAa,oDAAkD,MAAI,CAACQ,cAAvD,GAAsE,+BAAnF;UACA,MAAI,CAACA,cAAL,GAAsB,IAAtB;UACA,MAAI,CAACP,MAAL,GAAc,CAAd;UACAP,UAAU,CAAC,MAAI;YACb,MAAI,CAACM,KAAL,GAAa,IAAb;;YACA,MAAI,CAACE,mBAAL,CAAyBC,aAAzB,CAAuCC,KAAvC;UACD,CAHS,EAGR,IAHQ,CAAV;;UAIA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAE,CAAnB,EAAsBA,CAAC,EAAvB,EAA2B;YACzB,MAAMf,KAAK,CAAC,IAAD,CAAX;YACA,MAAI,CAACW,MAAL;UAED;QACF;MACF,CAjBD;;MAAA;QAAA;MAAA;IAAA;EAmBD;;AAjL+B,CAAlC;;AA8C8BS,YAA3BC,SAAS,CAAC,eAAD,CAAkB;;AA9CjBpE,qBAAqB,eALjCD,SAAS,CAAC;EACTsE,QAAQ,EAAE,mBADD;EAETC,WAAW,EAAE,gCAFJ;EAGTC,SAAS,EAAE,CAAC,+BAAD;AAHF,CAAD,CAKwB,GAArBvE,qBAAqB,CAArB;SAAAA","names":["Component","AdminRadniciComponent","constructor","servis","ngOnInit","slobodni","br_radnika","br_radnih_mesta_na_cekanju","br_radnih_mesta_odobreno","radnici","ulogovan","JSON","parse","localStorage","getItem","dohvati_sve_za_agenciju","korisnicko_ime","subscribe","res","length","r","angazovan","dohvati_zahteve_za_radna_mesta_za_agenciju","status","broj_mesta","brisanje","id","console","log","obrisi_radnika","uredi_radnika_izbor","azurira_se","ime","prezime","mejl","imejl","telefon","specijalizacija","otkazi_unos","check","format_mejl","mejl_format_greska","test","telefon_provera","toString","telefon_validan","dodaj_novog_radnika","greska","sleep","milliseconds","Promise","resolve","setTimeout","data","_id","agencija","prostorija","azuriraj_radnika","uspeh","brojac","modal_dodaj_radnika","nativeElement","click","i","dodaj_radnika","posalji_zahtev_za_radna","br_mesta_uneto","dodaj_zahtev_za_radna_mesta","__decorate","ViewChild","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\admin-radnici\\admin-radnici.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({ \n  selector: 'app-admin-radnici',\n  templateUrl: './admin-radnici.component.html',\n  styleUrls: ['./admin-radnici.component.css']\n})\nexport class AdminRadniciComponent implements OnInit {\n\n  constructor(private servis:RadniciService) { }\n\n  ulogovan:Korisnik\n  radnici:Radnik[] = []\n  slobodni:number=0\n  br_radnika:number = 0;\n  br_radnih_mesta_odobreno:number=0;\n  br_radnih_mesta_na_cekanju:number=0;\n  ime:string;\n  prezime:string;\n  mejl:string;\n  telefon:number = null;\n  specijalizacija:string;\n  azurira_se:Radnik;\n  ngOnInit(): void {\n    this.slobodni = 0\n    this.br_radnika = 0\n    this.br_radnih_mesta_na_cekanju = 0\n    this.br_radnih_mesta_odobreno = 0\n    this.radnici = []\n    this.ulogovan = JSON.parse(localStorage.getItem(\"agencija\"))\n    this.servis.dohvati_sve_za_agenciju(this.ulogovan.korisnicko_ime).subscribe((res:Radnik[])=>{\n      if(res.length){\n        this.radnici = res\n        this.br_radnika = this.radnici.length\n        for(let r of this.radnici){\n          if(!r.angazovan) this.slobodni++\n        }\n      }\n    })\n    this.servis.dohvati_zahteve_za_radna_mesta_za_agenciju(this.ulogovan.korisnicko_ime).subscribe((res:ZahtevRadnaMesta[])=>{\n      if(res.length){\n        for(let r of res){\n          if(r.status=='odobreno') this.br_radnih_mesta_odobreno+=r.broj_mesta\n          else if(r.status=='poslato') this.br_radnih_mesta_na_cekanju+=r.broj_mesta\n        }\n      }\n      \n    })\n  }\n  br_mesta_uneto:number;\n  uspeh:string \n  greska:string \n  mejl_format_greska:boolean=false\n  @ViewChild('dodaj_radnika') modal_dodaj_radnika;\n  brojac:number;\n  telefon_validan:boolean = true\n  brisanje(id){\n    console.log(id)\n    this.servis.obrisi_radnika(id).subscribe((res)=>{\n      if(res){\n        this.ngOnInit()\n        console.log(\"success\")\n        console.log(res)\n      }else{\n        console.log(res)\n      }\n    })\n  }\n  uredi_radnika_izbor(r:Radnik){\n    this.azurira_se = r\n    this.ime = r.ime\n    this.prezime = r.prezime\n    this.mejl = r.imejl\n    this.telefon = r.telefon\n    this.specijalizacija = r.specijalizacija\n  }\n  otkazi_unos(){\n    this.azurira_se = null\n    this.ime = \"\"\n    this.prezime = \"\"\n    this.mejl = \"\"\n    this.telefon = null\n    this.specijalizacija = \"\"\n  }\n  check(){\n    this.format_mejl()\n  }\n  format_mejl(){\n    this.mejl_format_greska =  !(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.mejl));\n  }\n  telefon_provera(){\n    if(this.telefon.toString().length>5) this.telefon_validan = true;\n    else this.telefon_validan = false\n  }\n  dodaj_novog_radnika(){\n    if(!this.ime || !this.prezime || !this.telefon_validan || this.mejl_format_greska){\n      this.greska = \"Грешка са подацима\"\n      return;\n    }else{\n      this.greska = null\n    }\n    const sleep = async (milliseconds) => {\n      await new Promise(resolve => {\n          return setTimeout(resolve, milliseconds)\n      });}\n    const data={\n      _id: this.azurira_se ? this.azurira_se._id :null,\n      ime: this.ime,\n      prezime: this.prezime,\n      telefon: this.telefon,\n      imejl: this.mejl,\n      specijalizacija:this.specijalizacija,\n      agencija:this.ulogovan.korisnicko_ime,\n      angazovan: this.azurira_se ? this.azurira_se.angazovan : '',\n      prostorija: this.azurira_se ? this.azurira_se.prostorija : -1\n    }\n    console.log(data)\n    if(this.azurira_se){\n      this.servis.azuriraj_radnika(data).subscribe(async(res)=>{\n        if(res['message']=='ok'){\n          this.uspeh = \"Радник успешно ажуриран!\"\n          this.brojac = 5\n          this.ngOnInit()\n          setTimeout(()=>{\n            this.uspeh = null\n            this.modal_dodaj_radnika.nativeElement.click();\n            this.azurira_se=null\n            \n          },5000)\n          \n          for (let i = 5; i >0; i--) {\n            await sleep(1000);\n            this.brojac--;\n            \n          }\n        }\n      })\n    }else{\n    this.servis.dodaj_radnika(data).subscribe(async (res)=>{\n      if(res['message']=='ok'){\n        this.uspeh = \"Радник успешно додат!\"\n        this.brojac = 5\n        this.ngOnInit()\n        setTimeout(()=>{\n          this.uspeh = null\n          this.modal_dodaj_radnika.nativeElement.click();\n          \n        },5000)\n        \n        for (let i = 5; i >0; i--) {\n          await sleep(1000);\n          this.brojac--;\n          \n        }\n      }\n\n    })\n  }\n  }\n  posalji_zahtev_za_radna(){\n    const sleep = async (milliseconds) => {\n      await new Promise(resolve => {\n          return setTimeout(resolve, milliseconds)\n      });}\n    if(!this.br_mesta_uneto || this.br_mesta_uneto==0) return;\n    this.servis.dodaj_zahtev_za_radna_mesta(this.ulogovan.korisnicko_ime, this.br_mesta_uneto).subscribe(async (res)=>{\n      if(res){\n        this.br_radnih_mesta_na_cekanju += this.br_mesta_uneto\n        \n        this.uspeh = \"Успешно послат захтев за радна места, количина \"+this.br_mesta_uneto+\". Прозор ће се затворити за: \"\n        this.br_mesta_uneto = null\n        this.brojac = 5\n        setTimeout(()=>{\n          this.uspeh = null\n          this.modal_dodaj_radnika.nativeElement.click();\n        },5000)\n        for (let i = 5; i >0; i--) {\n          await sleep(1000);\n          this.brojac--;\n          \n        }\n      }\n    }\n    )\n  }\n  \n}\n"]},"metadata":{},"sourceType":"module"}