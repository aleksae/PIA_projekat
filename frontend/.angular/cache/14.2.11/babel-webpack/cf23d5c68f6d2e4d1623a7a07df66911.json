{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AgencijePregledComponent = class AgencijePregledComponent {\n  constructor(korisnikService) {\n    this.korisnikService = korisnikService;\n    this.pretraga_u_toku = false;\n    this.sort_naziv_rastuce = false;\n    this.sort_naziv_opadajuce = false;\n    this.sort_adresa_rastuce = false;\n    this.sort_adresa_opadajuce = false;\n    this.ucitavanje = false;\n  }\n\n  ngOnInit() {\n    this.ucitavanje = true;\n    this.pretraga_u_toku = false;\n    this.korisnici = [];\n    this.stanje = \"Све агенције\";\n    this.korisnikService.sviKorisnici().subscribe(korisnici => {\n      this.pocetno = korisnici;\n      korisnici.forEach(korisnik => {\n        if (korisnik.uloga == \"agencija\") {\n          this.korisnici.push(korisnik);\n        }\n      });\n      this.pocetno = this.korisnici;\n      this.ucitavanje = false;\n    });\n  }\n\n  sortiraj(res) {\n    switch (res) {\n      case 'a_o':\n        this.sort_adresa_opadajuce = !this.sort_adresa_opadajuce;\n        if (this.sort_adresa_opadajuce && this.sort_adresa_rastuce) this.sort_adresa_rastuce = false;\n        break;\n\n      case 'a_r':\n        this.sort_adresa_rastuce = !this.sort_adresa_rastuce;\n        if (this.sort_adresa_opadajuce && this.sort_adresa_rastuce) this.sort_adresa_opadajuce = false;\n        break;\n\n      case 'n_o':\n        this.sort_naziv_opadajuce = !this.sort_naziv_opadajuce;\n        if (this.sort_naziv_opadajuce && this.sort_naziv_rastuce) this.sort_naziv_rastuce = false;\n        break;\n\n      case 'n_r':\n        this.sort_naziv_rastuce = !this.sort_naziv_rastuce;\n        if (this.sort_naziv_opadajuce && this.sort_naziv_rastuce) this.sort_naziv_opadajuce = false;\n        break;\n\n      default:\n    }\n\n    if (this.sort_adresa_opadajuce) {\n      if (this.sort_naziv_opadajuce) this.korisnici.sort((a, b) => this.sort_string(b['dodatno']['adresa'], a['dodatno']['adresa']) && this.sort_string(b['dodatno']['naziv'], a['dodatno']['naziv']));else if (this.sort_naziv_rastuce) this.korisnici.sort((a, b) => this.sort_string(b['dodatno']['adresa'], a['dodatno']['adresa']) && this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']));else this.korisnici.sort((a, b) => this.sort_string(b['dodatno']['adresa'], a['dodatno']['adresa']));\n    } else if (this.sort_adresa_rastuce) {\n      if (this.sort_naziv_opadajuce) this.korisnici.sort((a, b) => this.sort_string(a['dodatno']['adresa'], b['dodatno']['adresa']) && this.sort_string(b['dodatno']['naziv'], a['dodatno']['naziv']));else if (this.sort_naziv_rastuce) this.korisnici.sort((a, b) => this.sort_string(a['dodatno']['adresa'], b['dodatno']['adresa']) && this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']));else this.korisnici.sort((a, b) => this.sort_string(a['dodatno']['adresa'], b['dodatno']['adresa']));\n    } else if (this.sort_naziv_opadajuce) {\n      this.korisnici.sort((a, b) => this.sort_string(b['dodatno']['naziv'], a['dodatno']['naziv']));\n    } else if (this.sort_naziv_rastuce) {\n      this.korisnici.sort((a, b) => this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']));\n    } else {\n      this.korisnici.sort((a, b) => {\n        if (this.pocetno.indexOf(a) > this.pocetno.indexOf(b)) return 1;else if (this.pocetno.indexOf(a) < this.pocetno.indexOf(b)) return -1;else return 0;\n      });\n    }\n  }\n\n  sort_string(a, b) {\n    if (a > b) return 1;else if (a < b) return -1;else return 0;\n  }\n\n  pretrazi_po_adresi() {\n    this.pocetno.forEach(agencija => {\n      if (!(agencija.uloga == \"agencija\")) return;\n      if (agencija.dodatno[\"adresa\"].toLowerCase().match(this.adresa.toLowerCase()) == this.adresa.toLowerCase()) this.korisnici.push(agencija);\n    });\n    this.stanje = \"Резултати претраге\";\n  }\n\n  pretrazi_po_nazivu() {\n    this.pocetno.forEach(agencija => {\n      if (!(agencija.uloga == \"agencija\")) return;\n      if (agencija.dodatno[\"naziv\"].toLowerCase().match(this.naziv.toLowerCase()) == this.naziv.toLowerCase()) this.korisnici.push(agencija);\n    });\n    this.stanje = \"Резултати претраге\";\n  }\n\n  pretrazi_po_oba() {\n    this.korisnici = [];\n    this.pocetno.forEach(agencija => {\n      if (!(agencija.uloga == \"agencija\")) return;\n      if (agencija.dodatno[\"naziv\"].toLowerCase().match(this.naziv.toLowerCase()) == this.naziv.toLowerCase() && agencija.dodatno[\"adresa\"].toLowerCase().match(this.adresa.toLowerCase()) == this.adresa.toLowerCase()) this.korisnici.push(agencija);\n    });\n    this.stanje = \"Резултати претраге\";\n  }\n\n  reset_adresa() {\n    this.adresa = null;\n    this.pretraga();\n  }\n\n  reset_naziv() {\n    this.naziv = null;\n    this.pretraga();\n  }\n\n  pretraga() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.stara_adresa = _this.adresa;\n      _this.stari_naziv = _this.naziv;\n      _this.pretraga_u_toku = true;\n      _this.korisnici = [];\n\n      const delay = ms => new Promise(res => setTimeout(res, ms));\n\n      yield delay(1000);\n\n      if (!_this.naziv || _this.naziv == '') {\n        //nije unet naziv agencije\n        if (!_this.adresa || _this.adresa == '') {\n          //nije uneta ni adresa ni agencija\n          _this.ngOnInit();\n\n          _this.stanje = \"Сви корисници\";\n        } else {\n          _this.pretrazi_po_adresi();\n        }\n      } else {\n        //unet je naziv agencije\n        _this.pretrazi_po_nazivu();\n\n        if (!_this.adresa || _this.adresa == '') {//nije uneta adresa, ali jeste naziv, ne radimo nista\n        } else {\n          //uneta i adresa i naziv agencije\n          _this.pretrazi_po_oba();\n        }\n      }\n\n      _this.sortiraj(null);\n\n      _this.pretraga_u_toku = false;\n    })();\n  }\n\n};\nAgencijePregledComponent = __decorate([Component({\n  selector: 'app-agencije-pregled',\n  templateUrl: './agencije-pregled.component.html',\n  styleUrls: ['./agencije-pregled.component.css']\n})], AgencijePregledComponent);\nexport { AgencijePregledComponent };","map":{"version":3,"mappings":"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","names":["Component","AgencijePregledComponent","constructor","korisnikService","ngOnInit","ucitavanje","pretraga_u_toku","korisnici","stanje","sviKorisnici","subscribe","pocetno","forEach","korisnik","uloga","push","sortiraj","res","sort_adresa_opadajuce","sort_adresa_rastuce","sort_naziv_opadajuce","sort_naziv_rastuce","sort","a","b","sort_string","indexOf","pretrazi_po_adresi","agencija","dodatno","toLowerCase","match","adresa","pretrazi_po_nazivu","naziv","pretrazi_po_oba","reset_adresa","pretraga","reset_naziv","stara_adresa","stari_naziv","delay","ms","Promise","setTimeout","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencije-pregled\\agencije-pregled.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { KorisnikService } from '../korisnik.service';\nimport { Korisnik } from '../models/korisnik';\n\n@Component({\n  selector: 'app-agencije-pregled',\n  templateUrl: './agencije-pregled.component.html',\n  styleUrls: ['./agencije-pregled.component.css'],\n})\nexport class AgencijePregledComponent implements OnInit {\n\n  constructor(private korisnikService: KorisnikService) { }\n\n  korisnici:Korisnik[];\n  stanje: string;\n  adresa: string;\n  stara_adresa: string;\n  naziv: string;\n  stari_naziv: string;\n  pocetno:Korisnik[];\n  pretraga_u_toku:boolean = false;\n  sort_naziv_rastuce:boolean=false;\n  sort_naziv_opadajuce:boolean=false;\n  sort_adresa_rastuce:boolean=false;\n  sort_adresa_opadajuce:boolean=false;\n  ucitavanje: boolean=false;\n  ngOnInit(): void {\n    this.ucitavanje = true;\n    this.pretraga_u_toku = false;\n    this.korisnici = []\n    this.stanje = \"Све агенције\";\n    this.korisnikService.sviKorisnici().subscribe((korisnici : Korisnik[])=>{\n    this.pocetno = korisnici;\n    korisnici.forEach((korisnik)=>{\n      if(korisnik.uloga == \"agencija\") {\n        this.korisnici.push(korisnik);\n      }\n     })\n     this.pocetno = this.korisnici;\n     this.ucitavanje = false;\n    })\n    \n  }\n  sortiraj(res: string){\n    switch(res) {\n      case 'a_o':\n        this.sort_adresa_opadajuce = !this.sort_adresa_opadajuce\n        if(this.sort_adresa_opadajuce && this.sort_adresa_rastuce) this.sort_adresa_rastuce = false;\n        break;\n      case 'a_r':\n        this.sort_adresa_rastuce = !this.sort_adresa_rastuce\n        if(this.sort_adresa_opadajuce && this.sort_adresa_rastuce) this.sort_adresa_opadajuce = false;\n        break;\n      case 'n_o':\n        this.sort_naziv_opadajuce = !this.sort_naziv_opadajuce\n        if(this.sort_naziv_opadajuce && this.sort_naziv_rastuce) this.sort_naziv_rastuce = false;\n        break;\n      case 'n_r':\n        this.sort_naziv_rastuce = !this.sort_naziv_rastuce\n        if(this.sort_naziv_opadajuce && this.sort_naziv_rastuce) this.sort_naziv_opadajuce = false;\n        break;\n      default:\n    }\n    if(this.sort_adresa_opadajuce){\n      if(this.sort_naziv_opadajuce) this.korisnici.sort((a,b)=> ((this.sort_string(b['dodatno']['adresa'],a['dodatno']['adresa'])) && (this.sort_string(b['dodatno']['naziv'],a['dodatno']['naziv']))));\n      else if(this.sort_naziv_rastuce) this.korisnici.sort((a,b)=> ((this.sort_string(b['dodatno']['adresa'],a['dodatno']['adresa'])) && (this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']))));\n      else this.korisnici.sort((a,b)=> this.sort_string(b['dodatno']['adresa'],a['dodatno']['adresa']))\n    }\n    else if(this.sort_adresa_rastuce){\n      if(this.sort_naziv_opadajuce) this.korisnici.sort((a,b)=> ((this.sort_string(a['dodatno']['adresa'],b['dodatno']['adresa'])) && (this.sort_string(b['dodatno']['naziv'],a['dodatno']['naziv']))));\n      else if(this.sort_naziv_rastuce) this.korisnici.sort((a,b)=> ((this.sort_string(a['dodatno']['adresa'],b['dodatno']['adresa'])) && (this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']))));\n      else this.korisnici.sort((a,b)=> this.sort_string(a['dodatno']['adresa'],b['dodatno']['adresa']))\n    }\n    else if(this.sort_naziv_opadajuce){\n      this.korisnici.sort((a,b)=> this.sort_string(b['dodatno']['naziv'],a['dodatno']['naziv']))\n    }\n    else if(this.sort_naziv_rastuce){\n      this.korisnici.sort((a,b)=> this.sort_string(a['dodatno']['naziv'],b['dodatno']['naziv']))\n    }else{\n      this.korisnici.sort((a,b)=> {\n        if(this.pocetno.indexOf(a)>this.pocetno.indexOf(b)) return 1;\n        else if(this.pocetno.indexOf(a)<this.pocetno.indexOf(b)) return -1;\n        else return 0;\n      })\n    }\n\n  }\n\n  sort_string(a,b){\n    if(a>b) return 1;\n    else if(a<b) return -1;\n    else return 0;\n  }\n  private pretrazi_po_adresi(){\n    this.pocetno.forEach((agencija)=>{\n      if(!(agencija.uloga==\"agencija\")) return;\n      if((agencija.dodatno[\"adresa\"]).toLowerCase().match(this.adresa.toLowerCase())==this.adresa.toLowerCase()) this.korisnici.push(agencija)\n    })\n    this.stanje=\"Резултати претраге\"\n  }\n  private pretrazi_po_nazivu(){\n    this.pocetno.forEach((agencija)=>{\n      if(!(agencija.uloga==\"agencija\")) return;\n      if(agencija.dodatno[\"naziv\"].toLowerCase().match(this.naziv.toLowerCase())==this.naziv.toLowerCase()) this.korisnici.push(agencija)\n    })\n    this.stanje=\"Резултати претраге\"\n  }\n  private pretrazi_po_oba(){\n    this.korisnici=[];\n    this.pocetno.forEach((agencija)=>{\n      if(!(agencija.uloga==\"agencija\")) return;\n      if(agencija.dodatno[\"naziv\"].toLowerCase().match(this.naziv.toLowerCase())==this.naziv.toLowerCase()\n      && (agencija.dodatno[\"adresa\"]).toLowerCase().match(this.adresa.toLowerCase())==this.adresa.toLowerCase()) this.korisnici.push(agencija)\n    })\n    this.stanje=\"Резултати претраге\"\n  }\n\n\n  reset_adresa(){\n    this.adresa = null;\n    this.pretraga();\n  }\n  reset_naziv(){\n    this.naziv = null;\n    this.pretraga();\n  }\n  \n  async pretraga(){\n    this.stara_adresa = this.adresa;\n    this.stari_naziv = this.naziv;\n    this.pretraga_u_toku= true;\n    this.korisnici = [];\n    const delay = ms => new Promise(res => setTimeout(res, ms));\n    await delay(1000);\n    if(!this.naziv || this.naziv == ''){\n      //nije unet naziv agencije\n      if(!this.adresa || this.adresa==''){\n        //nije uneta ni adresa ni agencija\n        this.ngOnInit()\n        this.stanje=\"Сви корисници\"\n      }else{\n        this.pretrazi_po_adresi();\n      }\n    }else{\n      //unet je naziv agencije\n      \n      this.pretrazi_po_nazivu();\n      if(!this.adresa || this.adresa==''){\n        //nije uneta adresa, ali jeste naziv, ne radimo nista\n      }else{\n        //uneta i adresa i naziv agencije\n        this.pretrazi_po_oba();\n      }\n    }\n    this.sortiraj(null);\n    this.pretraga_u_toku= false;\n  }\n  \n\n}\n"]},"metadata":{},"sourceType":"module"}