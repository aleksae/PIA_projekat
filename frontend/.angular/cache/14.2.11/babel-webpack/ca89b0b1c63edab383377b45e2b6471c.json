{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../radnici.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"dodaj_radnika\"];\n\nfunction AgencijaRadniciComponent_div_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 34);\n    i0.ɵɵelement(2, \"path\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassMapInterpolate1(\"alert alert-\", ctx_r0.greska ? \"danger\" : \"primary\", \" d-flex align-items-center\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.greska ? ctx_r0.greska : ctx_r0.uspeh, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.brojac);\n  }\n}\n\nexport class AgencijaRadniciComponent {\n  constructor(servis) {\n    this.servis = servis;\n    this.radnici = [];\n    this.slobodni = 0;\n    this.br_radnika = 0;\n    this.br_radnih_mesta_odobreno = 0;\n    this.br_radnih_mesta_na_cekanju = 0;\n    this.telefon = null;\n    this.mejl_format_greska = false;\n    this.telefon_validan = true;\n  }\n\n  ngOnInit() {\n    this.ulogovan = JSON.parse(localStorage.getItem(\"agencija\"));\n    this.servis.dohvati_sve_za_agenciju(this.ulogovan.korisnicko_ime).subscribe(res => {\n      if (res.length) {\n        this.radnici = res;\n        this.br_radnika = this.radnici.length;\n\n        for (let r of this.radnici) {\n          if (!r.aganzovan) this.slobodni++;\n        }\n      }\n    });\n    this.servis.dohvati_zahteve_za_radna_mesta_za_agenciju(this.ulogovan.korisnicko_ime).subscribe(res => {\n      if (res.length) {\n        for (let r of res) {\n          if (r.status == 'odobreno') this.br_radnih_mesta_odobreno += r.broj_mesta;else if (r.status == 'poslato') this.br_radnih_mesta_na_cekanju += r.broj_mesta;\n        }\n      }\n    });\n  }\n\n  check() {\n    this.format_mejl();\n  }\n\n  format_mejl() {\n    this.mejl_format_greska = !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.mejl);\n  }\n\n  telefon_provera() {\n    if (this.telefon.toString().length > 5) this.telefon_validan = true;else this.telefon_validan = false;\n  }\n\n  posalji_zahtev_za_radna() {\n    var _this = this;\n\n    const sleep = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (milliseconds) {\n        yield new Promise(resolve => {\n          return setTimeout(resolve, milliseconds);\n        });\n      });\n\n      return function sleep(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    if (!this.br_mesta_uneto || this.br_mesta_uneto == 0) return;\n    this.servis.dodaj_zahtev_za_radna_mesta(this.ulogovan.korisnicko_ime, this.br_mesta_uneto).subscribe( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (res) {\n        if (res) {\n          _this.br_radnih_mesta_na_cekanju += _this.br_mesta_uneto;\n          _this.uspeh = \"Успешно послат захтев за радна места, количина \" + _this.br_mesta_uneto + \". Прозор ће се затворити за: \";\n          _this.br_mesta_uneto = null;\n          _this.brojac = 5;\n          setTimeout(() => {\n            _this.uspeh = null;\n\n            _this.modal_dodaj_radnika.nativeElement.click();\n          }, 5000);\n\n          for (let i = 5; i > 0; i--) {\n            yield sleep(1000);\n            _this.brojac--;\n          }\n        }\n      });\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }\n\n}\n\nAgencijaRadniciComponent.ɵfac = function AgencijaRadniciComponent_Factory(t) {\n  return new (t || AgencijaRadniciComponent)(i0.ɵɵdirectiveInject(i1.RadniciService));\n};\n\nAgencijaRadniciComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AgencijaRadniciComponent,\n  selectors: [[\"app-agencija-radnici\"]],\n  viewQuery: function AgencijaRadniciComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modal_dodaj_radnika = _t.first);\n    }\n  },\n  decls: 68,\n  vars: 18,\n  consts: [[1, \"container\"], [1, \"d-flex\", \"bd-highlight\", \"mb-3\"], [1, \"me-auto\", \"p-2\", \"bd-highlight\"], [1, \"p-2\", \"bd-highlight\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#dodaj_radnika\", 1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"disabled\"], [1, \"me-2\", \"p-2\", \"bd-highlight\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#zahtev_radna_mesta\", 1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"disabled\"], [\"id\", \"dodaj_radnika\", \"tabindex\", \"-1\", \"aria-labelledby\", \"dodaj_radnika\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"row\"], [1, \"col\"], [1, \"form-floating\", \"mb-4\"], [\"type\", \"text\", \"name\", \"ime\", \"id\", \"ime\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u0438\\u043C\\u0435\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"ime\"], [\"type\", \"text\", \"name\", \"prezime\", \"id\", \"prezime\", \"placeholder\", \"\\u041F\\u0440\\u0435\\u0437\\u0438\\u043C\\u0435\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"prezime\"], [\"type\", \"number\", \"name\", \"br_tel\", \"id\", \"br_tel\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"for\", \"lozinka\"], [\"type\", \"email\", \"name\", \"mejl\", \"id\", \"mejl\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u043C\\u0435\\u0458\\u043B\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"for\", \"mejl\"], [\"type\", \"text\", \"name\", \"specijalizacija\", \"id\", \"specijalizacija\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u0441\\u043F\\u0435\\u0446\\u0438\\u0458\\u0430\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u0458\\u0443\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"id\", \"zahtev_radna_mesta\", \"tabindex\", \"-1\", \"aria-labelledby\", \"zahtev_radna_mesta\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"role\", \"alert\", 3, \"class\", 4, \"ngIf\"], [\"type\", \"number\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"dodaj_radnika\", \"\"], [\"role\", \"alert\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", \"role\", \"img\", \"aria-label\", \"Warning:\", 1, \"bi\", \"bi-exclamation-triangle-fill\", \"flex-shrink-0\", \"me-2\"], [\"d\", \"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"]],\n  template: function AgencijaRadniciComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r2 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"button\", 4);\n      i0.ɵɵtext(6, \"\\u0414\\u043E\\u0434\\u0430\\u0458 \\u0440\\u0430\\u0434\\u043D\\u0438\\u043A\\u0430\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"button\", 6);\n      i0.ɵɵtext(9, \"\\u0417\\u0430\\u0445\\u0442\\u0435\\u0432 \\u0437\\u0430 \\u0440\\u0430\\u0434\\u043D\\u0430 \\u043C\\u0435\\u0441\\u0442\\u0430\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(10, \"div\", 7)(11, \"div\", 8)(12, \"div\", 9)(13, \"div\", 10)(14, \"h5\", 11);\n      i0.ɵɵtext(15, \"\\u0414\\u043E\\u0434\\u0430\\u0432\\u0430\\u045A\\u0435 \\u0440\\u0430\\u0434\\u043D\\u0438\\u043A\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"button\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 13)(18, \"div\", 14)(19, \"div\", 15)(20, \"div\", 16)(21, \"input\", 17);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaRadniciComponent_Template_input_ngModelChange_21_listener($event) {\n        return ctx.ime = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"label\", 18);\n      i0.ɵɵtext(23, \"\\u0418\\u043C\\u0435\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(24, \"div\", 15)(25, \"div\", 16)(26, \"input\", 19);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaRadniciComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.prezime = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"label\", 20);\n      i0.ɵɵtext(28, \"\\u041F\\u0440\\u0435\\u0437\\u0438\\u043C\\u0435\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(29, \"div\", 14)(30, \"div\", 15)(31, \"div\", 16)(32, \"input\", 21);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaRadniciComponent_Template_input_ngModelChange_32_listener($event) {\n        return ctx.telefon = $event;\n      })(\"input\", function AgencijaRadniciComponent_Template_input_input_32_listener() {\n        return ctx.telefon_provera();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"label\", 22);\n      i0.ɵɵtext(34, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(35, \"div\", 15)(36, \"div\", 16)(37, \"input\", 23);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaRadniciComponent_Template_input_ngModelChange_37_listener($event) {\n        return ctx.mejl = $event;\n      })(\"input\", function AgencijaRadniciComponent_Template_input_input_37_listener() {\n        return ctx.check();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"label\", 24);\n      i0.ɵɵtext(39, \"\\u041C\\u0435\\u0458\\u043B \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(40, \"div\", 14)(41, \"div\", 15)(42, \"div\", 16)(43, \"input\", 25);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaRadniciComponent_Template_input_ngModelChange_43_listener($event) {\n        return ctx.specijalizacija = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"label\", 18);\n      i0.ɵɵtext(45, \"\\u0421\\u043F\\u0435\\u0446\\u0438\\u0458\\u0430\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u0458\\u0430\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(46, \"div\", 26)(47, \"button\", 27);\n      i0.ɵɵtext(48, \"\\u041E\\u0442\\u043A\\u0430\\u0436\\u0438\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"button\", 28);\n      i0.ɵɵlistener(\"click\", function AgencijaRadniciComponent_Template_button_click_49_listener() {\n        i0.ɵɵrestoreView(_r2);\n\n        const _r1 = i0.ɵɵreference(64);\n\n        return i0.ɵɵresetView(_r1());\n      });\n      i0.ɵɵtext(50, \"\\u0414\\u043E\\u0434\\u0430\\u0458 \\u0440\\u0430\\u0434\\u043D\\u0438\\u043A\\u0430\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(51, \"div\", 29)(52, \"div\", 8)(53, \"div\", 9)(54, \"div\", 10)(55, \"h5\", 11);\n      i0.ɵɵtext(56, \"\\u041F\\u043E\\u0448\\u0430\\u0459\\u0438 \\u0437\\u0430\\u0445\\u0442\\u0435\\u0432 \\u0437\\u0430 \\u0440\\u0430\\u0434\\u043D\\u0430 \\u043C\\u0435\\u0441\\u0442\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(57, \"button\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(58, \"div\", 13);\n      i0.ɵɵtemplate(59, AgencijaRadniciComponent_div_59_Template, 7, 5, \"div\", 30);\n      i0.ɵɵtext(60, \" \\u0411\\u0440\\u043E\\u0458 \\u0437\\u0430\\u0445\\u0442\\u0435\\u0432\\u0430\\u043D\\u0438\\u0445 \\u0440\\u0430\\u0434\\u043D\\u0438\\u0445 \\u043C\\u0435\\u0441\\u0442\\u0430: \");\n      i0.ɵɵelementStart(61, \"input\", 31);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaRadniciComponent_Template_input_ngModelChange_61_listener($event) {\n        return ctx.br_mesta_uneto = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(62, \"div\", 26)(63, \"button\", 27, 32);\n      i0.ɵɵtext(65, \"\\u041E\\u0434\\u0443\\u0441\\u0442\\u0430\\u043D\\u0438\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"button\", 28);\n      i0.ɵɵlistener(\"click\", function AgencijaRadniciComponent_Template_button_click_66_listener() {\n        return ctx.posalji_zahtev_za_radna();\n      });\n      i0.ɵɵtext(67, \"\\u041F\\u043E\\u0448\\u0430\\u0459\\u0438\");\n      i0.ɵɵelementEnd()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate3(\"\\u0411\\u0440\\u043E\\u0458 \\u0441\\u043B\\u043E\\u0431\\u043E\\u0434\\u043D\\u0438\\u0445 \\u0440\\u0430\\u0434\\u043D\\u0438\\u043A\\u0430: \", ctx.slobodni, \", \\u0431\\u0440\\u043E\\u0458 \\u043E\\u0434\\u043E\\u0431\\u0440\\u0435\\u043D\\u0438\\u0445 \\u0440\\u0430\\u0434\\u043D\\u0438\\u0445 \\u043C\\u0435\\u0441\\u0442\\u0430: \", ctx.br_radnih_mesta_odobreno, \", \\u0431\\u0440\\u043E\\u0458 \\u043C\\u0435\\u0441\\u0442\\u0430 \\u043D\\u0430 \\u0447\\u0435\\u043A\\u0430\\u045A\\u0443: \", ctx.br_radnih_mesta_na_cekanju, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !(ctx.br_radnih_mesta_odobreno > ctx.br_radnika));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", ctx.slobodni || !ctx.slobodni && ctx.br_radnih_mesta_na_cekanju);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngModel\", ctx.ime);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.prezime);\n      i0.ɵɵadvance(6);\n      i0.ɵɵclassMapInterpolate1(\"form-control \", !ctx.telefon_validan ? \" border border-2 border-danger\" : ctx.telefon ? \"border-success border border-2\" : \"\", \"\");\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(5);\n      i0.ɵɵclassMapInterpolate1(\"form-control  \", ctx.mejl_format_greska ? \" border border-2 border-danger\" : ctx.mejl ? \"border-success border border-2\" : \"\", \"\");\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.specijalizacija);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngIf\", ctx.greska || ctx.uspeh);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.br_mesta_uneto);\n    }\n  },\n  dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.RequiredValidator, i3.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZ2VuY2lqYS1yYWRuaWNpLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AgencijaRadniciComponent","constructor","servis","ngOnInit","ulogovan","JSON","parse","localStorage","getItem","dohvati_sve_za_agenciju","korisnicko_ime","subscribe","res","length","radnici","br_radnika","r","aganzovan","slobodni","dohvati_zahteve_za_radna_mesta_za_agenciju","status","br_radnih_mesta_odobreno","broj_mesta","br_radnih_mesta_na_cekanju","check","format_mejl","mejl_format_greska","test","mejl","telefon_provera","telefon","toString","telefon_validan","posalji_zahtev_za_radna","sleep","milliseconds","Promise","resolve","setTimeout","br_mesta_uneto","dodaj_zahtev_za_radna_mesta","uspeh","brojac","modal_dodaj_radnika","nativeElement","click","i","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-radnici\\agencija-radnici.component.html","C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-radnici\\agencija-radnici.component.ts"],"sourcesContent":["<div class=\"container\">\n\n    <div class=\"d-flex bd-highlight mb-3\">\n        <div class=\"me-auto p-2 bd-highlight\">Број слободних радника: {{slobodni}}, број одобрених радних места: {{br_radnih_mesta_odobreno}}, број места на чекању: {{br_radnih_mesta_na_cekanju}}</div>\n        <div class=\"p-2 bd-highlight\"><button class=\"btn btn-sm  btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#dodaj_radnika\" [disabled]=\"!(br_radnih_mesta_odobreno>br_radnika)\">Додај радника</button></div>\n        <div class=\"me-2 p-2 bd-highlight\"><button class=\"btn btn-sm btn-secondary\" data-bs-toggle=\"modal\" data-bs-target=\"#zahtev_radna_mesta\" [disabled]=\"(slobodni || (!slobodni && br_radnih_mesta_na_cekanju))\">Захтев за радна места</button></div>\n    </div>  \n \n</div>\n<div class=\"modal fade\" id=\"dodaj_radnika\" tabindex=\"-1\" aria-labelledby=\"dodaj_radnika\" aria-hidden=\"true\" >\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">Додавање радника</h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <div class=\"form-floating mb-4\">\n                  <input type=\"text\" class=\"form-control\" name=\"ime\" id=\"ime\" placeholder=\"Унесите име\" [(ngModel)]=\"ime\" required>\n                  <label for=\"ime\">Име</label>\n              </div>\n              </div>\n              <div class=\"col\">\n              <div class=\"form-floating mb-4\">\n                  <input type=\"text\" class=\"form-control \" name=\"prezime\" id=\"prezime\" placeholder=\"Презиме\" [(ngModel)]=\"prezime\"  required>\n                  <label for=\"prezime\">Презиме</label>\n              </div>\n              </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col\">\n            <div class=\"form-floating mb-4\">\n                <input type=\"number\" class=\"form-control {{!telefon_validan ? ' border border-2 border-danger' : (telefon ? 'border-success border border-2' : '')}}\" name=\"br_tel\" id=\"br_tel\" placeholder=\"Унесите телефон\" [(ngModel)]=\"telefon\" required (input)=\"telefon_provera()\">\n                <label for=\"lozinka\">Телефон</label>\n            </div>\n            </div>\n            <div class=\"col\">\n            <div class=\"form-floating mb-4\">\n                <input type=\"email\" class=\"form-control  {{mejl_format_greska ? ' border border-2 border-danger' : (mejl ? 'border-success border border-2' : '')}}\" name=\"mejl\" id=\"mejl\" placeholder=\"Унесите мејл\"  required [(ngModel)]=\"mejl\" (input)=\"check()\" >\n                <label for=\"mejl\">Мејл адреса</label>\n            </div>\n            </div>\n         \n        </div>\n        <div class=\"row\">\n          <div class=\"col\">\n            <div class=\"form-floating mb-4\">\n              <input type=\"text\" class=\"form-control\" name=\"specijalizacija\" id=\"specijalizacija\" placeholder=\"Унесите специјализацију\" [(ngModel)]=\"specijalizacija\" required>\n              <label for=\"ime\">Специјализација</label>\n            </div>\n          </div>\n        </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Откажи</button>\n          <button type=\"button\" class=\"btn btn-primary\" (click)=\"dodaj_radnika()\">Додај радника</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"modal fade\" id=\"zahtev_radna_mesta\" tabindex=\"-1\" aria-labelledby=\"zahtev_radna_mesta\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">Пошаљи захтев за радна места</h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n            <div class=\"alert alert-{{greska ? 'danger' : 'primary'}} d-flex align-items-center\" role=\"alert\" *ngIf=\"greska || uspeh\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-triangle-fill flex-shrink-0 me-2\" viewBox=\"0 0 16 16\" role=\"img\" aria-label=\"Warning:\">\n                <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\n                </svg>\n                <div>\n                {{greska ? greska : uspeh}} <span>{{brojac}}</span>\n                </div>\n            </div>\n            Број захтеваних радних места:\n            <input type=\"number\" class=\"form-control\" [(ngModel)]=\"br_mesta_uneto\">\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" #dodaj_radnika>Одустани</button>\n          <button type=\"button\" class=\"btn btn-primary\" (click)=\"posalji_zahtev_za_radna()\">Пошаљи</button>\n        </div>\n      </div>\n    </div>\n  </div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Korisnik } from '../models/korisnik';\nimport { RadniciService } from '../radnici.service';\nimport { Radnik } from '../models/radnik';\nimport { ZahtevRadnaMesta } from '../models/zahtev_radna_mesta';\n\n@Component({\n  selector: 'app-agencija-radnici',\n  templateUrl: './agencija-radnici.component.html',\n  styleUrls: ['./agencija-radnici.component.css']\n})\nexport class AgencijaRadniciComponent implements OnInit {\n\n  constructor(private servis:RadniciService) { }\n\n  ulogovan:Korisnik\n  radnici:Radnik[] = []\n  slobodni:number=0\n  br_radnika:number = 0;\n  br_radnih_mesta_odobreno:number=0;\n  br_radnih_mesta_na_cekanju:number=0;\n  ime:string;\n  prezime:string;\n  mejl:string;\n  telefon:number = null;\n  specijalizacija:string;\n  ngOnInit(): void {\n    this.ulogovan = JSON.parse(localStorage.getItem(\"agencija\"))\n    this.servis.dohvati_sve_za_agenciju(this.ulogovan.korisnicko_ime).subscribe((res:Radnik[])=>{\n      if(res.length){\n        this.radnici = res\n        this.br_radnika = this.radnici.length\n        for(let r of this.radnici){\n          if(!r.aganzovan) this.slobodni++\n        }\n      }\n    })\n    this.servis.dohvati_zahteve_za_radna_mesta_za_agenciju(this.ulogovan.korisnicko_ime).subscribe((res:ZahtevRadnaMesta[])=>{\n      if(res.length){\n        for(let r of res){\n          if(r.status=='odobreno') this.br_radnih_mesta_odobreno+=r.broj_mesta\n          else if(r.status=='poslato') this.br_radnih_mesta_na_cekanju+=r.broj_mesta\n        }\n      }\n      \n    })\n  }\n  br_mesta_uneto:number;\n  uspeh:string \n  greska:string \n  mejl_format_greska:boolean=false\n  @ViewChild('dodaj_radnika') modal_dodaj_radnika;\n  brojac:number;\n  telefon_validan:boolean = true\n  check(){\n    this.format_mejl()\n  }\n  format_mejl(){\n    this.mejl_format_greska =  !(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.mejl));\n  }\n  telefon_provera(){\n    if(this.telefon.toString().length>5) this.telefon_validan = true;\n    else this.telefon_validan = false\n  }\n  posalji_zahtev_za_radna(){\n    const sleep = async (milliseconds) => {\n      await new Promise(resolve => {\n          return setTimeout(resolve, milliseconds)\n      });}\n    if(!this.br_mesta_uneto || this.br_mesta_uneto==0) return;\n    this.servis.dodaj_zahtev_za_radna_mesta(this.ulogovan.korisnicko_ime, this.br_mesta_uneto).subscribe(async (res)=>{\n      if(res){\n        this.br_radnih_mesta_na_cekanju += this.br_mesta_uneto\n        \n        this.uspeh = \"Успешно послат захтев за радна места, количина \"+this.br_mesta_uneto+\". Прозор ће се затворити за: \"\n        this.br_mesta_uneto = null\n        this.brojac = 5\n        setTimeout(()=>{\n          this.uspeh = null\n          this.modal_dodaj_radnika.nativeElement.click();\n        },5000)\n        for (let i = 5; i >0; i--) {\n          await sleep(1000);\n          this.brojac--;\n          \n      }\n      }\n    }\n    )\n  }\n  \n\n\n}\n"]},"metadata":{},"sourceType":"module"}