{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../korisnik.service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"../broadcast.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction KlijentPocetnaComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 35);\n    i0.ɵɵelement(2, \"use\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.poruka_o_stanju, \" \");\n  }\n}\n\nfunction KlijentPocetnaComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.greska, \" \");\n  }\n}\n\nfunction KlijentPocetnaComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" \\u041C\\u0435\\u0458\\u043B \\u043D\\u0438\\u0458\\u0435 \\u0443 \\u0434\\u043E\\u0431\\u0440\\u043E\\u043C \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u0443 \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction KlijentPocetnaComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" \\u041E\\u0432\\u0430 \\u043C\\u0435\\u0458\\u043B \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 \\u0458\\u0435 \\u0440\\u0435\\u0433\\u043E\\u0441\\u0442\\u0440\\u043E\\u0432\\u0430\\u043D\\u0430 \\u0441\\u0430 \\u0434\\u0440\\u0443\\u0433\\u0438\\u043C \\u043D\\u0430\\u043B\\u043E\\u0433\\u043E\\u043C. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction KlijentPocetnaComponent_p_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 9);\n    i0.ɵɵtext(1, \"\\u041F\\u0440\\u0435\\u0433\\u043B\\u0435\\u0434 \\u043F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0459\\u0435\\u043D\\u0435 \\u0441\\u043B\\u0438\\u043A\\u0435:\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction KlijentPocetnaComponent_img_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 6);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r5.imageSrc, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport class KlijentPocetnaComponent {\n  constructor(korisnikService, http, broadcastService) {\n    this.korisnikService = korisnikService;\n    this.http = http;\n    this.broadcastService = broadcastService;\n    this.img_err = false;\n    this.filename_server = \"\";\n    this.slanje_u_toku = false;\n  }\n\n  fileChange(element) {\n    this.uploadedFiles = element.target.files;\n    let event = element;\n    let reader = new FileReader();\n\n    if (event.target.files && event.target.files.length) {\n      const [file] = event.target.files;\n      reader.readAsDataURL(file);\n\n      reader.onload = () => {\n        this.imageSrc = reader.result;\n      };\n\n      let img = new Image();\n      img.src = window.URL.createObjectURL(event.target.files[0]);\n\n      img.onload = () => {\n        this.img_w = img.width;\n        this.img_h = img.height;\n        let val = this.img_h > 300 || this.img_h < 100 || this.img_w < 100 || this.img_w > 300;\n        this.greska = val ? \"слика није одговарајуће величоне\" : null;\n\n        if (val) {\n          this.imageSrc = null;\n          this.uploadedFiles = null;\n          this.img_err = true;\n        } else {\n          this.img_err = false;\n        }\n      };\n    } else {\n      this.uploadedFiles = null;\n      this.imageSrc = null;\n    }\n  }\n\n  ngOnInit() {\n    this.korisnikService.sviKorisnici().subscribe(kIzBaze => {\n      this.korisnici = kIzBaze;\n    });\n    this.ulogovan = JSON.parse(localStorage.getItem(\"klijent\")) || JSON.parse(localStorage.getItem(\"agencija\"));\n    this.ime = this.ulogovan.dodatno.ime;\n    this.prezime = this.ulogovan.dodatno.prezime;\n    this.mejl = this.ulogovan.imejl;\n    this.telefon = this.ulogovan.br_telefona;\n  }\n\n  format_mejl() {\n    if (this.greska) this.greska != null;\n    return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.mejl);\n  }\n\n  check() {\n    if (this.greska) this.greska != null;\n    let set_in_iter_mejl = false;\n    if (!this.korisnici) return;\n    this.korisnici.forEach(clan => {\n      if (clan.imejl == this.mejl && clan.korisnicko_ime != this.ulogovan.korisnicko_ime) {\n        this.postoji_mejl = true;\n        set_in_iter_mejl = true;\n      } else if (!set_in_iter_mejl) this.postoji_mejl = false;\n    });\n    return;\n  }\n\n  azuriraj_ulogovan(prof) {\n    this.ulogovan.dodatno['ime'] = this.ime;\n    this.ulogovan.dodatno['prezime'] = this.prezime;\n    this.ulogovan.br_telefona = this.telefon;\n    this.ulogovan.imejl = this.mejl;\n    this.ulogovan.profilna_slika = prof;\n    localStorage.removeItem(\"klijent\");\n    localStorage.setItem(\"klijent\", JSON.stringify(this.ulogovan));\n    this.broadcastService.azurirajUlogovanog.next({\n      status: 1\n    });\n    this.ngOnInit();\n    this.uploadedFiles = null;\n    this.imageSrc = null;\n    setTimeout(() => {\n      this.poruka_o_stanju = null;\n    }, 5000);\n  }\n\n  azuriraj() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.postoji_mejl || !_this.ime || !_this.prezime || !_this.telefon || !_this.mejl || !_this.format_mejl() || _this.img_err) {\n        _this.greska = \"Неисправно унети подаци!\";\n        return;\n      }\n\n      _this.slanje_u_toku = true;\n\n      if (_this.uploadedFiles) {\n        if (_this.uploadedFiles.length != 0) {\n          let formData = new FormData();\n\n          for (var i = 0; i < _this.uploadedFiles.length; i++) {\n            formData.append(\"uploads[]\", _this.uploadedFiles[i], _this.uploadedFiles[i].name);\n          }\n\n          yield _this.http.post('http://localhost:4000/fajlovi/otpremanje', formData).subscribe( /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator(function* (response) {\n              if (_this.ulogovan.profilna_slika != '') yield _this.http.get('http://localhost:4000/brisanje_slike/' + _this.ulogovan.profilna_slika).subscribe();\n              _this.filename_server = response.fileName;\n\n              _this.korisnikService.azuriraj_klijenta(_this.ulogovan.korisnicko_ime, _this.ime, _this.prezime, _this.telefon, _this.mejl, _this.filename_server).subscribe( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator(function* (respObj) {\n                  if (respObj['message'] == \"ok\") {\n                    window.scroll({\n                      top: 0,\n                      left: 0,\n                      behavior: 'smooth'\n                    });\n                    _this.slanje_u_toku = false;\n                    _this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n\n                    _this.azuriraj_ulogovan(_this.filename_server);\n                  }\n                });\n\n                return function (_x2) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n            });\n\n            return function (_x) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        } else {\n          _this.korisnikService.azuriraj_klijenta(_this.ulogovan.korisnicko_ime, _this.ime, _this.prezime, _this.telefon, _this.mejl, _this.ulogovan.profilna_slika).subscribe( /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(function* (respObj) {\n              if (respObj['message'] == \"ok\") {\n                window.scroll({\n                  top: 0,\n                  left: 0,\n                  behavior: 'smooth'\n                });\n                _this.slanje_u_toku = false;\n                _this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n\n                _this.azuriraj_ulogovan(_this.ulogovan.profilna_slika);\n              } else {}\n            });\n\n            return function (_x3) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n        }\n      } else {\n        _this.korisnikService.azuriraj_klijenta(_this.ulogovan.korisnicko_ime, _this.ime, _this.prezime, _this.telefon, _this.mejl, _this.ulogovan.profilna_slika).subscribe( /*#__PURE__*/function () {\n          var _ref4 = _asyncToGenerator(function* (respObj) {\n            if (respObj['message'] == \"ok\") {\n              window.scroll({\n                top: 0,\n                left: 0,\n                behavior: 'smooth'\n              });\n              _this.slanje_u_toku = false;\n              _this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n\n              _this.azuriraj_ulogovan(_this.ulogovan.profilna_slika);\n            }\n          });\n\n          return function (_x4) {\n            return _ref4.apply(this, arguments);\n          };\n        }());\n      }\n    })();\n  }\n\n}\n\nKlijentPocetnaComponent.ɵfac = function KlijentPocetnaComponent_Factory(t) {\n  return new (t || KlijentPocetnaComponent)(i0.ɵɵdirectiveInject(i1.KorisnikService), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.BroadcastService));\n};\n\nKlijentPocetnaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: KlijentPocetnaComponent,\n  selectors: [[\"app-klijent-pocetna\"]],\n  decls: 72,\n  vars: 17,\n  consts: [[1, \"container\"], [1, \"row\"], [\"id\", \"info\", 1, \"col\", \"rounded-3\", \"text-white\", \"me-3\"], [1, \"mt-3\"], [3, \"value\"], [1, \"mb-2\"], [3, \"src\"], [\"id\", \"azuriraj\", 1, \"col\", \"rounded-3\", \"text-white\"], [1, \"container\", \"mt-4\", \"text-dark\"], [1, \"text-white\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", 2, \"display\", \"none\"], [\"id\", \"info-fill\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\"], [\"d\", \"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"], [\"class\", \"alert alert-primary d-flex align-items-center\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"col\"], [1, \"form-floating\", \"mb-4\"], [\"type\", \"text\", \"name\", \"ime\", \"id\", \"ime\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u0438\\u043C\\u0435\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"ime\"], [\"type\", \"text\", \"name\", \"prezime\", \"id\", \"prezime\", \"placeholder\", \"\\u041F\\u0440\\u0435\\u0437\\u0438\\u043C\\u0435\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"prezime\"], [\"type\", \"number\", \"name\", \"br_tel\", \"id\", \"br_tel\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"lozinka\"], [\"type\", \"email\", \"name\", \"mejl\", \"id\", \"mejl\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u043C\\u0435\\u0458\\u043B\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"for\", \"mejl\"], [1, \"row\", \"mb-2\"], [1, \"col-9\"], [1, \"mb-3\"], [\"for\", \"formFile\", 1, \"form-label\", \"text-white\"], [\"type\", \"file\", \"id\", \"formFile\", \"name\", \"prof_slika\", \"accept\", \"image/png, image/jpeg\", 1, \"form-control\", 3, \"src\", \"change\"], [\"class\", \"text-white\", 4, \"ngIf\"], [3, \"src\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-between\", \"mb-3\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-primary\", \"d-flex\", \"align-items-center\"], [\"width\", \"24\", \"height\", \"24\", \"role\", \"img\", \"aria-label\", \"Info:\", 1, \"bi\", \"flex-shrink-0\", \"me-2\"], [0, \"xlink\", \"href\", \"#info-fill\"], [1, \"alert\", \"alert-danger\"]],\n  template: function KlijentPocetnaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"p\")(5, \"strong\");\n      i0.ɵɵtext(6, \"\\u0418\\u043C\\u0435: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"p\")(9, \"strong\");\n      i0.ɵɵtext(10, \"\\u041F\\u0440\\u0435\\u0437\\u0438\\u043C\\u0435: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(11, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"p\")(13, \"strong\");\n      i0.ɵɵtext(14, \"\\u0418-\\u043C\\u0435\\u0458\\u043B \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"p\")(17, \"strong\");\n      i0.ɵɵtext(18, \"\\u0411\\u0440\\u043E\\u0458 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\")(21, \"strong\");\n      i0.ɵɵtext(22, \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u043D\\u0430 \\u0441\\u043B\\u0438\\u043A\\u0430:\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 5);\n      i0.ɵɵelement(24, \"img\", 6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(25, \"div\", 7)(26, \"div\", 8)(27, \"h5\", 9);\n      i0.ɵɵtext(28, \"\\u0423\\u0440\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0458\\u0435 \\u043F\\u043E\\u0434\\u0430\\u0442\\u043A\\u0435\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(29, \"svg\", 10)(30, \"symbol\", 11);\n      i0.ɵɵelement(31, \"path\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(32, KlijentPocetnaComponent_div_32_Template, 5, 1, \"div\", 13);\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(33, \"div\");\n      i0.ɵɵtemplate(34, KlijentPocetnaComponent_div_34_Template, 2, 1, \"div\", 14);\n      i0.ɵɵtemplate(35, KlijentPocetnaComponent_div_35_Template, 2, 0, \"div\", 14);\n      i0.ɵɵtemplate(36, KlijentPocetnaComponent_div_36_Template, 2, 0, \"div\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"div\", 1)(38, \"div\", 15)(39, \"div\", 16)(40, \"input\", 17);\n      i0.ɵɵlistener(\"ngModelChange\", function KlijentPocetnaComponent_Template_input_ngModelChange_40_listener($event) {\n        return ctx.ime = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"label\", 18);\n      i0.ɵɵtext(42, \"\\u0418\\u043C\\u0435\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(43, \"div\", 15)(44, \"div\", 16)(45, \"input\", 19);\n      i0.ɵɵlistener(\"ngModelChange\", function KlijentPocetnaComponent_Template_input_ngModelChange_45_listener($event) {\n        return ctx.prezime = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"label\", 20);\n      i0.ɵɵtext(47, \"\\u041F\\u0440\\u0435\\u0437\\u0438\\u043C\\u0435\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(48, \"div\", 1)(49, \"div\", 15)(50, \"div\", 16)(51, \"input\", 21);\n      i0.ɵɵlistener(\"ngModelChange\", function KlijentPocetnaComponent_Template_input_ngModelChange_51_listener($event) {\n        return ctx.telefon = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(52, \"label\", 22);\n      i0.ɵɵtext(53, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(54, \"div\", 15)(55, \"div\", 16)(56, \"input\", 23);\n      i0.ɵɵlistener(\"ngModelChange\", function KlijentPocetnaComponent_Template_input_ngModelChange_56_listener($event) {\n        return ctx.mejl = $event;\n      })(\"input\", function KlijentPocetnaComponent_Template_input_input_56_listener() {\n        return ctx.check();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"label\", 24);\n      i0.ɵɵtext(58, \"\\u041C\\u0435\\u0458\\u043B \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(59, \"div\", 25)(60, \"div\", 26)(61, \"div\", 27)(62, \"label\", 28);\n      i0.ɵɵtext(63, \"\\u041F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u043D\\u0443 \\u0441\\u043B\\u0438\\u043A\\u0443 (\\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0430\\u0437\\u043D\\u043E \\u0430\\u043A\\u043E \\u043D\\u0435 \\u0436\\u0435\\u043B\\u0438\\u0442\\u0435 \\u0434\\u0430 \\u043C\\u0435\\u045A\\u0430\\u0442\\u0435)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(64, \"input\", 29);\n      i0.ɵɵlistener(\"change\", function KlijentPocetnaComponent_Template_input_change_64_listener($event) {\n        return ctx.fileChange($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(65, \"div\", 15);\n      i0.ɵɵtemplate(66, KlijentPocetnaComponent_p_66_Template, 2, 0, \"p\", 30);\n      i0.ɵɵtemplate(67, KlijentPocetnaComponent_img_67_Template, 1, 1, \"img\", 31);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(68, \"div\", 32);\n      i0.ɵɵelement(69, \"span\");\n      i0.ɵɵelementStart(70, \"button\", 33);\n      i0.ɵɵlistener(\"click\", function KlijentPocetnaComponent_Template_button_click_70_listener() {\n        return ctx.azuriraj();\n      });\n      i0.ɵɵtext(71, \"\\u0410\\u0436\\u0443\\u0440\\u0438\\u0440\\u0430\\u0458\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.dodatno.ime);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.dodatno.prezime);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.imejl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.br_telefona);\n      i0.ɵɵadvance(5);\n      i0.ɵɵpropertyInterpolate1(\"src\", \"http://localhost:4000/prikaz_slike/\", ctx.ulogovan.profilna_slika != \"\" || ctx.ulogovan.profilna_slika ? ctx.ulogovan.profilna_slika : \"podrazumevano_klijent.jpeg\", \"\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.poruka_o_stanju);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.greska != null);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.format_mejl() && ctx.mejl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.postoji_mejl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.ime);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.prezime);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(8);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.uploadedFiles, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.imageSrc);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.imageSrc);\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"disabled\", ctx.postoji_mejl || !ctx.ime || !ctx.prezime || !ctx.telefon || !ctx.mejl || !ctx.format_mejl() || ctx.img_err ? \"disabled\" : \"\");\n    }\n  },\n  dependencies: [i4.NgIf, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.RequiredValidator, i5.NgModel],\n  styles: [\"#info[_ngcontent-%COMP%]{\\r\\n    background-color: rgba(112, 86, 109, 0.5);\\r\\n}\\r\\n#azuriraj[_ngcontent-%COMP%]{\\r\\n    background-color: rgba(112, 86, 109, 0.8);\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtsaWplbnQtcG9jZXRuYS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0kseUNBQXlDO0FBQzdDO0FBQ0E7SUFDSSx5Q0FBeUM7QUFDN0MiLCJmaWxlIjoia2xpamVudC1wb2NldG5hLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjaW5mb3tcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTEyLCA4NiwgMTA5LCAwLjUpO1xyXG59XHJcbiNhenVyaXJhantcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTEyLCA4NiwgMTA5LCAwLjgpO1xyXG59XHJcbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","KlijentPocetnaComponent","constructor","korisnikService","http","broadcastService","fileChange","element","uploadedFiles","target","files","event","reader","FileReader","length","file","readAsDataURL","onload","imageSrc","result","img","Image","src","window","URL","createObjectURL","img_w","width","img_h","height","val","greska","img_err","ngOnInit","sviKorisnici","subscribe","kIzBaze","korisnici","ulogovan","JSON","parse","localStorage","getItem","ime","dodatno","prezime","mejl","imejl","telefon","br_telefona","format_mejl","test","check","set_in_iter_mejl","forEach","clan","korisnicko_ime","postoji_mejl","azuriraj_ulogovan","prof","profilna_slika","removeItem","setItem","stringify","azurirajUlogovanog","next","status","setTimeout","poruka_o_stanju","azuriraj","slanje_u_toku","formData","FormData","i","append","name","post","response","get","filename_server","fileName","azuriraj_klijenta","respObj","scroll","top","left","behavior","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\klijent-pocetna\\klijent-pocetna.component.html","C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\klijent-pocetna\\klijent-pocetna.component.ts"],"sourcesContent":["<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col rounded-3 text-white me-3\" id=\"info\">\n            <div class=\"mt-3\">\n            <p><strong>Име: </strong> <output value=\"{{ulogovan.dodatno.ime}}\"></output></p>\n            <p><strong>Презиме: </strong>  <output value=\"{{ulogovan.dodatno.prezime}}\"></output></p>\n            <p><strong>И-мејл адреса: </strong> <output value=\"{{ulogovan.imejl}}\"></output></p>\n            <p><strong>Број телефона: </strong> <output value=\"{{ulogovan.br_telefona}}\"></output></p>\n                <div ><strong>Профилна слика:</strong></div>\n                <div class=\"mb-2\"><img src=\"http://localhost:4000/prikaz_slike/{{ulogovan.profilna_slika!='' || ulogovan.profilna_slika  ? ulogovan.profilna_slika:'podrazumevano_klijent.jpeg'}}\" ></div>\n            </div>\n\n        </div>\n        <div class=\"col rounded-3 text-white\" id=\"azuriraj\">\n           \n            <div class=\"container mt-4 text-dark\">\n                \n                <h5 class=\"text-white\">Уредите своје податке</h5>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n        \n                    <symbol id=\"info-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n                      <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>\n                    </symbol>\n                  </svg>\n                  \n                  <div class=\"alert alert-primary d-flex align-items-center\" role=\"alert\" *ngIf=\"poruka_o_stanju\">\n                    <svg class=\"bi flex-shrink-0 me-2\" width=\"24\" height=\"24\" role=\"img\" aria-label=\"Info:\"><use xlink:href=\"#info-fill\"/></svg>\n                    <div>\n                      {{poruka_o_stanju}}\n                    </div>\n                  </div>\n                <div >\n                    <div class=\"alert alert-danger\" *ngIf=\"greska!=null\">\n                        {{greska}}\n                      </div>\n                      <div class=\"alert alert-danger\" *ngIf=\"!format_mejl() && mejl\">\n                        Мејл није у добром формату\n                      </div>\n                      <div class=\"alert alert-danger\" *ngIf=\"postoji_mejl\">\n                        Ова мејл адреса је регострована са другим налогом.\n                      </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col\">\n                    <div class=\"form-floating mb-4\">\n                        <input type=\"text\" class=\"form-control\" name=\"ime\" id=\"ime\" placeholder=\"Унесите име\" [(ngModel)]=\"ime\" required>\n                        <label for=\"ime\">Име</label>\n                    </div>\n                    </div>\n                    <div class=\"col\">\n                    <div class=\"form-floating mb-4\">\n                        <input type=\"text\" class=\"form-control \" name=\"prezime\" id=\"prezime\" placeholder=\"Презиме\" [(ngModel)]=\"prezime\"  required>\n                        <label for=\"prezime\">Презиме</label>\n                    </div>\n                    </div>\n                 \n               </div>\n                   <div class=\"row\">\n                    <div class=\"col\">\n                    <div class=\"form-floating mb-4\">\n                        <input type=\"number\" class=\"form-control\" name=\"br_tel\" id=\"br_tel\" placeholder=\"Унесите телефон\" [(ngModel)]=\"telefon\" required>\n                        <label for=\"lozinka\">Телефон</label>\n                    </div>\n                    </div>\n                    <div class=\"col\">\n                    <div class=\"form-floating mb-4\">\n                        <input type=\"email\" class=\"form-control \" name=\"mejl\" id=\"mejl\" placeholder=\"Унесите мејл\"  required [(ngModel)]=\"mejl\" (input)=\"check()\" >\n                        <label for=\"mejl\">Мејл адреса</label>\n                    </div>\n                    </div>\n                 \n               </div>\n               <div class=\"row mb-2\">\n                <div class=\"col-9\">\n               <div class=\"mb-3\">\n                <label for=\"formFile\" class=\"form-label text-white\">Поставите профилну слику (оставите празно ако не желите да мењате)</label>\n                <input class=\"form-control\" type=\"file\" id=\"formFile\" name=\"prof_slika\" accept=\"image/png, image/jpeg\" (change)=\"fileChange($event)\" src=\"{{uploadedFiles}}\">\n              </div>\n              </div>\n              <div class=\"col\">\n                <p *ngIf=\"imageSrc\" class=\"text-white\">Преглед постављене слике:</p>\n                <img [src]=\"imageSrc\" *ngIf=\"imageSrc\" >\n              </div>\n              </div>\n              <div class=\"d-flex justify-content-between mb-3\">\n                <span></span>\n                <button class=\"btn btn-primary\" (click)=\"azuriraj()\"  disabled=\"{{((this.postoji_mejl)  || !ime || !prezime || !telefon || !mejl ||!format_mejl() || img_err) ? 'disabled':''}}\">Ажурирај</button>\n                \n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { Korisnik } from '../models/korisnik';\nimport { KorisnikService } from '../korisnik.service';\nimport { HttpClient } from '@angular/common/http';\nimport { BroadcastService } from '../broadcast.service';\n\n@Component({\n  selector: 'app-klijent-pocetna',\n  templateUrl: './klijent-pocetna.component.html',\n  styleUrls: ['./klijent-pocetna.component.css']\n})\nexport class KlijentPocetnaComponent implements OnInit {\n\n  constructor(private korisnikService: KorisnikService, private http:HttpClient, private broadcastService: BroadcastService) { \n\n  }\n\n  //fu\n  greska:string;\n  uploadedFiles: Array < File > ;\n  imageSrc: string;\n  img_w:number;\n  img_h:number;\n  img_err:boolean =false;\n  filename_server : string = \"\";\n  slanje_u_toku : boolean = false;\n  \n  fileChange(element) {\n    this.uploadedFiles = element.target.files;\n    \n    let event = element;\n    let reader = new FileReader();\n    \n    if(event.target.files && event.target.files.length) {\n      const [file] = event.target.files;\n      reader.readAsDataURL(file);\n    \n      reader.onload = () => {\n   \n        this.imageSrc = reader.result as string;\n        \n   \n      };\n      \n      let img = new Image()\n      img.src = window.URL.createObjectURL(event.target.files[0])\n      img.onload = () => {\n        this.img_w = img.width;\n        this.img_h = img.height;\n        let val = (this.img_h > 300 ||this.img_h <100 || this.img_w <100 || this.img_w >300 ) \n        this.greska =val? \"слика није одговарајуће величоне\" : null\n        if(val){\n          this.imageSrc = null;\n          this.uploadedFiles=null;\n          this.img_err = true;\n        }else{\n          this.img_err = false;\n          \n        }\n      }\n      \n    }else{\n      this.uploadedFiles = null;\n      this.imageSrc = null;\n    }\n\n\n  \n    \n  }\n  //endfu\n  ulogovan: any;\n  ime: string;\n  prezime: string;\n  telefon: number;\n  mejl: string;\n  korisnici: Korisnik[]\n  postoji_mejl:boolean;\n  poruka_o_stanju:string;\n\n  ngOnInit(): void {\n    this.korisnikService.sviKorisnici().subscribe((kIzBaze: Korisnik[])=>{\n      this.korisnici = kIzBaze;\n    })\n    this.ulogovan = JSON.parse(localStorage.getItem(\"klijent\")) || JSON.parse(localStorage.getItem(\"agencija\"));\n    this.ime = this.ulogovan.dodatno.ime;\n    this.prezime = this.ulogovan.dodatno.prezime\n    this.mejl = this.ulogovan.imejl\n    this.telefon = this.ulogovan.br_telefona\n  }\n  format_mejl(){\n    if(this.greska) this.greska!=null;\n    return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.mejl);\n  }\n  check() {\n    if(this.greska) this.greska!=null;\n    let set_in_iter_mejl = false;\n    \n      if(!this.korisnici) return;\n      this.korisnici.forEach( (clan)=>{\n        \n        if(clan.imejl==this.mejl && clan.korisnicko_ime!=this.ulogovan.korisnicko_ime){\n          this.postoji_mejl = true;\n          set_in_iter_mejl = true;\n        }\n        else if(!set_in_iter_mejl)  this.postoji_mejl  = false;\n      \n    }\n    )\n    return ;\n  }\n\n  azuriraj_ulogovan(prof){\n    this.ulogovan.dodatno['ime'] = this.ime;\n    this.ulogovan.dodatno['prezime'] = this.prezime;\n    this.ulogovan.br_telefona = this.telefon;\n    this.ulogovan.imejl = this.mejl\n    this.ulogovan.profilna_slika = prof;\n    localStorage.removeItem(\"klijent\");\n   \n    localStorage.setItem(\"klijent\", JSON.stringify(this.ulogovan));\n    this.broadcastService.azurirajUlogovanog.next({ status: 1 });\n    this.ngOnInit();\n    this.uploadedFiles = null;\n    this.imageSrc = null;\n    setTimeout(()=>{\n      this.poruka_o_stanju = null\n    }, 5000)\n\n  }\n  async azuriraj(){\n    if(((this.postoji_mejl)  || !this.ime || !this.prezime || !this.telefon || !this.mejl ||!this.format_mejl() || this.img_err)){\n      this.greska = \"Неисправно унети подаци!\";\n      return;\n    }\n\n    this.slanje_u_toku = true;\n    if(this.uploadedFiles){\n      if(this.uploadedFiles.length!=0){\n        interface responseExtended extends Response{\n          fileName:any;\n        }\n        let formData = new FormData();\n        for (var i = 0; i < this.uploadedFiles.length; i++) {\n            formData.append(\"uploads[]\", this.uploadedFiles[i], this.uploadedFiles[i].name);\n        }\n        \n      \n       \n        await this.http.post('http://localhost:4000/fajlovi/otpremanje', formData)\n            .subscribe(async (response : responseExtended) => {\n                if(this.ulogovan.profilna_slika!='')await this.http.get('http://localhost:4000/brisanje_slike/'+this.ulogovan.profilna_slika).subscribe();\n                this.filename_server =  response.fileName;\n                this.korisnikService.azuriraj_klijenta(this.ulogovan.korisnicko_ime,this.ime, this.prezime, this.telefon, this.mejl, this.filename_server).subscribe(async respObj=>{\n                  if(respObj['message']==\"ok\") {\n                    window.scroll({ \n                      top: 0, \n                      left: 0, \n                      behavior: 'smooth' \n                    });\n                    this.slanje_u_toku = false;\n                    this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n                    this.azuriraj_ulogovan(this.filename_server)\n                  }\n                });\n            })\n      }\n      else{\n\n        this.korisnikService.azuriraj_klijenta(this.ulogovan.korisnicko_ime, this.ime, this.prezime, this.telefon, this.mejl, this.ulogovan.profilna_slika).subscribe(async respObj=>{\n          if(respObj['message']==\"ok\") {\n            window.scroll({ \n              top: 0, \n              left: 0, \n              behavior: 'smooth' \n            });\n            this.slanje_u_toku = false;\n            this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n            this.azuriraj_ulogovan(this.ulogovan.profilna_slika)\n          }else{\n          }\n        });\n      }\n    }else{\n\n    this.korisnikService.azuriraj_klijenta(this.ulogovan.korisnicko_ime,this.ime, this.prezime, this.telefon, this.mejl,  this.ulogovan.profilna_slika).subscribe(async respObj=>{\n      if(respObj['message']==\"ok\") {\n        window.scroll({ \n          top: 0, \n          left: 0, \n          behavior: 'smooth' \n        });\n        this.slanje_u_toku = false;\n        this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n        this.azuriraj_ulogovan(this.ulogovan.profilna_slika)\n      }\n    });\n  }\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}