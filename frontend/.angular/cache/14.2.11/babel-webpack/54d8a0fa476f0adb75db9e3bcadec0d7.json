{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../korisnik.service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"../broadcast.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction AgencijaProfilComponent_span_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"(\\u043F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0443\\u043C\\u0435\\u0432\\u0430\\u043D\\u043E)\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AgencijaProfilComponent_span_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 38);\n    i0.ɵɵlistener(\"click\", function AgencijaProfilComponent_span_34_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.obrisi_sliku());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 39);\n    i0.ɵɵelement(2, \"path\", 40);\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AgencijaProfilComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 42);\n    i0.ɵɵelement(2, \"use\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.poruka_o_stanju, \" \");\n  }\n}\n\nfunction AgencijaProfilComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.greska, \" \");\n  }\n}\n\nfunction AgencijaProfilComponent_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵtext(1, \" \\u041C\\u0435\\u0458\\u043B \\u043D\\u0438\\u0458\\u0435 \\u0443 \\u0434\\u043E\\u0431\\u0440\\u043E\\u043C \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u0443 \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AgencijaProfilComponent_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵtext(1, \" \\u041E\\u0432\\u0430 \\u043C\\u0435\\u0458\\u043B \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 \\u0458\\u0435 \\u0440\\u0435\\u0433\\u043E\\u0441\\u0442\\u0440\\u043E\\u0432\\u0430\\u043D\\u0430 \\u0441\\u0430 \\u0434\\u0440\\u0443\\u0433\\u0438\\u043C \\u043D\\u0430\\u043B\\u043E\\u0433\\u043E\\u043C. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AgencijaProfilComponent_p_82_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 11);\n    i0.ɵɵtext(1, \"\\u041F\\u0440\\u0435\\u0433\\u043B\\u0435\\u0434 \\u043F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0459\\u0435\\u043D\\u0435 \\u0441\\u043B\\u0438\\u043A\\u0435:\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AgencijaProfilComponent_img_83_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r7.imageSrc, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport class AgencijaProfilComponent {\n  constructor(korisnikService, http, broadcastService) {\n    this.korisnikService = korisnikService;\n    this.http = http;\n    this.broadcastService = broadcastService;\n    this.img_err = false;\n    this.filename_server = \"\";\n    this.slanje_u_toku = false;\n    this.postoji_mejl = false;\n  }\n\n  fileChange(element) {\n    this.uploadedFiles = element.target.files;\n    let event = element;\n    let reader = new FileReader();\n\n    if (event.target.files && event.target.files.length) {\n      const [file] = event.target.files;\n      reader.readAsDataURL(file);\n\n      reader.onload = () => {\n        this.imageSrc = reader.result;\n      };\n\n      let img = new Image();\n      img.src = window.URL.createObjectURL(event.target.files[0]);\n\n      img.onload = () => {\n        this.img_w = img.width;\n        this.img_h = img.height;\n        let val = this.img_h > 300 || this.img_h < 100 || this.img_w < 100 || this.img_w > 300;\n        this.greska = val ? \"слика није одговарајуће величоне\" : null;\n\n        if (val) {\n          this.imageSrc = null;\n          this.uploadedFiles = null;\n          this.img_err = true;\n        } else {\n          this.img_err = false;\n        }\n      };\n    } else {\n      this.uploadedFiles = null;\n      this.imageSrc = null;\n    }\n  }\n\n  ngOnInit() {\n    this.korisnikService.sviKorisnici().subscribe(kIzBaze => {\n      this.korisnici = kIzBaze;\n    });\n    this.ulogovan = JSON.parse(localStorage.getItem(\"klijent\")) || JSON.parse(localStorage.getItem(\"agencija\"));\n    this.naziv = this.ulogovan.dodatno.naziv;\n    this.opis = this.ulogovan.dodatno.opis;\n    this.adresa = this.ulogovan.dodatno.adresa;\n    this.mejl = this.ulogovan.imejl;\n    this.telefon = this.ulogovan.br_telefona;\n  }\n\n  format_mejl() {\n    if (this.greska) this.greska != null;\n    return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.mejl);\n  }\n\n  check() {\n    if (this.greska) this.greska != null;\n    let set_in_iter_mejl = false;\n    if (!this.korisnici) return;\n    this.korisnici.forEach(clan => {\n      if (clan.imejl == this.mejl && clan.korisnicko_ime != this.ulogovan.korisnicko_ime) {\n        this.postoji_mejl = true;\n        set_in_iter_mejl = true;\n      } else if (!set_in_iter_mejl) this.postoji_mejl = false;\n    });\n    return;\n  }\n\n  azuriraj_ulogovan(prof) {\n    console.log(\"alskesa\");\n    this.ulogovan.dodatno['naziv'] = this.naziv;\n    this.ulogovan.dodatno['adresa'] = this.adresa;\n    this.ulogovan.dodatno['opis'] = this.opis;\n    this.ulogovan.br_telefona = this.telefon;\n    this.ulogovan.imejl = this.mejl;\n    this.ulogovan.profilna_slika = prof;\n    localStorage.removeItem(\"agencija\");\n    localStorage.setItem(\"agencija\", JSON.stringify(this.ulogovan));\n    this.broadcastService.azurirajUlogovanog.next({\n      status: 1\n    });\n    this.ngOnInit();\n    this.uploadedFiles = null;\n    this.imageSrc = null;\n    setTimeout(() => {\n      this.poruka_o_stanju = null;\n    }, 5000);\n  }\n\n  obrisi_sliku() {\n    this.http.get('http://localhost:4000/brisanje_slike/' + this.ulogovan.profilna_slika).subscribe(res => {});\n    this.korisnikService.azuriraj_agenciju(this.ulogovan.korisnicko_ime, this.naziv, this.adresa, this.opis, this.ulogovan.dodatno['maticni_broj'], this.telefon, this.mejl, \"\").subscribe(respObj => {});\n    this.azuriraj_ulogovan(\"\");\n  }\n\n  azuriraj() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.postoji_mejl || !_this.naziv || !_this.adresa || !_this.opis || !_this.telefon || !_this.mejl || !_this.format_mejl() || _this.img_err) {\n        _this.greska = \"Неисправно унети подаци!\";\n        console.log(_this.postoji_mejl);\n        console.log(!_this.naziv);\n        console.log(!_this.adresa);\n        console.log(!_this.opis);\n        console.log(!_this.telefon);\n        console.log(!_this.mejl);\n        console.log(!_this.format_mejl());\n        console.log(_this.img_err);\n        return;\n      }\n\n      _this.slanje_u_toku = true;\n\n      if (_this.uploadedFiles) {\n        if (_this.uploadedFiles.length != 0) {\n          let formData = new FormData();\n\n          for (var i = 0; i < _this.uploadedFiles.length; i++) {\n            formData.append(\"uploads[]\", _this.uploadedFiles[i], _this.uploadedFiles[i].name);\n          }\n\n          yield _this.http.post('http://localhost:4000/fajlovi/otpremanje', formData).subscribe( /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator(function* (response) {\n              if (_this.ulogovan.profilna_slika != '') yield _this.http.get('http://localhost:4000/brisanje_slike/' + _this.ulogovan.profilna_slika).subscribe();\n              _this.filename_server = response.fileName;\n\n              _this.korisnikService.azuriraj_agenciju(_this.ulogovan.korisnicko_ime, _this.naziv, _this.adresa, _this.opis, _this.ulogovan.dodatno['maticni_broj'], _this.telefon, _this.mejl, _this.filename_server).subscribe( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator(function* (respObj) {\n                  if (respObj['message'] == \"ok\") {\n                    window.scroll({\n                      top: 0,\n                      left: 0,\n                      behavior: 'smooth'\n                    });\n                    _this.slanje_u_toku = false;\n                    _this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n\n                    _this.azuriraj_ulogovan(_this.filename_server);\n                  }\n                });\n\n                return function (_x2) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n            });\n\n            return function (_x) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        } else {\n          _this.korisnikService.azuriraj_agenciju(_this.ulogovan.korisnicko_ime, _this.naziv, _this.adresa, _this.opis, _this.ulogovan.dodatno['maticni_broj'], _this.telefon, _this.mejl, _this.ulogovan.profilna_slika).subscribe( /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(function* (respObj) {\n              if (respObj['message'] == \"ok\") {\n                window.scroll({\n                  top: 0,\n                  left: 0,\n                  behavior: 'smooth'\n                });\n                _this.slanje_u_toku = false;\n                _this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n\n                _this.azuriraj_ulogovan(_this.ulogovan.profilna_slika);\n              } else {}\n            });\n\n            return function (_x3) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n        }\n      } else {\n        _this.korisnikService.azuriraj_agenciju(_this.ulogovan.korisnicko_ime, _this.naziv, _this.adresa, _this.opis, _this.ulogovan.dodatno['maticni_broj'], _this.telefon, _this.mejl, _this.ulogovan.profilna_slika).subscribe( /*#__PURE__*/function () {\n          var _ref4 = _asyncToGenerator(function* (respObj) {\n            if (respObj['message'] == \"ok\") {\n              window.scroll({\n                top: 0,\n                left: 0,\n                behavior: 'smooth'\n              });\n              _this.slanje_u_toku = false;\n              _this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n\n              _this.azuriraj_ulogovan(_this.ulogovan.profilna_slika);\n            }\n          });\n\n          return function (_x4) {\n            return _ref4.apply(this, arguments);\n          };\n        }());\n      }\n    })();\n  }\n\n}\n\nAgencijaProfilComponent.ɵfac = function AgencijaProfilComponent_Factory(t) {\n  return new (t || AgencijaProfilComponent)(i0.ɵɵdirectiveInject(i1.KorisnikService), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.BroadcastService));\n};\n\nAgencijaProfilComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AgencijaProfilComponent,\n  selectors: [[\"app-agencija-profil\"]],\n  decls: 88,\n  vars: 22,\n  consts: [[1, \"container\"], [1, \"row\"], [\"id\", \"info\", 1, \"col\", \"rounded-3\", \"text-white\", \"me-3\"], [1, \"mt-3\"], [3, \"value\"], [4, \"ngIf\"], [1, \"mb-2\", \"w-auto\", \"position-relative\"], [3, \"src\"], [\"style\", \"margin-top: -0.5em; color: #ff1b21\", \"class\", \" position-absolute top-0 end-75\", 3, \"click\", 4, \"ngIf\"], [\"id\", \"azuriraj\", 1, \"col\", \"rounded-3\", \"text-white\"], [1, \"container\", \"mt-4\", \"text-dark\"], [1, \"text-white\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", 2, \"display\", \"none\"], [\"id\", \"info-fill\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\"], [\"d\", \"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"], [\"class\", \"alert alert-primary d-flex align-items-center\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"col\"], [1, \"form-floating\", \"mb-4\"], [\"type\", \"text\", \"name\", \"naziv\", \"id\", \"naziv\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u0438\\u043C\\u0435\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"naziv\"], [\"type\", \"text\", \"name\", \"adresa\", \"id\", \"adresa\", \"placeholder\", \"\\u041F\\u0440\\u0435\\u0437\\u0438\\u043C\\u0435\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"adresa\"], [1, \"mb-3\"], [\"for\", \"opis\", 1, \"form-label\"], [\"id\", \"opis\", \"rows\", \"3\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"name\", \"br_tel\", \"id\", \"br_tel\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"lozinka\"], [\"type\", \"email\", \"name\", \"mejl\", \"id\", \"mejl\", \"placeholder\", \"\\u0423\\u043D\\u0435\\u0441\\u0438\\u0442\\u0435 \\u043C\\u0435\\u0458\\u043B\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"for\", \"mejl\"], [1, \"row\", \"mb-2\"], [1, \"col-9\"], [\"for\", \"formFile\", 1, \"form-label\", \"text-white\"], [\"type\", \"file\", \"id\", \"formFile\", \"name\", \"prof_slika\", \"accept\", \"image/png, image/jpeg\", 1, \"form-control\", 3, \"src\", \"change\"], [\"class\", \"text-white\", 4, \"ngIf\"], [3, \"src\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-between\", \"mb-3\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"position-absolute\", \"top-0\", \"end-75\", 2, \"margin-top\", \"-0.5em\", \"color\", \"#ff1b21\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-x-square-fill\"], [\"d\", \"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.354 4.646L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 1 1 .708-.708z\"], [\"role\", \"alert\", 1, \"alert\", \"alert-primary\", \"d-flex\", \"align-items-center\"], [\"width\", \"24\", \"height\", \"24\", \"role\", \"img\", \"aria-label\", \"Info:\", 1, \"bi\", \"flex-shrink-0\", \"me-2\"], [0, \"xlink\", \"href\", \"#info-fill\"], [1, \"alert\", \"alert-danger\"]],\n  template: function AgencijaProfilComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"p\")(5, \"strong\");\n      i0.ɵɵtext(6, \"\\u041D\\u0430\\u0437\\u0438\\u0432: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"p\")(9, \"strong\");\n      i0.ɵɵtext(10, \"\\u0410\\u0434\\u0440\\u0435\\u0441\\u0430: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(11, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"p\")(13, \"strong\");\n      i0.ɵɵtext(14, \"\\u041E\\u043F\\u0438\\u0441: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"p\")(17, \"strong\");\n      i0.ɵɵtext(18, \"\\u041C\\u0430\\u0442\\u0438\\u0447\\u043D\\u0438 \\u0431\\u0440\\u043E\\u0458: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"p\")(21, \"strong\");\n      i0.ɵɵtext(22, \"\\u0418-\\u043C\\u0435\\u0458\\u043B \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"p\")(25, \"strong\");\n      i0.ɵɵtext(26, \"\\u0411\\u0440\\u043E\\u0458 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"output\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\")(29, \"strong\");\n      i0.ɵɵtext(30, \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u043D\\u0430 \\u0441\\u043B\\u0438\\u043A\\u0430: \");\n      i0.ɵɵtemplate(31, AgencijaProfilComponent_span_31_Template, 2, 0, \"span\", 5);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 6);\n      i0.ɵɵelement(33, \"img\", 7);\n      i0.ɵɵtemplate(34, AgencijaProfilComponent_span_34_Template, 3, 0, \"span\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(35, \"div\", 9)(36, \"div\", 10)(37, \"h5\", 11);\n      i0.ɵɵtext(38, \"\\u0423\\u0440\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0458\\u0435 \\u043F\\u043E\\u0434\\u0430\\u0442\\u043A\\u0435\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(39, \"svg\", 12)(40, \"symbol\", 13);\n      i0.ɵɵelement(41, \"path\", 14);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(42, AgencijaProfilComponent_div_42_Template, 5, 1, \"div\", 15);\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(43, \"div\");\n      i0.ɵɵtemplate(44, AgencijaProfilComponent_div_44_Template, 2, 1, \"div\", 16);\n      i0.ɵɵtemplate(45, AgencijaProfilComponent_div_45_Template, 2, 0, \"div\", 16);\n      i0.ɵɵtemplate(46, AgencijaProfilComponent_div_46_Template, 2, 0, \"div\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"div\", 1)(48, \"div\", 17)(49, \"div\", 18)(50, \"input\", 19);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaProfilComponent_Template_input_ngModelChange_50_listener($event) {\n        return ctx.naziv = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"label\", 20);\n      i0.ɵɵtext(52, \"\\u041D\\u0430\\u0437\\u0438\\u0432\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(53, \"div\", 17)(54, \"div\", 18)(55, \"input\", 21);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaProfilComponent_Template_input_ngModelChange_55_listener($event) {\n        return ctx.adresa = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(56, \"label\", 22);\n      i0.ɵɵtext(57, \"\\u0410\\u0434\\u0440\\u0435\\u0441\\u0430\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(58, \"div\", 1)(59, \"div\", 17)(60, \"div\", 23)(61, \"label\", 24);\n      i0.ɵɵtext(62, \"\\u041A\\u0440\\u0430\\u0442\\u0430\\u043A \\u043E\\u043F\\u0438\\u0441 \\u0430\\u0433\\u0435\\u043D\\u0446\\u0438\\u0458\\u0435\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(63, \"textarea\", 25);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaProfilComponent_Template_textarea_ngModelChange_63_listener($event) {\n        return ctx.opis = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(64, \"div\", 1)(65, \"div\", 17)(66, \"div\", 18)(67, \"input\", 26);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaProfilComponent_Template_input_ngModelChange_67_listener($event) {\n        return ctx.telefon = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(68, \"label\", 27);\n      i0.ɵɵtext(69, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(70, \"div\", 17)(71, \"div\", 18)(72, \"input\", 28);\n      i0.ɵɵlistener(\"ngModelChange\", function AgencijaProfilComponent_Template_input_ngModelChange_72_listener($event) {\n        return ctx.mejl = $event;\n      })(\"input\", function AgencijaProfilComponent_Template_input_input_72_listener() {\n        return ctx.check();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(73, \"label\", 29);\n      i0.ɵɵtext(74, \"\\u041C\\u0435\\u0458\\u043B \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(75, \"div\", 30)(76, \"div\", 31)(77, \"div\", 23)(78, \"label\", 32);\n      i0.ɵɵtext(79, \"\\u041F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u043D\\u0443 \\u0441\\u043B\\u0438\\u043A\\u0443 (\\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0430\\u0437\\u043D\\u043E \\u0430\\u043A\\u043E \\u043D\\u0435 \\u0436\\u0435\\u043B\\u0438\\u0442\\u0435 \\u0434\\u0430 \\u043C\\u0435\\u045A\\u0430\\u0442\\u0435)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(80, \"input\", 33);\n      i0.ɵɵlistener(\"change\", function AgencijaProfilComponent_Template_input_change_80_listener($event) {\n        return ctx.fileChange($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(81, \"div\", 17);\n      i0.ɵɵtemplate(82, AgencijaProfilComponent_p_82_Template, 2, 0, \"p\", 34);\n      i0.ɵɵtemplate(83, AgencijaProfilComponent_img_83_Template, 1, 1, \"img\", 35);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(84, \"div\", 36);\n      i0.ɵɵelement(85, \"span\");\n      i0.ɵɵelementStart(86, \"button\", 37);\n      i0.ɵɵlistener(\"click\", function AgencijaProfilComponent_Template_button_click_86_listener() {\n        return ctx.azuriraj();\n      });\n      i0.ɵɵtext(87, \"\\u0410\\u0436\\u0443\\u0440\\u0438\\u0440\\u0430\\u0458\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.dodatno.naziv);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.dodatno.adresa);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.dodatno.opis);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.dodatno.maticni_broj);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.imejl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.ulogovan.br_telefona);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.ulogovan.profilna_slika == \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate1(\"src\", \"http://localhost:4000/prikaz_slike/\", ctx.ulogovan.profilna_slika != \"\" || ctx.ulogovan.profilna_slika ? ctx.ulogovan.profilna_slika : \"podrazumevano_agencija.png\", \"\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ulogovan.profilna_slika != \"\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.poruka_o_stanju);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.greska != null);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.format_mejl() && ctx.mejl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.postoji_mejl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.naziv);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.adresa);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.opis);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(8);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.uploadedFiles, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.imageSrc);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.imageSrc);\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"disabled\", ctx.postoji_mejl || !ctx.naziv || !ctx.adresa || !ctx.opis || !ctx.telefon || !ctx.mejl || !ctx.format_mejl() || ctx.img_err ? \"disabled\" : \"\");\n    }\n  },\n  dependencies: [i4.NgIf, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.RequiredValidator, i5.NgModel],\n  styles: [\"#info[_ngcontent-%COMP%]{\\r\\n    background-color: rgba(112, 86, 109, 0.5);\\r\\n}\\r\\n#azuriraj[_ngcontent-%COMP%]{\\r\\n    background-color: rgba(112, 86, 109, 0.8);\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZW5jaWphLXByb2ZpbC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0kseUNBQXlDO0FBQzdDO0FBQ0E7SUFDSSx5Q0FBeUM7QUFDN0MiLCJmaWxlIjoiYWdlbmNpamEtcHJvZmlsLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjaW5mb3tcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTEyLCA4NiwgMTA5LCAwLjUpO1xyXG59XHJcbiNhenVyaXJhantcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTEyLCA4NiwgMTA5LCAwLjgpO1xyXG59XHJcblxyXG4iXX0= */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;IAU8CA;IAA0CA;IAAeA;;;;;;;;IAIrFA;IAA0CA;MAAAA;MAAA;MAAA,OAASA,qCAAT;IAAuB,CAAvB;IAA2GA;IAAAA;IACnJA;IACFA;;;;;;;IAiBAA;IAAAA;IACEA;IAAAA;IAAwFA;IAA8BA;IACtHA;IAAAA;IACEA;IACFA;;;;;IADEA;IAAAA;;;;;;IAIFA;IACIA;IACFA;;;;;IADEA;IAAAA;;;;;;IAEFA;IACEA;IACFA;;;;;;IACAA;IACEA;IACFA;;;;;;IAgDNA;IAAuCA;IAAyBA;;;;;;IAChEA;;;;;IAAKA;;;;ACtFrB,OAAM,MAAOC,uBAAP,CAA8B;EAElCC,YAAoBC,eAApB,EAA8DC,IAA9D,EAAuFC,gBAAvF,EAAyH;IAArG;IAA0C;IAAyB;IAUvF,eAAiB,KAAjB;IACA,uBAA2B,EAA3B;IACA,qBAA0B,KAA1B;IAoDA,oBAAqB,KAArB;EA9DC;;EAYDC,UAAU,CAACC,OAAD,EAAQ;IAChB,KAAKC,aAAL,GAAqBD,OAAO,CAACE,MAAR,CAAeC,KAApC;IAEA,IAAIC,KAAK,GAAGJ,OAAZ;IACA,IAAIK,MAAM,GAAG,IAAIC,UAAJ,EAAb;;IAEA,IAAGF,KAAK,CAACF,MAAN,CAAaC,KAAb,IAAsBC,KAAK,CAACF,MAAN,CAAaC,KAAb,CAAmBI,MAA5C,EAAoD;MAClD,MAAM,CAACC,IAAD,IAASJ,KAAK,CAACF,MAAN,CAAaC,KAA5B;MACAE,MAAM,CAACI,aAAP,CAAqBD,IAArB;;MAEAH,MAAM,CAACK,MAAP,GAAgB,MAAK;QAEnB,KAAKC,QAAL,GAAgBN,MAAM,CAACO,MAAvB;MAGD,CALD;;MAOA,IAAIC,GAAG,GAAG,IAAIC,KAAJ,EAAV;MACAD,GAAG,CAACE,GAAJ,GAAUC,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2Bd,KAAK,CAACF,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAA3B,CAAV;;MACAU,GAAG,CAACH,MAAJ,GAAa,MAAK;QAChB,KAAKS,KAAL,GAAaN,GAAG,CAACO,KAAjB;QACA,KAAKC,KAAL,GAAaR,GAAG,CAACS,MAAjB;QACA,IAAIC,GAAG,GAAI,KAAKF,KAAL,GAAa,GAAb,IAAmB,KAAKA,KAAL,GAAY,GAA/B,IAAsC,KAAKF,KAAL,GAAY,GAAlD,IAAyD,KAAKA,KAAL,GAAY,GAAhF;QACA,KAAKK,MAAL,GAAaD,GAAG,GAAE,kCAAF,GAAuC,IAAvD;;QACA,IAAGA,GAAH,EAAO;UACL,KAAKZ,QAAL,GAAgB,IAAhB;UACA,KAAKV,aAAL,GAAmB,IAAnB;UACA,KAAKwB,OAAL,GAAe,IAAf;QACD,CAJD,MAIK;UACH,KAAKA,OAAL,GAAe,KAAf;QAED;MACF,CAbD;IAeD,CA5BD,MA4BK;MACH,KAAKxB,aAAL,GAAqB,IAArB;MACA,KAAKU,QAAL,GAAgB,IAAhB;IACD;EAKF;;EAYDe,QAAQ;IACN,KAAK9B,eAAL,CAAqB+B,YAArB,GAAoCC,SAApC,CAA+CC,OAAD,IAAuB;MACnE,KAAKC,SAAL,GAAiBD,OAAjB;IACD,CAFD;IAGA,KAAKE,QAAL,GAAgBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,KAA+CH,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAA/D;IACA,KAAKC,KAAL,GAAa,KAAKL,QAAL,CAAcM,OAAd,CAAsBD,KAAnC;IACA,KAAKE,IAAL,GAAY,KAAKP,QAAL,CAAcM,OAAd,CAAsBC,IAAlC;IACA,KAAKC,MAAL,GAAc,KAAKR,QAAL,CAAcM,OAAd,CAAsBE,MAApC;IACA,KAAKC,IAAL,GAAY,KAAKT,QAAL,CAAcU,KAA1B;IACA,KAAKC,OAAL,GAAe,KAAKX,QAAL,CAAcY,WAA7B;EACD;;EACDC,WAAW;IACT,IAAG,KAAKpB,MAAR,EAAgB,KAAKA,MAAL,IAAa,IAAb;IAChB,OAAO,gDAAgDqB,IAAhD,CAAqD,KAAKL,IAA1D,CAAP;EACD;;EACDM,KAAK;IACH,IAAG,KAAKtB,MAAR,EAAgB,KAAKA,MAAL,IAAa,IAAb;IAChB,IAAIuB,gBAAgB,GAAG,KAAvB;IAEE,IAAG,CAAC,KAAKjB,SAAT,EAAoB;IACpB,KAAKA,SAAL,CAAekB,OAAf,CAAyBC,IAAD,IAAQ;MAE9B,IAAGA,IAAI,CAACR,KAAL,IAAY,KAAKD,IAAjB,IAAyBS,IAAI,CAACC,cAAL,IAAqB,KAAKnB,QAAL,CAAcmB,cAA/D,EAA8E;QAC5E,KAAKC,YAAL,GAAoB,IAApB;QACAJ,gBAAgB,GAAG,IAAnB;MACD,CAHD,MAIK,IAAG,CAACA,gBAAJ,EAAuB,KAAKI,YAAL,GAAqB,KAArB;IAE/B,CARC;IAUF;EACD;;EAEDC,iBAAiB,CAACC,IAAD,EAAK;IACpBC,OAAO,CAACC,GAAR,CAAY,SAAZ;IACA,KAAKxB,QAAL,CAAcM,OAAd,CAAsB,OAAtB,IAAiC,KAAKD,KAAtC;IACA,KAAKL,QAAL,CAAcM,OAAd,CAAsB,QAAtB,IAAkC,KAAKE,MAAvC;IACA,KAAKR,QAAL,CAAcM,OAAd,CAAsB,MAAtB,IAAgC,KAAKC,IAArC;IACA,KAAKP,QAAL,CAAcY,WAAd,GAA4B,KAAKD,OAAjC;IACA,KAAKX,QAAL,CAAcU,KAAd,GAAsB,KAAKD,IAA3B;IACA,KAAKT,QAAL,CAAcyB,cAAd,GAA+BH,IAA/B;IACAnB,YAAY,CAACuB,UAAb,CAAwB,UAAxB;IAEAvB,YAAY,CAACwB,OAAb,CAAqB,UAArB,EAAiC1B,IAAI,CAAC2B,SAAL,CAAe,KAAK5B,QAApB,CAAjC;IACA,KAAKjC,gBAAL,CAAsB8D,kBAAtB,CAAyCC,IAAzC,CAA8C;MAAEC,MAAM,EAAE;IAAV,CAA9C;IACA,KAAKpC,QAAL;IACA,KAAKzB,aAAL,GAAqB,IAArB;IACA,KAAKU,QAAL,GAAgB,IAAhB;IACAoD,UAAU,CAAC,MAAI;MACb,KAAKC,eAAL,GAAuB,IAAvB;IACD,CAFS,EAEP,IAFO,CAAV;EAID;;EAEDC,YAAY;IACV,KAAKpE,IAAL,CAAUqE,GAAV,CAAc,0CAAwC,KAAKnC,QAAL,CAAcyB,cAApE,EAAoF5B,SAApF,CAA+FuC,GAAD,IAAO,CACpG,CADD;IAEA,KAAKvE,eAAL,CAAqBwE,iBAArB,CAAuC,KAAKrC,QAAL,CAAcmB,cAArD,EAAoE,KAAKd,KAAzE,EAAgF,KAAKG,MAArF,EAA6F,KAAKD,IAAlG,EAAwG,KAAKP,QAAL,CAAcM,OAAd,CAAsB,cAAtB,CAAxG,EAA+I,KAAKK,OAApJ,EAA6J,KAAKF,IAAlK,EAAwK,EAAxK,EAA4KZ,SAA5K,CAAsLyC,OAAO,IAAE,CAC9L,CADD;IAEA,KAAKjB,iBAAL,CAAuB,EAAvB;EACD;;EACKkB,QAAQ;IAAA;;IAAA;MACZ,IAAK,KAAI,CAACnB,YAAN,IAAwB,CAAC,KAAI,CAACf,KAA9B,IAAuC,CAAC,KAAI,CAACG,MAA7C,IAAuD,CAAC,KAAI,CAACD,IAA7D,IAAqE,CAAC,KAAI,CAACI,OAA3E,IAAsF,CAAC,KAAI,CAACF,IAA5F,IAAmG,CAAC,KAAI,CAACI,WAAL,EAApG,IAA0H,KAAI,CAACnB,OAAnI,EAA4I;QAC1I,KAAI,CAACD,MAAL,GAAc,0BAAd;QACA8B,OAAO,CAACC,GAAR,CAAa,KAAI,CAACJ,YAAlB;QACAG,OAAO,CAACC,GAAR,CAAY,CAAE,KAAI,CAACnB,KAAnB;QACAkB,OAAO,CAACC,GAAR,CAAY,CAAE,KAAI,CAAChB,MAAnB;QACAe,OAAO,CAACC,GAAR,CAAY,CAAE,KAAI,CAACjB,IAAnB;QACAgB,OAAO,CAACC,GAAR,CAAY,CAAE,KAAI,CAACb,OAAnB;QACAY,OAAO,CAACC,GAAR,CAAY,CAAE,KAAI,CAACf,IAAnB;QACAc,OAAO,CAACC,GAAR,CAAY,CAAC,KAAI,CAACX,WAAL,EAAb;QACAU,OAAO,CAACC,GAAR,CAAY,KAAI,CAAC9B,OAAjB;QACA;MACD;;MAED,KAAI,CAAC8C,aAAL,GAAqB,IAArB;;MACA,IAAG,KAAI,CAACtE,aAAR,EAAsB;QACpB,IAAG,KAAI,CAACA,aAAL,CAAmBM,MAAnB,IAA2B,CAA9B,EAAgC;UAI9B,IAAIiE,QAAQ,GAAG,IAAIC,QAAJ,EAAf;;UACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAI,CAACzE,aAAL,CAAmBM,MAAvC,EAA+CmE,CAAC,EAAhD,EAAoD;YAChDF,QAAQ,CAACG,MAAT,CAAgB,WAAhB,EAA6B,KAAI,CAAC1E,aAAL,CAAmByE,CAAnB,CAA7B,EAAoD,KAAI,CAACzE,aAAL,CAAmByE,CAAnB,EAAsBE,IAA1E;UACH;;UAID,MAAM,KAAI,CAAC/E,IAAL,CAAUgF,IAAV,CAAe,0CAAf,EAA2DL,QAA3D,EACD5C,SADC;YAAA,6BACS,WAAOkD,QAAP,EAAsC;cAC7C,IAAG,KAAI,CAAC/C,QAAL,CAAcyB,cAAd,IAA8B,EAAjC,EAAoC,MAAM,KAAI,CAAC3D,IAAL,CAAUqE,GAAV,CAAc,0CAAwC,KAAI,CAACnC,QAAL,CAAcyB,cAApE,EAAoF5B,SAApF,EAAN;cACpC,KAAI,CAACmD,eAAL,GAAwBD,QAAQ,CAACE,QAAjC;;cACA,KAAI,CAACpF,eAAL,CAAqBwE,iBAArB,CAAuC,KAAI,CAACrC,QAAL,CAAcmB,cAArD,EAAoE,KAAI,CAACd,KAAzE,EAAgF,KAAI,CAACG,MAArF,EAA6F,KAAI,CAACD,IAAlG,EAAwG,KAAI,CAACP,QAAL,CAAcM,OAAd,CAAsB,cAAtB,CAAxG,EAA+I,KAAI,CAACK,OAApJ,EAA6J,KAAI,CAACF,IAAlK,EAAwK,KAAI,CAACuC,eAA7K,EAA8LnD,SAA9L;gBAAA,8BAAwM,WAAMyC,OAAN,EAAe;kBACrN,IAAGA,OAAO,CAAC,SAAD,CAAP,IAAoB,IAAvB,EAA6B;oBAC3BrD,MAAM,CAACiE,MAAP,CAAc;sBACZC,GAAG,EAAE,CADO;sBAEZC,IAAI,EAAE,CAFM;sBAGZC,QAAQ,EAAE;oBAHE,CAAd;oBAKA,KAAI,CAACb,aAAL,GAAqB,KAArB;oBACA,KAAI,CAACP,eAAL,GAAuB,0BAAvB;;oBACA,KAAI,CAACZ,iBAAL,CAAuB,KAAI,CAAC2B,eAA5B;kBACD;gBACF,CAXD;;gBAAA;kBAAA;gBAAA;cAAA;YAYH,CAhBC;;YAAA;cAAA;YAAA;UAAA,IAAN;QAiBD,CA5BD,MA6BI;UAEF,KAAI,CAACnF,eAAL,CAAqBwE,iBAArB,CAAuC,KAAI,CAACrC,QAAL,CAAcmB,cAArD,EAAqE,KAAI,CAACd,KAA1E,EAAiF,KAAI,CAACG,MAAtF,EAA8F,KAAI,CAACD,IAAnG,EAAyG,KAAI,CAACP,QAAL,CAAcM,OAAd,CAAsB,cAAtB,CAAzG,EAAgJ,KAAI,CAACK,OAArJ,EAA8J,KAAI,CAACF,IAAnK,EAAyK,KAAI,CAACT,QAAL,CAAcyB,cAAvL,EAAuM5B,SAAvM;YAAA,8BAAiN,WAAMyC,OAAN,EAAe;cAC9N,IAAGA,OAAO,CAAC,SAAD,CAAP,IAAoB,IAAvB,EAA6B;gBAC3BrD,MAAM,CAACiE,MAAP,CAAc;kBACZC,GAAG,EAAE,CADO;kBAEZC,IAAI,EAAE,CAFM;kBAGZC,QAAQ,EAAE;gBAHE,CAAd;gBAKA,KAAI,CAACb,aAAL,GAAqB,KAArB;gBACA,KAAI,CAACP,eAAL,GAAuB,0BAAvB;;gBACA,KAAI,CAACZ,iBAAL,CAAuB,KAAI,CAACrB,QAAL,CAAcyB,cAArC;cACD,CATD,MASK,CACJ;YACF,CAZD;;YAAA;cAAA;YAAA;UAAA;QAaD;MACF,CA9CD,MA8CK;QAEL,KAAI,CAAC5D,eAAL,CAAqBwE,iBAArB,CAAuC,KAAI,CAACrC,QAAL,CAAcmB,cAArD,EAAoE,KAAI,CAACd,KAAzE,EAAgF,KAAI,CAACG,MAArF,EAA6F,KAAI,CAACD,IAAlG,EAAwG,KAAI,CAACP,QAAL,CAAcM,OAAd,CAAsB,cAAtB,CAAxG,EAA+I,KAAI,CAACK,OAApJ,EAA6J,KAAI,CAACF,IAAlK,EAAyK,KAAI,CAACT,QAAL,CAAcyB,cAAvL,EAAuM5B,SAAvM;UAAA,8BAAiN,WAAMyC,OAAN,EAAe;YAC9N,IAAGA,OAAO,CAAC,SAAD,CAAP,IAAoB,IAAvB,EAA6B;cAC3BrD,MAAM,CAACiE,MAAP,CAAc;gBACZC,GAAG,EAAE,CADO;gBAEZC,IAAI,EAAE,CAFM;gBAGZC,QAAQ,EAAE;cAHE,CAAd;cAKA,KAAI,CAACb,aAAL,GAAqB,KAArB;cACA,KAAI,CAACP,eAAL,GAAuB,0BAAvB;;cACA,KAAI,CAACZ,iBAAL,CAAuB,KAAI,CAACrB,QAAL,CAAcyB,cAArC;YACD;UACF,CAXD;;UAAA;YAAA;UAAA;QAAA;MAYD;IA3Ea;EA4Eb;;AA/MiC;;;mBAAvB9D,yBAAuBD;AAAA;;;QAAvBC;EAAuB2F;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDXpChG,+BAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,GAAvB,EAAuB,CAAvB,EAAuB,QAAvB;MAIuBA;MAAOA;MAAUA;MAAoDA;MAChFA,0BAAG,CAAH,EAAG,QAAH;MAAWA;MAAQA;MAAWA;MAAqDA;MACnFA,2BAAG,EAAH,EAAG,QAAH;MAAWA;MAAMA;MAAWA;MAAmDA;MAC/EA,2BAAG,EAAH,EAAG,QAAH;MAAWA;MAAcA;MAAWA;MAA2DA;MAC/FA,2BAAG,EAAH,EAAG,QAAH;MAAWA;MAAeA;MAAUA;MAA4CA;MAChFA,2BAAG,EAAH,EAAG,QAAH;MAAWA;MAAeA;MAAUA;MAAkDA;MAClFA,6BAAM,EAAN,EAAM,QAAN;MAAcA;MAAgBA;MAAgEA;MAC9FA;MAEEA;MACAA;MAGFA;MAIRA,gCAAoD,EAApD,EAAoD,KAApD,EAAoD,EAApD,EAAoD,EAApD,EAAoD,IAApD,EAAoD,EAApD;MAI+BA;MAAqBA;MAC5CA;MAAAA,iCAA+D,EAA/D,EAA+D,QAA/D,EAA+D,EAA/D;MAGMA;MACFA;MAGFA;MAMFA;MAAAA;MACIA;MAGEA;MAGAA;MAGNA;MACAA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,EAAjB,EAAiB,EAAjB,EAAiB,KAAjB,EAAiB,EAAjB,EAAiB,EAAjB,EAAiB,OAAjB,EAAiB,EAAjB;MAGkGA;QAAA;MAAA;MAA1FA;MACAA;MAAmBA;MAAKA;MAG5BA,iCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,EAAjB,EAAiB,EAAjB,EAAiB,OAAjB,EAAiB,EAAjB;MAE6FA;QAAA;MAAA;MAAzFA;MACAA;MAAoBA;MAAMA;MAKnCA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,EAAjB,EAAiB,EAAjB,EAAiB,KAAjB,EAAiB,EAAjB,EAAiB,EAAjB,EAAiB,OAAjB,EAAiB,EAAjB;MAG8CA;MAAoBA;MACzDA;MAAkDA;QAAA;MAAA;MAAmBA;MAI1EA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,EAAjB,EAAiB,EAAjB,EAAiB,KAAjB,EAAiB,EAAjB,EAAiB,EAAjB,EAAiB,OAAjB,EAAiB,EAAjB;MAGuGA;QAAA;MAAA;MAAlGA;MACAA;MAAqBA;MAAOA;MAGhCA,iCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,EAAjB,EAAiB,EAAjB,EAAiB,OAAjB,EAAiB,EAAjB;MAEyGA;QAAA;MAAA,GAAkB,OAAlB,EAAkB;QAAA,OAAUiG,WAAV;MAAiB,CAAnC;MAArGjG;MACAA;MAAkBA;MAAWA;MAKtCA,iCAAsB,EAAtB,EAAsB,KAAtB,EAAsB,EAAtB,EAAsB,EAAtB,EAAsB,KAAtB,EAAsB,EAAtB,EAAsB,EAAtB,EAAsB,OAAtB,EAAsB,EAAtB;MAGqDA;MAAkEA;MACtHA;MAAuGA;QAAA,OAAUiG,sBAAV;MAA4B,CAA5B;MAAvGjG;MAGFA;MACEA;MACAA;MACFA;MAEAA;MACEA;MACAA;MAAgCA;QAAA,OAASiG,cAAT;MAAmB,CAAnB;MAA2JjG;MAAQA;;;;MAlGnKA;MAAAA;MACEA;MAAAA;MACFA;MAAAA;MACQA;MAAAA;MACAA;MAAAA;MACAA;MAAAA;MACHA;MAAAA;MAG9BA;MAAAA;MACEA;MAAAA;MAmBkEA;MAAAA;MAOtCA;MAAAA;MAGEA;MAAAA;MAGAA;MAAAA;MAO2DA;MAAAA;MAMDA;MAAAA;MAUvCA;MAAAA;MAOgDA;MAAAA;MAMGA;MAAAA;MAUwBA;MAAAA;MAIjIA;MAAAA;MACmBA;MAAAA;MAK+BA;MAAAA","names":["i0","AgencijaProfilComponent","constructor","korisnikService","http","broadcastService","fileChange","element","uploadedFiles","target","files","event","reader","FileReader","length","file","readAsDataURL","onload","imageSrc","result","img","Image","src","window","URL","createObjectURL","img_w","width","img_h","height","val","greska","img_err","ngOnInit","sviKorisnici","subscribe","kIzBaze","korisnici","ulogovan","JSON","parse","localStorage","getItem","naziv","dodatno","opis","adresa","mejl","imejl","telefon","br_telefona","format_mejl","test","check","set_in_iter_mejl","forEach","clan","korisnicko_ime","postoji_mejl","azuriraj_ulogovan","prof","console","log","profilna_slika","removeItem","setItem","stringify","azurirajUlogovanog","next","status","setTimeout","poruka_o_stanju","obrisi_sliku","get","res","azuriraj_agenciju","respObj","azuriraj","slanje_u_toku","formData","FormData","i","append","name","post","response","filename_server","fileName","scroll","top","left","behavior","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-profil\\agencija-profil.component.html","C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-profil\\agencija-profil.component.ts"],"sourcesContent":["<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col rounded-3 text-white me-3\" id=\"info\">\n            <div class=\"mt-3\">\n            <p><strong>Назив: </strong> <output value=\"{{ulogovan.dodatno.naziv}}\"></output></p>\n            <p><strong>Адреса: </strong>  <output value=\"{{ulogovan.dodatno.adresa}}\"></output></p>\n            <p><strong>Опис: </strong>  <output value=\"{{ulogovan.dodatno.opis}}\"></output></p>\n            <p><strong>Матични број: </strong>  <output value=\"{{ulogovan.dodatno.maticni_broj}}\"></output></p>\n            <p><strong>И-мејл адреса: </strong> <output value=\"{{ulogovan.imejl}}\"></output></p>\n            <p><strong>Број телефона: </strong> <output value=\"{{ulogovan.br_telefona}}\"></output></p>\n                <div ><strong>Профилна слика: <span *ngIf=\"ulogovan.profilna_slika==''\">(подразумевано)</span></strong></div>\n                <div class=\"mb-2 w-auto position-relative\">\n                  \n                  <img src=\"http://localhost:4000/prikaz_slike/{{ulogovan.profilna_slika!='' || ulogovan.profilna_slika  ? ulogovan.profilna_slika:'podrazumevano_agencija.png'}}\" >\n                  <span *ngIf =\"ulogovan.profilna_slika!=''\"(click)=\"obrisi_sliku()\"style=\"margin-top: -0.5em; color: #ff1b21\" class=\" position-absolute top-0 end-75\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x-square-fill\" viewBox=\"0 0 16 16\">\n                    <path d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.354 4.646L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 1 1 .708-.708z\"/>\n                  </svg></span>\n                </div>\n            </div>\n\n        </div>\n        <div class=\"col rounded-3 text-white\" id=\"azuriraj\">\n           \n            <div class=\"container mt-4 text-dark\">\n                \n                <h5 class=\"text-white\">Уредите своје податке</h5>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n        \n                    <symbol id=\"info-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n                      <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>\n                    </symbol>\n                  </svg>\n                  \n                  <div class=\"alert alert-primary d-flex align-items-center\" role=\"alert\" *ngIf=\"poruka_o_stanju\">\n                    <svg class=\"bi flex-shrink-0 me-2\" width=\"24\" height=\"24\" role=\"img\" aria-label=\"Info:\"><use xlink:href=\"#info-fill\"/></svg>\n                    <div>\n                      {{poruka_o_stanju}}\n                    </div>\n                  </div>\n                <div >\n                    <div class=\"alert alert-danger\" *ngIf=\"greska!=null\">\n                        {{greska}}\n                      </div>\n                      <div class=\"alert alert-danger\" *ngIf=\"!format_mejl() && mejl\">\n                        Мејл није у добром формату\n                      </div>\n                      <div class=\"alert alert-danger\" *ngIf=\"postoji_mejl\">\n                        Ова мејл адреса је регострована са другим налогом.\n                      </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col\">\n                    <div class=\"form-floating mb-4\">\n                        <input type=\"text\" class=\"form-control\" name=\"naziv\" id=\"naziv\" placeholder=\"Унесите име\" [(ngModel)]=\"naziv\" required>\n                        <label for=\"naziv\">Назив</label>\n                    </div>\n                    </div>\n                    <div class=\"col\">\n                    <div class=\"form-floating mb-4\">\n                        <input type=\"text\" class=\"form-control \" name=\"adresa\" id=\"adresa\" placeholder=\"Презиме\" [(ngModel)]=\"adresa\"  required>\n                        <label for=\"adresa\">Адреса</label>\n                    </div>\n                    </div>\n                 \n               </div>\n               <div class=\"row\">\n                <div class=\"col\">\n                    <div class=\"mb-3\">\n                        <label for=\"opis\" class=\"form-label\">Кратак опис агенције</label>\n                        <textarea class=\"form-control\" id=\"opis\" rows=\"3\" [(ngModel)]=\"opis\"></textarea>\n                      </div>\n                    </div>\n                    </div>\n                   <div class=\"row\">\n                    <div class=\"col\">\n                    <div class=\"form-floating mb-4\">\n                        <input type=\"number\" class=\"form-control\" name=\"br_tel\" id=\"br_tel\" placeholder=\"Унесите телефон\" [(ngModel)]=\"telefon\" required>\n                        <label for=\"lozinka\">Телефон</label>\n                    </div>\n                    </div>\n                    <div class=\"col\">\n                    <div class=\"form-floating mb-4\">\n                        <input type=\"email\" class=\"form-control \" name=\"mejl\" id=\"mejl\" placeholder=\"Унесите мејл\"  required [(ngModel)]=\"mejl\" (input)=\"check()\" >\n                        <label for=\"mejl\">Мејл адреса</label>\n                    </div>\n                    </div>\n                 \n               </div>\n               <div class=\"row mb-2\">\n                <div class=\"col-9\">\n               <div class=\"mb-3\">\n                <label for=\"formFile\" class=\"form-label text-white\">Поставите профилну слику (оставите празно ако не желите да мењате)</label>\n                <input class=\"form-control\" type=\"file\" id=\"formFile\" name=\"prof_slika\" accept=\"image/png, image/jpeg\" (change)=\"fileChange($event)\" src=\"{{uploadedFiles}}\">\n              </div>\n              </div>\n              <div class=\"col\">\n                <p *ngIf=\"imageSrc\" class=\"text-white\">Преглед постављене слике:</p>\n                <img [src]=\"imageSrc\" *ngIf=\"imageSrc\" >\n              </div>\n              </div>\n              <div class=\"d-flex justify-content-between mb-3\">\n                <span></span>\n                <button class=\"btn btn-primary\" (click)=\"azuriraj()\"  disabled=\"{{((this.postoji_mejl)  || !naziv || !adresa || !opis || !telefon || !mejl ||!format_mejl() || img_err) ? 'disabled':''}}\">Ажурирај</button>\n                \n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { Korisnik } from '../models/korisnik';\nimport { KorisnikService } from '../korisnik.service';\nimport { HttpClient } from '@angular/common/http';\nimport { BroadcastService } from '../broadcast.service';\n\n@Component({\n  selector: 'app-agencija-profil',\n  templateUrl: './agencija-profil.component.html',\n  styleUrls: ['./agencija-profil.component.css']\n})\nexport class AgencijaProfilComponent implements OnInit {\n\n  constructor(private korisnikService: KorisnikService, private http:HttpClient, private broadcastService: BroadcastService) { \n\n  }\n\n  //fu\n  greska:string;\n  uploadedFiles: Array < File > ;\n  imageSrc: string;\n  img_w:number;\n  img_h:number;\n  img_err:boolean =false;\n  filename_server : string = \"\";\n  slanje_u_toku : boolean = false;\n  \n  fileChange(element) {\n    this.uploadedFiles = element.target.files;\n    \n    let event = element;\n    let reader = new FileReader();\n    \n    if(event.target.files && event.target.files.length) {\n      const [file] = event.target.files;\n      reader.readAsDataURL(file);\n    \n      reader.onload = () => {\n   \n        this.imageSrc = reader.result as string;\n        \n   \n      };\n      \n      let img = new Image()\n      img.src = window.URL.createObjectURL(event.target.files[0])\n      img.onload = () => {\n        this.img_w = img.width;\n        this.img_h = img.height;\n        let val = (this.img_h > 300 ||this.img_h <100 || this.img_w <100 || this.img_w >300 ) \n        this.greska =val? \"слика није одговарајуће величоне\" : null\n        if(val){\n          this.imageSrc = null;\n          this.uploadedFiles=null;\n          this.img_err = true;\n        }else{\n          this.img_err = false;\n          \n        }\n      }\n      \n    }else{\n      this.uploadedFiles = null;\n      this.imageSrc = null;\n    }\n\n\n  \n    \n  }\n  //endfu\n  ulogovan: any;\n  naziv: string;\n  adresa: string;\n  telefon: number;\n  mejl: string;\n  korisnici: Korisnik[]\n  postoji_mejl:boolean=false;\n  poruka_o_stanju:string;\n  opis:string\n\n  ngOnInit(): void {\n    this.korisnikService.sviKorisnici().subscribe((kIzBaze: Korisnik[])=>{\n      this.korisnici = kIzBaze;\n    })\n    this.ulogovan = JSON.parse(localStorage.getItem(\"klijent\")) || JSON.parse(localStorage.getItem(\"agencija\"));\n    this.naziv = this.ulogovan.dodatno.naziv;\n    this.opis = this.ulogovan.dodatno.opis\n    this.adresa = this.ulogovan.dodatno.adresa\n    this.mejl = this.ulogovan.imejl\n    this.telefon = this.ulogovan.br_telefona\n  }\n  format_mejl(){\n    if(this.greska) this.greska!=null;\n    return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.mejl);\n  }\n  check() {\n    if(this.greska) this.greska!=null;\n    let set_in_iter_mejl = false;\n    \n      if(!this.korisnici) return;\n      this.korisnici.forEach( (clan)=>{\n        \n        if(clan.imejl==this.mejl && clan.korisnicko_ime!=this.ulogovan.korisnicko_ime){\n          this.postoji_mejl = true;\n          set_in_iter_mejl = true;\n        }\n        else if(!set_in_iter_mejl)  this.postoji_mejl  = false;\n      \n    }\n    )\n    return ;\n  }\n\n  azuriraj_ulogovan(prof){\n    console.log(\"alskesa\")\n    this.ulogovan.dodatno['naziv'] = this.naziv;\n    this.ulogovan.dodatno['adresa'] = this.adresa;\n    this.ulogovan.dodatno['opis'] = this.opis;\n    this.ulogovan.br_telefona = this.telefon;\n    this.ulogovan.imejl = this.mejl\n    this.ulogovan.profilna_slika = prof;\n    localStorage.removeItem(\"agencija\");\n   \n    localStorage.setItem(\"agencija\", JSON.stringify(this.ulogovan));\n    this.broadcastService.azurirajUlogovanog.next({ status: 1 });\n    this.ngOnInit();\n    this.uploadedFiles = null;\n    this.imageSrc = null;\n    setTimeout(()=>{\n      this.poruka_o_stanju = null\n    }, 5000)\n\n  }\n\n  obrisi_sliku(){\n    this.http.get('http://localhost:4000/brisanje_slike/'+this.ulogovan.profilna_slika).subscribe((res)=>{\n    })\n    this.korisnikService.azuriraj_agenciju(this.ulogovan.korisnicko_ime,this.naziv, this.adresa, this.opis, this.ulogovan.dodatno['maticni_broj'], this.telefon, this.mejl, \"\").subscribe(respObj=>{\n    })\n    this.azuriraj_ulogovan(\"\")\n  }\n  async azuriraj(){\n    if(((this.postoji_mejl)  || !this.naziv || !this.adresa || !this.opis || !this.telefon || !this.mejl ||!this.format_mejl() || this.img_err)){\n      this.greska = \"Неисправно унети подаци!\";\n      console.log((this.postoji_mejl) )\n      console.log(!(this.naziv) )\n      console.log(!(this.adresa) )\n      console.log(!(this.opis) )\n      console.log(!(this.telefon) )\n      console.log(!(this.mejl) )\n      console.log(!this.format_mejl())\n      console.log(this.img_err)\n      return;\n    }\n\n    this.slanje_u_toku = true;\n    if(this.uploadedFiles){\n      if(this.uploadedFiles.length!=0){\n        interface responseExtended extends Response{\n          fileName:any;\n        }\n        let formData = new FormData();\n        for (var i = 0; i < this.uploadedFiles.length; i++) {\n            formData.append(\"uploads[]\", this.uploadedFiles[i], this.uploadedFiles[i].name);\n        }\n        \n      \n       \n        await this.http.post('http://localhost:4000/fajlovi/otpremanje', formData)\n            .subscribe(async (response : responseExtended) => {\n                if(this.ulogovan.profilna_slika!='')await this.http.get('http://localhost:4000/brisanje_slike/'+this.ulogovan.profilna_slika).subscribe();\n                this.filename_server =  response.fileName;\n                this.korisnikService.azuriraj_agenciju(this.ulogovan.korisnicko_ime,this.naziv, this.adresa, this.opis, this.ulogovan.dodatno['maticni_broj'], this.telefon, this.mejl, this.filename_server).subscribe(async respObj=>{\n                  if(respObj['message']==\"ok\") {\n                    window.scroll({ \n                      top: 0, \n                      left: 0, \n                      behavior: 'smooth' \n                    });\n                    this.slanje_u_toku = false;\n                    this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n                    this.azuriraj_ulogovan(this.filename_server)\n                  }\n                });\n            })\n      }\n      else{\n\n        this.korisnikService.azuriraj_agenciju(this.ulogovan.korisnicko_ime, this.naziv, this.adresa, this.opis, this.ulogovan.dodatno['maticni_broj'], this.telefon, this.mejl, this.ulogovan.profilna_slika).subscribe(async respObj=>{\n          if(respObj['message']==\"ok\") {\n            window.scroll({ \n              top: 0, \n              left: 0, \n              behavior: 'smooth' \n            });\n            this.slanje_u_toku = false;\n            this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n            this.azuriraj_ulogovan(this.ulogovan.profilna_slika)\n          }else{\n          }\n        });\n      }\n    }else{\n\n    this.korisnikService.azuriraj_agenciju(this.ulogovan.korisnicko_ime,this.naziv, this.adresa, this.opis, this.ulogovan.dodatno['maticni_broj'], this.telefon, this.mejl,  this.ulogovan.profilna_slika).subscribe(async respObj=>{\n      if(respObj['message']==\"ok\") {\n        window.scroll({ \n          top: 0, \n          left: 0, \n          behavior: 'smooth' \n        });\n        this.slanje_u_toku = false;\n        this.poruka_o_stanju = \"Подаци успешно ажурирани\";\n        this.azuriraj_ulogovan(this.ulogovan.profilna_slika)\n      }\n    });\n  }\n  }\n\n}\n\n"]},"metadata":{},"sourceType":"module"}