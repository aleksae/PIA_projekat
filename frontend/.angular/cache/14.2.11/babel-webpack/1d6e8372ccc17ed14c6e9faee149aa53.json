{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AgencijePregledComponent = class AgencijePregledComponent {\n  constructor(korisnikService) {\n    this.korisnikService = korisnikService;\n    this.pretraga_u_toku = false;\n    this.sort_naziv_rastuce = false;\n    this.sort_naziv_opadajuce = false;\n    this.sort_adresa_rastuce = false;\n    this.sort_adresa_opadajuce = false;\n    this.ucitavanje = false;\n    this.opisi = [];\n    this.opisi_indikator = [];\n  }\n\n  ngOnInit() {\n    this.opisi = [];\n    this.opisi_indikator = [];\n    this.ucitavanje = true;\n    this.pretraga_u_toku = false;\n    this.korisnici = [];\n    this.stanje = \"Све агенције\";\n    this.korisnikService.sviKorisnici().subscribe(korisnici => {\n      this.pocetno = korisnici;\n      korisnici.forEach(korisnik => {\n        if (korisnik.uloga == \"agencija\") {\n          this.korisnici.push(korisnik);\n          let obj = {};\n          obj[korisnik.korisnicko_ime] = korisnik.dodatno['opis'].substring(0, 100);\n          this.opisi.push(obj);\n          obj = {};\n          obj[korisnik.korisnicko_ime] = korisnik.dodatno['opis'].length <= 100 ? true : false;\n          this.opisi_indikator.push(obj);\n        }\n      });\n      this.pocetno = this.korisnici;\n      this.ucitavanje = false;\n    });\n  }\n\n  dohvati_opis(k) {\n    for (let o of this.opisi) if (o[k.korisnicko_ime]) return o[k.korisnicko_ime];\n  }\n\n  dohvati_indikator_opisa(k) {\n    for (let o of this.opisi_indikator) if (o[k.korisnicko_ime]) return o[k.korisnicko_ime];\n  }\n\n  azuriraj_prikaz_opisa(k) {\n    let i = 0;\n\n    for (let o of this.opisi_indikator) {\n      if (o[k.korisnicko_ime]) {\n        o[k.korisnicko_ime] = !o[k.korisnicko_ime];\n\n        if (this.opisi[i][k.korisnicko_ime]) {\n          if (o[k.korisnicko_ime]) this.opisi[i][k.korisnicko_ime] = this.korisnici[i].dodatno['opis'];else this.opisi[i][k.korisnicko_ime] = this.korisnici[i].dodatno['opis'].substring(0, 100);\n        }\n      }\n\n      i++;\n    }\n  }\n\n  sortiraj(res) {\n    switch (res) {\n      case 'a_o':\n        this.sort_adresa_opadajuce = !this.sort_adresa_opadajuce;\n        if (this.sort_adresa_opadajuce && this.sort_adresa_rastuce) this.sort_adresa_rastuce = false;\n        break;\n\n      case 'a_r':\n        this.sort_adresa_rastuce = !this.sort_adresa_rastuce;\n        if (this.sort_adresa_opadajuce && this.sort_adresa_rastuce) this.sort_adresa_opadajuce = false;\n        break;\n\n      case 'n_o':\n        this.sort_naziv_opadajuce = !this.sort_naziv_opadajuce;\n        if (this.sort_naziv_opadajuce && this.sort_naziv_rastuce) this.sort_naziv_rastuce = false;\n        break;\n\n      case 'n_r':\n        this.sort_naziv_rastuce = !this.sort_naziv_rastuce;\n        if (this.sort_naziv_opadajuce && this.sort_naziv_rastuce) this.sort_naziv_opadajuce = false;\n        break;\n\n      default:\n    } //console.log(\"sno \"+this.sort_naziv_opadajuce+\" snr \"+this.sort_naziv_rastuce+\" sao \"+this.sort_adresa_opadajuce+\" sar \"+this.sort_adresa_rastuce)\n\n\n    if (this.sort_adresa_opadajuce) {\n      if (this.sort_naziv_opadajuce) this.korisnici.sort((a, b) => this.sort_string(b['dodatno']['adresa'], a['dodatno']['adresa']) || this.sort_string(b['dodatno']['naziv'], a['dodatno']['naziv']));else if (this.sort_naziv_rastuce) this.korisnici.sort((a, b) => this.sort_string(b['dodatno']['adresa'], a['dodatno']['adresa']) || this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']));else this.korisnici.sort((a, b) => this.sort_string(b['dodatno']['adresa'], a['dodatno']['adresa']));\n    } else if (this.sort_adresa_rastuce) {\n      if (this.sort_naziv_opadajuce) this.korisnici.sort((a, b) => this.sort_string(a['dodatno']['adresa'], b['dodatno']['adresa']) || this.sort_string(b['dodatno']['naziv'], a['dodatno']['naziv']));else if (this.sort_naziv_rastuce) this.korisnici.sort((a, b) => this.sort_string(a['dodatno']['adresa'], b['dodatno']['adresa']) || this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']));else this.korisnici.sort((a, b) => this.sort_string(a['dodatno']['adresa'], b['dodatno']['adresa']));\n    } else if (this.sort_naziv_opadajuce) {\n      this.korisnici.sort((a, b) => this.sort_string(b['dodatno']['naziv'], a['dodatno']['naziv']));\n    } else if (this.sort_naziv_rastuce) {\n      this.korisnici.sort((a, b) => this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']));\n    } else {\n      this.korisnici.sort((a, b) => {\n        if (this.pocetno.indexOf(a) > this.pocetno.indexOf(b)) return 1;else if (this.pocetno.indexOf(a) < this.pocetno.indexOf(b)) return -1;else return 0;\n      });\n    }\n  }\n\n  sort_string(a, b) {\n    if (a > b) return 1;else if (a < b) return -1;else return 0;\n  }\n\n  pretrazi_po_adresi() {\n    this.pocetno.forEach(agencija => {\n      if (!(agencija.uloga == \"agencija\")) return;\n      if (agencija.dodatno[\"adresa\"].toLowerCase().match(this.adresa.toLowerCase()) == this.adresa.toLowerCase()) this.korisnici.push(agencija);\n    });\n    this.stanje = \"Резултати претраге\";\n  }\n\n  pretrazi_po_nazivu() {\n    this.pocetno.forEach(agencija => {\n      if (!(agencija.uloga == \"agencija\")) return;\n      if (agencija.dodatno[\"naziv\"].toLowerCase().match(this.naziv.toLowerCase()) == this.naziv.toLowerCase()) this.korisnici.push(agencija);\n    });\n    this.stanje = \"Резултати претраге\";\n  }\n\n  pretrazi_po_oba() {\n    this.korisnici = [];\n    this.pocetno.forEach(agencija => {\n      if (!(agencija.uloga == \"agencija\")) return;\n      if (agencija.dodatno[\"naziv\"].toLowerCase().match(this.naziv.toLowerCase()) == this.naziv.toLowerCase() && agencija.dodatno[\"adresa\"].toLowerCase().match(this.adresa.toLowerCase()) == this.adresa.toLowerCase()) this.korisnici.push(agencija);\n    });\n    this.stanje = \"Резултати претраге\";\n  }\n\n  reset_adresa() {\n    this.adresa = null;\n    this.pretraga();\n  }\n\n  reset_naziv() {\n    this.naziv = null;\n    this.pretraga();\n  }\n\n  pretraga() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.stara_adresa = _this.adresa;\n      _this.stari_naziv = _this.naziv;\n      _this.pretraga_u_toku = true;\n      _this.korisnici = [];\n\n      const delay = ms => new Promise(res => setTimeout(res, ms));\n\n      yield delay(1000);\n\n      if (!_this.naziv || _this.naziv == '') {\n        //nije unet naziv agencije\n        if (!_this.adresa || _this.adresa == '') {\n          //nije uneta ni adresa ni agencija\n          _this.ngOnInit();\n\n          _this.stanje = \"Сви корисници\";\n        } else {\n          _this.pretrazi_po_adresi();\n        }\n      } else {\n        //unet je naziv agencije\n        _this.pretrazi_po_nazivu();\n\n        if (!_this.adresa || _this.adresa == '') {//nije uneta adresa, ali jeste naziv, ne radimo nista\n        } else {\n          //uneta i adresa i naziv agencije\n          _this.pretrazi_po_oba();\n        }\n      }\n\n      _this.sortiraj(null);\n\n      _this.pretraga_u_toku = false;\n    })();\n  }\n\n};\nAgencijePregledComponent = __decorate([Component({\n  selector: 'app-agencije-pregled',\n  templateUrl: './agencije-pregled.component.html',\n  styleUrls: ['./agencije-pregled.component.css']\n})], AgencijePregledComponent);\nexport { AgencijePregledComponent };","map":{"version":3,"mappings":"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","names":["Component","AgencijePregledComponent","constructor","korisnikService","ngOnInit","opisi","opisi_indikator","ucitavanje","pretraga_u_toku","korisnici","stanje","sviKorisnici","subscribe","pocetno","forEach","korisnik","uloga","push","obj","korisnicko_ime","dodatno","substring","length","dohvati_opis","k","o","dohvati_indikator_opisa","azuriraj_prikaz_opisa","i","sortiraj","res","sort_adresa_opadajuce","sort_adresa_rastuce","sort_naziv_opadajuce","sort_naziv_rastuce","sort","a","b","sort_string","indexOf","pretrazi_po_adresi","agencija","toLowerCase","match","adresa","pretrazi_po_nazivu","naziv","pretrazi_po_oba","reset_adresa","pretraga","reset_naziv","stara_adresa","stari_naziv","delay","ms","Promise","setTimeout","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencije-pregled\\agencije-pregled.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { KorisnikService } from '../korisnik.service';\nimport { Korisnik } from '../models/korisnik';\n\n@Component({\n  selector: 'app-agencije-pregled',\n  templateUrl: './agencije-pregled.component.html',\n  styleUrls: ['./agencije-pregled.component.css'],\n}) \nexport class AgencijePregledComponent implements OnInit {\n\n  constructor(private korisnikService: KorisnikService) { }\n\n  korisnici:Korisnik[];\n  stanje: string;\n  adresa: string;\n  stara_adresa: string;\n  naziv: string;\n  stari_naziv: string;\n  pocetno:Korisnik[];\n  pretraga_u_toku:boolean = false;\n  sort_naziv_rastuce:boolean=false;\n  sort_naziv_opadajuce:boolean=false;\n  sort_adresa_rastuce:boolean=false;\n  sort_adresa_opadajuce:boolean=false;\n  ucitavanje: boolean=false;\n  opisi:Object[] = []\n  opisi_indikator:Object[] = []\n  ngOnInit(): void {\n    this.opisi = []\n    this.opisi_indikator = []\n    this.ucitavanje = true\n    this.pretraga_u_toku = false;\n    this.korisnici = []\n    this.stanje = \"Све агенције\";\n    this.korisnikService.sviKorisnici().subscribe((korisnici : Korisnik[])=>{\n    this.pocetno = korisnici;\n    korisnici.forEach((korisnik)=>{\n      if(korisnik.uloga == \"agencija\") {\n        this.korisnici.push(korisnik);\n        let obj = {}\n        obj[korisnik.korisnicko_ime] = korisnik.dodatno['opis'].substring(0,100)\n        this.opisi.push(obj)\n        obj = { }\n        obj[korisnik.korisnicko_ime] = (korisnik.dodatno['opis'].length<=100) ? true : false\n        this.opisi_indikator.push(obj)\n      }\n     })\n     this.pocetno = this.korisnici;\n     this.ucitavanje = false;\n    })\n    \n  }\n  dohvati_opis(k:Korisnik){\n    for(let o of this.opisi)\n      if(o[k.korisnicko_ime]) return o[k.korisnicko_ime]\n  }\n  dohvati_indikator_opisa(k:Korisnik){\n    for(let o of this.opisi_indikator)\n      if(o[k.korisnicko_ime]) return o[k.korisnicko_ime]\n  }\n  azuriraj_prikaz_opisa(k:Korisnik){\n    let i=0\n    for(let o of this.opisi_indikator){\n      if(o[k.korisnicko_ime])  {\n        o[k.korisnicko_ime] = !o[k.korisnicko_ime]   \n          if(this.opisi[i][k.korisnicko_ime]){\n            if(o[k.korisnicko_ime]) this.opisi[i][k.korisnicko_ime] = this.korisnici[i].dodatno['opis']\n            else this.opisi[i][k.korisnicko_ime]= this.korisnici[i].dodatno['opis'].substring(0,100)\n          }  \n      }\n      i++\n    }\n  \n  }\n  sortiraj(res: string){\n    switch(res) {\n      case 'a_o':\n        this.sort_adresa_opadajuce = !this.sort_adresa_opadajuce\n        if(this.sort_adresa_opadajuce && this.sort_adresa_rastuce) this.sort_adresa_rastuce = false;\n        break;\n      case 'a_r':\n        this.sort_adresa_rastuce = !this.sort_adresa_rastuce\n        if(this.sort_adresa_opadajuce && this.sort_adresa_rastuce) this.sort_adresa_opadajuce = false;\n        break;\n      case 'n_o':\n        this.sort_naziv_opadajuce = !this.sort_naziv_opadajuce\n        if(this.sort_naziv_opadajuce && this.sort_naziv_rastuce) this.sort_naziv_rastuce = false;\n        break;\n      case 'n_r':\n        this.sort_naziv_rastuce = !this.sort_naziv_rastuce\n        if(this.sort_naziv_opadajuce && this.sort_naziv_rastuce) this.sort_naziv_opadajuce = false;\n        break;\n      default:\n    }\n    //console.log(\"sno \"+this.sort_naziv_opadajuce+\" snr \"+this.sort_naziv_rastuce+\" sao \"+this.sort_adresa_opadajuce+\" sar \"+this.sort_adresa_rastuce)\n    if(this.sort_adresa_opadajuce){\n      if(this.sort_naziv_opadajuce) this.korisnici.sort((a,b)=> ((this.sort_string(b['dodatno']['adresa'],a['dodatno']['adresa'])) || (this.sort_string(b['dodatno']['naziv'],a['dodatno']['naziv']))));\n      else if(this.sort_naziv_rastuce) this.korisnici.sort((a,b)=> ((this.sort_string(b['dodatno']['adresa'],a['dodatno']['adresa'])) || (this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']))));\n      else this.korisnici.sort((a,b)=> this.sort_string(b['dodatno']['adresa'],a['dodatno']['adresa']))\n    }\n    else if(this.sort_adresa_rastuce){\n      if(this.sort_naziv_opadajuce) this.korisnici.sort((a,b)=> ((this.sort_string(a['dodatno']['adresa'],b['dodatno']['adresa'])) || (this.sort_string(b['dodatno']['naziv'],a['dodatno']['naziv']))));\n      else if(this.sort_naziv_rastuce) this.korisnici.sort((a,b)=> ((this.sort_string(a['dodatno']['adresa'],b['dodatno']['adresa'])) || (this.sort_string(a['dodatno']['naziv'], b['dodatno']['naziv']))));\n      else this.korisnici.sort((a,b)=> this.sort_string(a['dodatno']['adresa'],b['dodatno']['adresa']))\n    }\n    else if(this.sort_naziv_opadajuce){\n      this.korisnici.sort((a,b)=> this.sort_string(b['dodatno']['naziv'],a['dodatno']['naziv']))\n    }\n    else if(this.sort_naziv_rastuce){\n      this.korisnici.sort((a,b)=> this.sort_string(a['dodatno']['naziv'],b['dodatno']['naziv']))\n    }else{\n      this.korisnici.sort((a,b)=> {\n        \n        if(this.pocetno.indexOf(a)>this.pocetno.indexOf(b)) return 1;\n        else if(this.pocetno.indexOf(a)<this.pocetno.indexOf(b)) return -1;\n        else return 0;\n      })\n    }\n\n  }\n\n  sort_string(a,b){\n    if(a>b) return 1;\n    else if(a<b) return -1;\n    else return 0;\n  }\n  private pretrazi_po_adresi(){\n    this.pocetno.forEach((agencija)=>{\n      if(!(agencija.uloga==\"agencija\")) return;\n      if((agencija.dodatno[\"adresa\"]).toLowerCase().match(this.adresa.toLowerCase())==this.adresa.toLowerCase()) this.korisnici.push(agencija)\n    })\n    this.stanje=\"Резултати претраге\"\n  }\n  private pretrazi_po_nazivu(){\n    this.pocetno.forEach((agencija)=>{\n      if(!(agencija.uloga==\"agencija\")) return;\n      if(agencija.dodatno[\"naziv\"].toLowerCase().match(this.naziv.toLowerCase())==this.naziv.toLowerCase()) this.korisnici.push(agencija)\n    })\n    this.stanje=\"Резултати претраге\"\n  }\n  private pretrazi_po_oba(){\n    this.korisnici=[];\n    this.pocetno.forEach((agencija)=>{\n      if(!(agencija.uloga==\"agencija\")) return;\n      if(agencija.dodatno[\"naziv\"].toLowerCase().match(this.naziv.toLowerCase())==this.naziv.toLowerCase()\n      && (agencija.dodatno[\"adresa\"]).toLowerCase().match(this.adresa.toLowerCase())==this.adresa.toLowerCase()) this.korisnici.push(agencija)\n    })\n    this.stanje=\"Резултати претраге\"\n  }\n\n\n  reset_adresa(){\n    this.adresa = null;\n    this.pretraga();\n  }\n  reset_naziv(){\n    this.naziv = null;\n    this.pretraga();\n  }\n  \n  async pretraga(){\n    this.stara_adresa = this.adresa;\n    this.stari_naziv = this.naziv;\n    this.pretraga_u_toku= true;\n    this.korisnici = [];\n    const delay = ms => new Promise(res => setTimeout(res, ms));\n    await delay(1000);\n    if(!this.naziv || this.naziv == ''){\n      //nije unet naziv agencije\n      if(!this.adresa || this.adresa==''){\n        //nije uneta ni adresa ni agencija\n        this.ngOnInit()\n        this.stanje=\"Сви корисници\"\n      }else{\n        this.pretrazi_po_adresi();\n      }\n    }else{\n      //unet je naziv agencije\n      \n      this.pretrazi_po_nazivu();\n      if(!this.adresa || this.adresa==''){\n        //nije uneta adresa, ali jeste naziv, ne radimo nista\n      }else{\n        //uneta i adresa i naziv agencije\n        this.pretrazi_po_oba();\n      }\n    }\n    this.sortiraj(null);\n    this.pretraga_u_toku= false;\n  }\n  \n\n}\n"]},"metadata":{},"sourceType":"module"}