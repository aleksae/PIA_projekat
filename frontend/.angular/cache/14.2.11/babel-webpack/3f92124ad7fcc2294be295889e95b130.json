{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../korisnik.service\";\nimport * as i3 from \"../objekat.service\";\nimport * as i4 from \"../poslovi.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../loader/loader.component\";\nconst _c0 = [\"modalZatvaranje\"];\n\nfunction AgencijaPrikazComponent_div_0_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41)(1, \"h4\", 42);\n    i0.ɵɵtext(2, \" \\u0417\\u0430\\u0442\\u0440\\u0430\\u0436\\u0438 \\u0441\\u0430\\u0440\\u0430\\u0434\\u045A\\u0443\");\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(3, \"svg\", 43);\n    i0.ɵɵelement(4, \"path\", 44);\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 45);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 46);\n    i0.ɵɵelement(2, \"path\", 47);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMapInterpolate1(\"alert alert-\", ctx_r4.greska ? \"danger\" : \"primary\", \" d-flex align-items-center\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.greska ? ctx_r4.greska : ctx_r4.uspeh, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.brojac);\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 48);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"sup\");\n    i0.ɵɵtext(3, \"2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"]\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const o_r9 = ctx.$implicit;\n    const i_r10 = ctx.index;\n    i0.ɵɵpropertyInterpolate(\"value\", o_r9._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\"\\u041E\\u0431\\u0458\\u0435\\u043A\\u0430\\u0442 \", i_r10 + 1, \" [\", o_r9.adresa, \", \", o_r9.kvadratura, \" m\");\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_span_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 49);\n    i0.ɵɵlistener(\"click\", function AgencijaPrikazComponent_div_0_span_43_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.prosiri_opis());\n    });\n    i0.ɵɵtext(1, \"[...]\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_div_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"div\", 50)(1, \"div\", 51);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 46);\n    i0.ɵɵelement(3, \"path\", 47);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵtext(5, \" \\u0422\\u0440\\u0435\\u043D\\u0443\\u0442\\u043D\\u043E \\u043D\\u0435 \\u043F\\u043E\\u0441\\u0442\\u043E\\u0458\\u0438 \\u043D\\u0438 \\u0458\\u0435\\u0434\\u0430\\u043D \\u043A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440. \");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_div_60_div_1_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 62);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const k_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(k_r14.klijent);\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_div_60_div_1_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 62);\n    i0.ɵɵtext(1, \"\\u0410\\u043D\\u043E\\u043D\\u0438\\u043C\\u043D\\u043E\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_div_60_div_1_span_11_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 64);\n    i0.ɵɵelement(2, \"path\", 65);\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_div_60_div_1_span_11_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 66);\n    i0.ɵɵelement(2, \"path\", 67);\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_div_60_div_1_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtemplate(1, AgencijaPrikazComponent_div_0_div_60_div_1_span_11_span_1_Template, 3, 0, \"span\", 63);\n    i0.ɵɵtemplate(2, AgencijaPrikazComponent_div_0_div_60_div_1_span_11_span_2_Template, 3, 0, \"span\", 63);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r20 = ctx.index;\n    const k_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r20 <= k_r14.ocena - 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r20 > k_r14.ocena - 1);\n  }\n}\n\nconst _c1 = function () {\n  return [];\n};\n\nfunction AgencijaPrikazComponent_div_0_div_60_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53)(1, \"div\", 54)(2, \"div\", 55)(3, \"div\")(4, \"span\", 56);\n    i0.ɵɵtext(5, \"\\u041A\\u043E\\u0440\\u0438\\u0441\\u043D\\u0438\\u043A:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"strong\");\n    i0.ɵɵtemplate(7, AgencijaPrikazComponent_div_0_div_60_div_1_span_7_Template, 2, 1, \"span\", 57);\n    i0.ɵɵtemplate(8, AgencijaPrikazComponent_div_0_div_60_div_1_span_8_Template, 2, 0, \"span\", 57);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 58)(10, \"span\", 59);\n    i0.ɵɵtemplate(11, AgencijaPrikazComponent_div_0_div_60_div_1_span_11_Template, 3, 2, \"span\", 60);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(12, \"hr\");\n    i0.ɵɵelementStart(13, \"div\", 61);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const k_r14 = ctx.$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r13.ulogovan);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r13.ulogovan);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(4, _c1).constructor(5));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", k_r14.komentar, \" \");\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_div_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"div\", 50);\n    i0.ɵɵtemplate(1, AgencijaPrikazComponent_div_0_div_60_div_1_Template, 15, 5, \"div\", 52);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.komentari);\n  }\n}\n\nfunction AgencijaPrikazComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3);\n    i0.ɵɵelement(2, \"div\", 4);\n    i0.ɵɵtemplate(3, AgencijaPrikazComponent_div_0_div_3_Template, 5, 0, \"div\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 6)(5, \"div\", 7)(6, \"div\", 8)(7, \"div\", 9)(8, \"h5\", 10);\n    i0.ɵɵtext(9, \"\\u0417\\u0430\\u0445\\u0442\\u0435\\u0432 \\u0437\\u0430 \\u0441\\u0430\\u0440\\u0430\\u0434\\u045A\\u0443\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"button\", 11, 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 13);\n    i0.ɵɵtemplate(13, AgencijaPrikazComponent_div_0_div_13_Template, 7, 5, \"div\", 14);\n    i0.ɵɵelementStart(14, \"div\", 3)(15, \"div\", 4);\n    i0.ɵɵtext(16, \" \\u0418\\u0437\\u0431\\u043E\\u0440 \\u043E\\u0431\\u0458\\u0435\\u043A\\u0442\\u0430: \");\n    i0.ɵɵelementStart(17, \"select\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function AgencijaPrikazComponent_div_0_Template_select_ngModelChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.objekat = $event);\n    });\n    i0.ɵɵtemplate(18, AgencijaPrikazComponent_div_0_option_18_Template, 5, 4, \"option\", 16);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"div\", 3)(20, \"div\", 4)(21, \"label\", 17);\n    i0.ɵɵtext(22, \"\\u041F\\u043E\\u0447\\u0435\\u0442\\u0430\\u043A \\u0440\\u0430\\u0434\\u043E\\u0432\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"input\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function AgencijaPrikazComponent_div_0_Template_input_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.pocetak = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 4)(25, \"label\", 17);\n    i0.ɵɵtext(26, \"\\u041A\\u0440\\u0430\\u0458 \\u0440\\u0430\\u0434\\u043E\\u0432\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"input\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function AgencijaPrikazComponent_div_0_Template_input_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.kraj = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(28, \"div\", 19)(29, \"button\", 20);\n    i0.ɵɵtext(30, \"\\u0417\\u0430\\u0442\\u0432\\u043E\\u0440\\u0438\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function AgencijaPrikazComponent_div_0_Template_button_click_31_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.posalji_zahtev());\n    });\n    i0.ɵɵtext(32, \"\\u041F\\u043E\\u0448\\u0430\\u0459\\u0438 \\u0437\\u0430\\u0445\\u0442\\u0435\\u0432\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(33, \"div\", 22)(34, \"div\", 3)(35, \"div\", 23)(36, \"div\", 24);\n    i0.ɵɵelement(37, \"img\", 25);\n    i0.ɵɵelementStart(38, \"div\", 26)(39, \"h5\", 27);\n    i0.ɵɵtext(40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"p\", 28);\n    i0.ɵɵtext(42);\n    i0.ɵɵtemplate(43, AgencijaPrikazComponent_div_0_span_43_Template, 2, 0, \"span\", 29);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(44, \"ul\", 30)(45, \"li\", 31);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(46, \"svg\", 32);\n    i0.ɵɵelement(47, \"path\", 33)(48, \"path\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(50, \"li\", 31);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(51, \"svg\", 35);\n    i0.ɵɵelement(52, \"path\", 36)(53, \"path\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(54);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(55, \"li\", 31);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(56, \"svg\", 38);\n    i0.ɵɵelement(57, \"path\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(58);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(59, AgencijaPrikazComponent_div_0_div_59_Template, 6, 0, \"div\", 40);\n    i0.ɵɵtemplate(60, AgencijaPrikazComponent_div_0_div_60_Template, 2, 1, \"div\", 40);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.ulogovan);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.greska || ctx_r0.uspeh);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.objekat);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.objekti);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"min\", ctx_r0.min_datum);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.pocetak);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"min\", ctx_r0.min_datum);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.kraj);\n    i0.ɵɵadvance(10);\n    i0.ɵɵpropertyInterpolate(\"src\", \"http://localhost:4000/prikaz_slike/\" + (ctx_r0.agencija.profilna_slika != \"\" ? ctx_r0.agencija.profilna_slika : \"podrazumevano_agencija.png\"), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.agencija.dodatno[\"naziv\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.opis_za_prikaz, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.skraceni_opis);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.agencija.dodatno[\"adresa\"]);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.agencija.imejl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.agencija.dodatno[\"maticni_broj\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.komentari.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.komentari.length);\n  }\n}\n\nfunction AgencijaPrikazComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelement(1, \"app-loader\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class AgencijaPrikazComponent {\n  constructor(route, korisnik, objService, posloviService) {\n    this.route = route;\n    this.korisnik = korisnik;\n    this.objService = objService;\n    this.posloviService = posloviService;\n    this.ulogovan = null;\n    this.skraceni_opis = true;\n    this.min_datum = new Date().toISOString().split(\"T\")[0];\n    this.ucitano = 0;\n    this.route.paramMap.subscribe(params => {\n      this.id = params.get('id');\n    });\n  }\n\n  prosiri_opis() {\n    console.log(\"usao\");\n    this.skraceni_opis = false;\n    this.opis_za_prikaz = this.agencija.dodatno['opis'];\n  }\n\n  ngOnInit() {\n    if (localStorage.getItem('klijent') || localStorage.getItem('agencija')) {\n      this.ulogovan = JSON.parse(localStorage.getItem('klijent')) || JSON.parse(localStorage.getItem('agencija'));\n    }\n\n    this.korisnik.dohvati_korisnika(this.id).subscribe(ag => {\n      this.agencija = ag;\n      this.opis_za_prikaz = this.agencija.dodatno['opis'].substring(0, 100);\n      if (this.opis_za_prikaz.length == this.agencija.dodatno['opis'].length) this.skraceni_opis = false;\n      this.ucitano++;\n    });\n    this.korisnik.dohvati_komentare(this.id).subscribe(komentari => {\n      if (komentari) {\n        this.komentari = komentari;\n        console.log(komentari);\n      }\n\n      this.ucitano++;\n    });\n\n    if (this.ulogovan) {\n      this.objService.sve_za_korisnika(this.ulogovan.korisnicko_ime).subscribe(res => {\n        if (res) {\n          this.objekti = res;\n        }\n\n        this.ucitano++;\n      });\n    } else {\n      this.ucitano++;\n    } //agencija.dodatno['opis']\n\n  }\n\n  posalji_zahtev() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const data = {\n        agencija: _this.agencija.korisnicko_ime,\n        agencija_ime: _this.agencija.dodatno['naziv'],\n        klijent: _this.ulogovan.korisnicko_ime,\n        objekat: _this.objekat,\n        pocetak: _this.pocetak,\n        kraj: _this.kraj,\n        status: \"Послат захтев\"\n      };\n\n      _this.posloviService.dodaj_posao(data).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (res) {\n          if (!_this.kraj || !_this.objekat || !_this.pocetak || _this.pocetak > _this.kraj) {\n            _this.greska = \"Погрешно унети подаци!\";\n            return;\n          } else {\n            _this.greska = null;\n          }\n\n          const sleep = /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator(function* (milliseconds) {\n              yield new Promise(resolve => {\n                return setTimeout(resolve, milliseconds);\n              });\n            });\n\n            return function sleep(_x2) {\n              return _ref2.apply(this, arguments);\n            };\n          }();\n\n          if (res['message'] == 'ok') {\n            _this.uspeh = \"Успешно послат захтев за сарадњу! Прозор ће се затворити за: \";\n            _this.brojac = 5;\n            setTimeout(() => {\n              _this.uspeh = null;\n\n              _this.modalZatvaranje.nativeElement.click();\n            }, 5000);\n\n            for (let i = 5; i > 0; i--) {\n              yield sleep(1000);\n              _this.brojac--;\n            }\n          }\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n}\n\nAgencijaPrikazComponent.ɵfac = function AgencijaPrikazComponent_Factory(t) {\n  return new (t || AgencijaPrikazComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.KorisnikService), i0.ɵɵdirectiveInject(i3.ObjekatService), i0.ɵɵdirectiveInject(i4.PosloviService));\n};\n\nAgencijaPrikazComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AgencijaPrikazComponent,\n  selectors: [[\"app-agencija-prikaz\"]],\n  viewQuery: function AgencijaPrikazComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalZatvaranje = _t.first);\n    }\n  },\n  decls: 2,\n  vars: 2,\n  consts: [[\"class\", \"container-fluid\", 4, \"ngIf\"], [\"class\", \"container\", 4, \"ngIf\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col\"], [\"class\", \"col float-end\", 4, \"ngIf\"], [\"id\", \"zahtev\", \"tabindex\", \"-1\", \"aria-labelledby\", \"exampleModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [\"modalZatvaranje\", \"\"], [1, \"modal-body\"], [\"role\", \"alert\", 3, \"class\", 4, \"ngIf\"], [\"aria-label\", \"Default select example\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"startDate\"], [\"id\", \"startDate\", \"type\", \"date\", 1, \"form-control\", 3, \"min\", \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"container\"], [\"id\", \"detalji\", 1, \"col-sm-3\"], [1, \"card\", 2, \"width\", \"18rem\"], [\"alt\", \"...\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [3, \"click\", 4, \"ngIf\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"me-2\", \"bi\", \"bi-house-fill\"], [\"d\", \"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z\"], [\"d\", \"m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"me-2\", \"bi\", \"bi-envelope-at-fill\"], [\"d\", \"M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z\"], [\"d\", \"M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"me-2\", \"bi\", \"bi-file-earmark-break-fill\"], [\"d\", \"M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V9H2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3zM2 12h12v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-2zM.5 10a.5.5 0 0 0 0 1h15a.5.5 0 0 0 0-1H.5z\"], [\"class\", \"col-sm-9\", 4, \"ngIf\"], [1, \"col\", \"float-end\"], [1, \"float-end\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#zahtev\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"32\", \"height\", \"32\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-plus-square-fill\", \"text-warning\"], [\"d\", \"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z\"], [\"role\", \"alert\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", \"role\", \"img\", \"aria-label\", \"Warning:\", 1, \"bi\", \"bi-exclamation-triangle-fill\", \"flex-shrink-0\", \"me-2\"], [\"d\", \"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"], [3, \"value\"], [3, \"click\"], [1, \"col-sm-9\"], [\"role\", \"alert\", 1, \"alert\", \"alert-primary\", \"d-flex\", \"align-items-center\"], [\"class\", \"container bg-white rounded ms-0 pt-2 pb-2 mb-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\", \"bg-white\", \"rounded\", \"ms-0\", \"pt-2\", \"pb-2\", \"mb-2\"], [1, \"row\", \"mt-2\", \"mb-2\"], [1, \"col\", \"d-flex\"], [1, \"ms-2\"], [\"class\", \"ms-2 me-2\", 4, \"ngIf\"], [1, \"ms-auto\"], [1, \"me-2\", \"ms-2\"], [4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"ms-2\", \"me-2\"], [1, \"ms-2\", \"me-2\"], [4, \"ngIf\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-star-fill\", \"text-warning\"], [\"d\", \"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-star\"], [\"d\", \"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\"]],\n  template: function AgencijaPrikazComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AgencijaPrikazComponent_div_0_Template, 61, 17, \"div\", 0);\n      i0.ɵɵtemplate(1, AgencijaPrikazComponent_div_1_Template, 2, 0, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.ucitano == 3);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ucitano != 3);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgModel, i7.LoaderComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZ2VuY2lqYS1wcmlrYXouY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AgencijaPrikazComponent","constructor","route","korisnik","objService","posloviService","Date","toISOString","split","paramMap","subscribe","params","id","get","prosiri_opis","console","log","skraceni_opis","opis_za_prikaz","agencija","dodatno","ngOnInit","localStorage","getItem","ulogovan","JSON","parse","dohvati_korisnika","ag","substring","length","ucitano","dohvati_komentare","komentari","sve_za_korisnika","korisnicko_ime","res","objekti","posalji_zahtev","data","agencija_ime","klijent","objekat","pocetak","kraj","status","dodaj_posao","greska","sleep","milliseconds","Promise","resolve","setTimeout","uspeh","brojac","modalZatvaranje","nativeElement","click","i","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-prikaz\\agencija-prikaz.component.html","C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\projekat\\frontend\\src\\app\\agencija-prikaz\\agencija-prikaz.component.ts"],"sourcesContent":["<div class=\"container-fluid\" *ngIf=\"ucitano==3\">\n\n    <div class=\"row\">\n      <div class=\"col\">\n        \n      </div>\n        <div class=\"col float-end\" *ngIf=\"ulogovan\"><h4 class=\"float-end\">\n            Затражи сарадњу<svg  data-bs-toggle=\"modal\" data-bs-target=\"#zahtev\" xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" class=\"bi bi-plus-square-fill text-warning\" viewBox=\"0 0 16 16\">\n                <path d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z\"/>\n              </svg>\n            </h4></div>\n    </div>\n    <div class=\"modal fade\" id=\"zahtev\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content \">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">Захтев за сарадњу</h5>\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" #modalZatvaranje></button>\n              \n            </div>\n            <div class=\"modal-body \">\n              <div class=\"alert alert-{{greska ? 'danger' : 'primary'}} d-flex align-items-center\" role=\"alert\" *ngIf=\"greska || uspeh\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-triangle-fill flex-shrink-0 me-2\" viewBox=\"0 0 16 16\" role=\"img\" aria-label=\"Warning:\">\n                <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\n                </svg>\n                <div>\n                {{greska ? greska : uspeh}} <span>{{brojac}}</span>\n                </div>\n            </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                Избор објекта:\n                <select class=\"form-select\" aria-label=\"Default select example\"  [(ngModel)]=\"objekat\">\n      \n                    <option *ngFor=\"let o of objekti; let i = index\" value=\"{{o._id}}\">Објекат {{i+1}} [{{o.adresa}}, {{o.kvadratura}} m<sup>2</sup>]</option>\n                 \n                   \n                  </select>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                    <label for=\"startDate\">Почетак радова</label>\n                    <input id=\"startDate\" class=\"form-control\" type=\"date\" min=\"{{min_datum}}\" [(ngModel)]=\"pocetak\"/>\n                </div>\n                <div class=\"col\">\n                    <label for=\"startDate\">Крај радова</label>\n                    <input id=\"startDate\" class=\"form-control\" type=\"date\" min=\"{{min_datum}}\" [(ngModel)]=\"kraj\"/>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Затвори</button>\n              <button type=\"button\" class=\"btn btn-primary\" (click)=\"posalji_zahtev()\">Пошаљи захтев</button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-sm-3\" id=\"detalji\">\n            <div class=\"card\" style=\"width: 18rem;\">\n                <img src=\"{{'http://localhost:4000/prikaz_slike/'+(agencija.profilna_slika!='' ? agencija.profilna_slika : 'podrazumevano_agencija.png')}}\" class=\"card-img-top\" alt=\"...\">\n                <div class=\"card-body\">\n                <h5 class=\"card-title\">{{agencija.dodatno['naziv']}}</h5>\n                <p class=\"card-text\">{{opis_za_prikaz}} <span (click)=\"prosiri_opis()\" *ngIf=\"skraceni_opis\">[...]</span></p>\n                \n                </div>\n                <ul class=\"list-group list-group-flush\">\n                <li class=\"list-group-item\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"me-2 bi bi-house-fill\" viewBox=\"0 0 16 16\">\n                    <path d=\"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z\"/>\n                    <path d=\"m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z\"/>\n                  </svg>{{agencija.dodatno['adresa']}}</li>\n                <li class=\"list-group-item\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"me-2 bi bi-envelope-at-fill\" viewBox=\"0 0 16 16\">\n                    <path d=\"M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z\"/>\n                    <path d=\"M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z\"/>\n                  </svg>{{agencija.imejl}}</li>\n                <li class=\"list-group-item\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"me-2 bi bi-file-earmark-break-fill\" viewBox=\"0 0 16 16\">\n                    <path d=\"M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V9H2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3zM2 12h12v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-2zM.5 10a.5.5 0 0 0 0 1h15a.5.5 0 0 0 0-1H.5z\"/>\n                  </svg>{{agencija.dodatno['maticni_broj']}}</li>\n                </ul>\n                \n            </div>\n        </div>\n        <div class=\"col-sm-9\" *ngIf=\"!komentari.length\">\n            <div class=\"alert alert-primary d-flex align-items-center\" role=\"alert\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-triangle-fill flex-shrink-0 me-2\" viewBox=\"0 0 16 16\" role=\"img\" aria-label=\"Warning:\">\n                <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\n                </svg>\n                <div>\n                Тренутно не постоји ни један коментар.\n                </div>\n            </div>\n        </div>\n        <div  class=\"col-sm-9\" *ngIf=\"komentari.length\">\n            <div class=\"container bg-white rounded ms-0 pt-2 pb-2 mb-2\" *ngFor=\"let k of komentari\">\n                <div class=\"row mt-2 mb-2\">\n                    <div class=\"col d-flex\">\n                        <div>\n                            <span class=\"ms-2\">Корисник:</span><strong><span class=\"ms-2 me-2\" *ngIf=\"ulogovan\">{{k.klijent}}</span>\n                            <span class=\"ms-2 me-2\" *ngIf=\"!ulogovan\">Анонимно</span></strong>\n                        </div>\n                        <div class=\"ms-auto\">\n                            <span class=\"me-2 ms-2\">\n                                <span *ngFor=\"let stvar of [].constructor(5); let i = index\">\n                                    <span *ngIf=\"i<=(k.ocena-1)\"><svg  xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-star-fill text-warning\" viewBox=\"0 0 16 16\">\n                                        <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"/>\n                                    </svg></span>\n                                    <span *ngIf=\"i>(k.ocena-1)\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-star\" viewBox=\"0 0 16 16\">\n                                        <path d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\"/>\n                                    </svg></span>\n                                </span>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n                <hr>\n                <div class=\"row ms-2 me-2\">\n                    {{k.komentar}}\n                </div>\n            </div>\n        </div>\n</div>\n</div>\n</div>\n<div class=\"container\" *ngIf=\"ucitano!=3\">\n<app-loader></app-loader>\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, ParamMap } from '@angular/router';\nimport { KorisnikService } from '../korisnik.service';\nimport { Komentar } from '../models/komentari';\nimport { Korisnik } from '../models/korisnik';\nimport { Objekat } from '../models/objekat';\nimport { ObjekatService } from '../objekat.service';\nimport { PosloviService } from '../poslovi.service';\nimport { iif } from 'rxjs';\n\n@Component({\n  selector: 'app-agencija-prikaz',\n  templateUrl: './agencija-prikaz.component.html',\n  styleUrls: ['./agencija-prikaz.component.css']\n})\nexport class AgencijaPrikazComponent implements OnInit {\n\n  id:string\n  komentari:Komentar[]\n  agencija:Korisnik\n  ulogovan:Korisnik = null\n  objekti:Objekat[]\n\n  opis_za_prikaz:string\n  skraceni_opis:boolean=true;\n  min_datum = new Date().toISOString().split(\"T\")[0];\n  pocetak:Date\n  brojac:number\n  kraj:Date\n  objekat:string\n  ucitano=0;\n  constructor(private route: ActivatedRoute, private korisnik:KorisnikService, private objService:ObjekatService, private posloviService:PosloviService) { \n    this.route.paramMap.subscribe((params: ParamMap) => {\n      this.id = params.get('id')\n    })\n  }\n  prosiri_opis(){\n    console.log(\"usao\")\n    this.skraceni_opis =false;\n    this.opis_za_prikaz = this.agencija.dodatno['opis']\n  }\n  ngOnInit(): void {\n    if(localStorage.getItem('klijent') || localStorage.getItem('agencija') ){\n      this.ulogovan = JSON.parse(localStorage.getItem('klijent')) || JSON.parse(localStorage.getItem('agencija'))\n      \n    }\n    this.korisnik.dohvati_korisnika(this.id).subscribe((ag:Korisnik)=>{\n      this.agencija = ag\n      this.opis_za_prikaz = this.agencija.dodatno['opis'].substring(0,100);\n      if(this.opis_za_prikaz.length==this.agencija.dodatno['opis'].length) this.skraceni_opis = false\n      this.ucitano++;\n    })\n    this.korisnik.dohvati_komentare(this.id).subscribe((komentari:Komentar[])=>{\n      if(komentari){\n        this.komentari = komentari\n        console.log(komentari)\n      }\n      this.ucitano++;\n    })\n    if(this.ulogovan){\n      this.objService.sve_za_korisnika(this.ulogovan.korisnicko_ime).subscribe((res:Objekat[])=>{\n        if(res){\n          this.objekti = res;\n        }\n        this.ucitano++;\n      })\n    }else{\n      this.ucitano++\n    }\n    //agencija.dodatno['opis']\n    \n    \n  }\n  uspeh :string\n  greska:string\n  @ViewChild('modalZatvaranje') modalZatvaranje;\n  async posalji_zahtev(){\n    const data={\n      agencija: this.agencija.korisnicko_ime,\n      agencija_ime: this.agencija.dodatno['naziv'],\n      klijent: this.ulogovan.korisnicko_ime,\n      objekat: this.objekat,\n      pocetak: this.pocetak,\n      kraj: this.kraj,\n      status: \"Послат захтев\"\n    }\n    this.posloviService.dodaj_posao(data).subscribe(async (res)=>{\n      if(!this.kraj || !this.objekat || !this.pocetak || this.pocetak>this.kraj){\n        this.greska=\"Погрешно унети подаци!\"\n        return;\n      }else{\n        this.greska = null\n      }\n      const sleep = async (milliseconds) => {\n        await new Promise(resolve => {\n            return setTimeout(resolve, milliseconds)\n        });}\n      if(res['message']=='ok'){\n        this.uspeh = \"Успешно послат захтев за сарадњу! Прозор ће се затворити за: \"\n        this.brojac = 5\n        setTimeout(()=>{\n          this.uspeh = null\n          this.modalZatvaranje.nativeElement.click();\n        },5000)\n        for (let i = 5; i >0; i--) {\n          await sleep(1000);\n          this.brojac--;\n          \n      }\n        \n      }\n    })\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}